/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/products/route";
exports.ids = ["app/api/products/route"];
exports.modules = {

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fproducts%2Froute&page=%2Fapi%2Fproducts%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fproducts%2Froute.ts&appDir=%2Fhome%2Fwebnox%2Fgokul%20indraniie%2Fwebsite%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fwebnox%2Fgokul%20indraniie%2Fwebsite&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fproducts%2Froute&page=%2Fapi%2Fproducts%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fproducts%2Froute.ts&appDir=%2Fhome%2Fwebnox%2Fgokul%20indraniie%2Fwebsite%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fwebnox%2Fgokul%20indraniie%2Fwebsite&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _home_webnox_gokul_indraniie_website_src_app_api_products_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/products/route.ts */ \"(rsc)/./src/app/api/products/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/products/route\",\n        pathname: \"/api/products\",\n        filename: \"route\",\n        bundlePath: \"app/api/products/route\"\n    },\n    resolvedPagePath: \"/home/webnox/gokul indraniie/website/src/app/api/products/route.ts\",\n    nextConfigOutput,\n    userland: _home_webnox_gokul_indraniie_website_src_app_api_products_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZwcm9kdWN0cyUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGcHJvZHVjdHMlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZwcm9kdWN0cyUyRnJvdXRlLnRzJmFwcERpcj0lMkZob21lJTJGd2Vibm94JTJGZ29rdWwlMjBpbmRyYW5paWUlMkZ3ZWJzaXRlJTJGc3JjJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZob21lJTJGd2Vibm94JTJGZ29rdWwlMjBpbmRyYW5paWUlMkZ3ZWJzaXRlJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUErRjtBQUN2QztBQUNxQjtBQUNrQjtBQUMvRjtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IseUdBQW1CO0FBQzNDO0FBQ0EsY0FBYyxrRUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLHNEQUFzRDtBQUM5RDtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUMwRjs7QUFFMUYiLCJzb3VyY2VzIjpbIiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL2hvbWUvd2Vibm94L2dva3VsIGluZHJhbmlpZS93ZWJzaXRlL3NyYy9hcHAvYXBpL3Byb2R1Y3RzL3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9wcm9kdWN0cy9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3Byb2R1Y3RzXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9wcm9kdWN0cy9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9ob21lL3dlYm5veC9nb2t1bCBpbmRyYW5paWUvd2Vic2l0ZS9zcmMvYXBwL2FwaS9wcm9kdWN0cy9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHdvcmtBc3luY1N0b3JhZ2UsIHdvcmtVbml0QXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHdvcmtBc3luY1N0b3JhZ2UsXG4gICAgICAgIHdvcmtVbml0QXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgd29ya0FzeW5jU3RvcmFnZSwgd29ya1VuaXRBc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fproducts%2Froute&page=%2Fapi%2Fproducts%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fproducts%2Froute.ts&appDir=%2Fhome%2Fwebnox%2Fgokul%20indraniie%2Fwebsite%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fwebnox%2Fgokul%20indraniie%2Fwebsite&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(rsc)/./src/app/api/products/route.ts":
/*!***************************************!*\
  !*** ./src/app/api/products/route.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DELETE: () => (/* binding */ DELETE),\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   PUT: () => (/* binding */ PUT)\n/* harmony export */ });\n/* harmony import */ var _modules_controllers_ProductController__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/modules/controllers/ProductController */ \"(rsc)/./src/modules/controllers/ProductController.ts\");\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/prisma */ \"(rsc)/./src/lib/prisma.ts\");\n\n\n\nconst productController = new _modules_controllers_ProductController__WEBPACK_IMPORTED_MODULE_0__.ProductController();\nasync function GET(request) {\n    const url = new URL(request.url);\n    const page = url.searchParams.get(\"page\");\n    const limit = url.searchParams.get(\"limit\");\n    // If pagination parameters are provided, handle pagination here\n    if (page !== null && limit !== null) {\n        try {\n            const pageNum = parseInt(page);\n            const limitNum = parseInt(limit);\n            const skip = (pageNum - 1) * limitNum;\n            // Get other filter parameters\n            const categoryId = url.searchParams.get(\"categoryId\");\n            const categoryIdsParam = url.searchParams.get(\"categoryIds\");\n            const includeSubCategories = url.searchParams.get(\"includeSubCategories\") === \"true\";\n            const search = url.searchParams.get(\"search\");\n            const fromPrice = url.searchParams.get(\"fromPrice\") ? parseFloat(url.searchParams.get(\"fromPrice\") || \"0\") : undefined;\n            const toPrice = url.searchParams.get(\"toPrice\") ? parseFloat(url.searchParams.get(\"toPrice\") || \"500000\") : undefined;\n            const wholesale = url.searchParams.get(\"wholesale\") === \"true\";\n            const brands = url.searchParams.getAll(\"brand\").filter(Boolean);\n            // Build filter conditions\n            const whereConditions = {};\n            // Resolve category filtering (single, multiple, or include subcategories)\n            if (categoryIdsParam) {\n                const categoryIds = categoryIdsParam.split(',').map((id)=>id.trim()).filter(Boolean);\n                if (categoryIds.length > 0) {\n                    whereConditions.categoryId = {\n                        in: categoryIds\n                    };\n                }\n            } else if (categoryId) {\n                if (includeSubCategories) {\n                    // Find direct subcategories of the parent and include parent itself\n                    const subCats = await _lib_prisma__WEBPACK_IMPORTED_MODULE_2__.prisma.category.findMany({\n                        where: {\n                            parentCategoryId: categoryId\n                        },\n                        select: {\n                            id: true\n                        }\n                    });\n                    const categoryIds = [\n                        categoryId,\n                        ...subCats.map((c)=>c.id)\n                    ];\n                    whereConditions.categoryId = {\n                        in: categoryIds\n                    };\n                } else {\n                    whereConditions.categoryId = categoryId;\n                }\n            }\n            if (search) {\n                whereConditions.OR = [\n                    {\n                        name: {\n                            contains: search,\n                            mode: 'insensitive'\n                        }\n                    },\n                    {\n                        description: {\n                            contains: search,\n                            mode: 'insensitive'\n                        }\n                    }\n                ];\n            }\n            if (fromPrice !== undefined || toPrice !== undefined) {\n                whereConditions.variants = {\n                    some: {\n                        price: {\n                            ...fromPrice !== undefined && {\n                                gte: fromPrice\n                            },\n                            ...toPrice !== undefined && {\n                                lte: toPrice\n                            }\n                        }\n                    }\n                };\n            }\n            if (wholesale) {\n                whereConditions.wholesale = true;\n            }\n            // Brand filtering (support multiple brands)\n            if (brands.length > 0) {\n                whereConditions.brand = {\n                    in: brands\n                };\n            }\n            // Get total count for pagination info\n            const totalCount = await _lib_prisma__WEBPACK_IMPORTED_MODULE_2__.prisma.product.count({\n                where: whereConditions\n            });\n            // Get paginated products\n            const products = await _lib_prisma__WEBPACK_IMPORTED_MODULE_2__.prisma.product.findMany({\n                where: whereConditions,\n                include: {\n                    images: true,\n                    variants: {\n                        include: {\n                            ProductVariantImage: true,\n                            discounts: {\n                                where: {\n                                    endDate: {\n                                        gte: new Date()\n                                    }\n                                }\n                            }\n                        }\n                    },\n                    reviews: true\n                },\n                skip,\n                take: limitNum,\n                orderBy: {\n                    createdAt: 'desc'\n                }\n            });\n            return next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.json({\n                status: \"success\",\n                data: products,\n                pagination: {\n                    total: totalCount,\n                    page: pageNum,\n                    limit: limitNum,\n                    totalPages: Math.ceil(totalCount / limitNum),\n                    hasMore: skip + limitNum < totalCount\n                }\n            });\n        } catch (error) {\n            console.error(\"Error fetching paginated products:\", error);\n            return next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.json({\n                status: \"error\",\n                message: error.message || \"Failed to fetch products\"\n            }, {\n                status: 500\n            });\n        }\n    }\n    // Otherwise, use the original implementation\n    return await productController.GetAllProducts(request);\n}\nasync function POST(request) {\n    return await productController.CreateProduct(request);\n}\n// Product variant image endpoints\nasync function PUT(request) {\n    const { searchParams } = new URL(request.url);\n    const action = searchParams.get(\"action\");\n    switch(action){\n        case \"add-variant-image\":\n            return await productController.AddProductVariantImage(request);\n        case \"delete-variant-image\":\n            return await productController.DeleteProductVariantImage(request);\n        case \"add-variant-discount\":\n            return await productController.AddProductVariantDiscount(request);\n        case \"update-variant-discount\":\n            return await productController.UpdateProductVariantDiscount(request);\n        case \"delete-variant-discount\":\n            return await productController.DeleteProductVariantDiscount(request);\n        case \"update-product\":\n            return await productController.UpdateProduct(request);\n        case \"update-variant\":\n            return await productController.UpdateProductVariant(request);\n        default:\n            return new Response(\"Invalid action\", {\n                status: 400\n            });\n    }\n}\nasync function DELETE(request) {\n    const { searchParams } = new URL(request.url);\n    const action = searchParams.get(\"action\");\n    switch(action){\n        case \"product\":\n            return await productController.DeleteProduct(request);\n        case \"variant\":\n            return await productController.DeleteProductVariant(request);\n        default:\n            return new Response(\"Invalid action\", {\n                status: 400\n            });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFRQyxHQUFHO0lBQzVDLE1BQU0rRSxTQUFTNUUsYUFBYUMsR0FBRyxDQUFDO0lBRWhDLE9BQVEyRTtRQUNKLEtBQUs7WUFDRCxPQUFPLE1BQU1sRixrQkFBa0I0RixhQUFhLENBQUMxRjtRQUNqRCxLQUFLO1lBQ0QsT0FBTyxNQUFNRixrQkFBa0I2RixvQkFBb0IsQ0FBQzNGO1FBQ3hEO1lBQ0ksT0FBTyxJQUFJd0YsU0FBUyxrQkFBa0I7Z0JBQUV2QixRQUFRO1lBQUk7SUFDNUQ7QUFDSiIsInNvdXJjZXMiOlsiL2hvbWUvd2Vibm94L2dva3VsIGluZHJhbmlpZS93ZWJzaXRlL3NyYy9hcHAvYXBpL3Byb2R1Y3RzL3JvdXRlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFByb2R1Y3RDb250cm9sbGVyIH0gZnJvbSBcIkAvbW9kdWxlcy9jb250cm9sbGVycy9Qcm9kdWN0Q29udHJvbGxlclwiO1xuaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gXCJuZXh0L3NlcnZlclwiO1xuaW1wb3J0IHsgcHJpc21hIH0gZnJvbSBcIkAvbGliL3ByaXNtYVwiO1xuXG5jb25zdCBwcm9kdWN0Q29udHJvbGxlciA9IG5ldyBQcm9kdWN0Q29udHJvbGxlcigpO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKHJlcXVlc3Q6IFJlcXVlc3QpIHtcbiAgICBjb25zdCB1cmwgPSBuZXcgVVJMKHJlcXVlc3QudXJsKTtcbiAgICBjb25zdCBwYWdlID0gdXJsLnNlYXJjaFBhcmFtcy5nZXQoXCJwYWdlXCIpO1xuICAgIGNvbnN0IGxpbWl0ID0gdXJsLnNlYXJjaFBhcmFtcy5nZXQoXCJsaW1pdFwiKTtcbiAgICBcbiAgICAvLyBJZiBwYWdpbmF0aW9uIHBhcmFtZXRlcnMgYXJlIHByb3ZpZGVkLCBoYW5kbGUgcGFnaW5hdGlvbiBoZXJlXG4gICAgaWYgKHBhZ2UgIT09IG51bGwgJiYgbGltaXQgIT09IG51bGwpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHBhZ2VOdW0gPSBwYXJzZUludChwYWdlKTtcbiAgICAgICAgICAgIGNvbnN0IGxpbWl0TnVtID0gcGFyc2VJbnQobGltaXQpO1xuICAgICAgICAgICAgY29uc3Qgc2tpcCA9IChwYWdlTnVtIC0gMSkgKiBsaW1pdE51bTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gR2V0IG90aGVyIGZpbHRlciBwYXJhbWV0ZXJzXG4gICAgICAgICAgICBjb25zdCBjYXRlZ29yeUlkID0gdXJsLnNlYXJjaFBhcmFtcy5nZXQoXCJjYXRlZ29yeUlkXCIpO1xuICAgICAgICAgICAgY29uc3QgY2F0ZWdvcnlJZHNQYXJhbSA9IHVybC5zZWFyY2hQYXJhbXMuZ2V0KFwiY2F0ZWdvcnlJZHNcIik7XG4gICAgICAgICAgICBjb25zdCBpbmNsdWRlU3ViQ2F0ZWdvcmllcyA9IHVybC5zZWFyY2hQYXJhbXMuZ2V0KFwiaW5jbHVkZVN1YkNhdGVnb3JpZXNcIikgPT09IFwidHJ1ZVwiO1xuICAgICAgICAgICAgY29uc3Qgc2VhcmNoID0gdXJsLnNlYXJjaFBhcmFtcy5nZXQoXCJzZWFyY2hcIik7XG4gICAgICAgICAgICBjb25zdCBmcm9tUHJpY2UgPSB1cmwuc2VhcmNoUGFyYW1zLmdldChcImZyb21QcmljZVwiKSA/IHBhcnNlRmxvYXQodXJsLnNlYXJjaFBhcmFtcy5nZXQoXCJmcm9tUHJpY2VcIikgfHwgXCIwXCIpIDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgY29uc3QgdG9QcmljZSA9IHVybC5zZWFyY2hQYXJhbXMuZ2V0KFwidG9QcmljZVwiKSA/IHBhcnNlRmxvYXQodXJsLnNlYXJjaFBhcmFtcy5nZXQoXCJ0b1ByaWNlXCIpIHx8IFwiNTAwMDAwXCIpIDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgY29uc3Qgd2hvbGVzYWxlID0gdXJsLnNlYXJjaFBhcmFtcy5nZXQoXCJ3aG9sZXNhbGVcIikgPT09IFwidHJ1ZVwiO1xuICAgICAgICAgICAgY29uc3QgYnJhbmRzID0gdXJsLnNlYXJjaFBhcmFtcy5nZXRBbGwoXCJicmFuZFwiKS5maWx0ZXIoQm9vbGVhbik7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEJ1aWxkIGZpbHRlciBjb25kaXRpb25zXG4gICAgICAgICAgICBjb25zdCB3aGVyZUNvbmRpdGlvbnM6IGFueSA9IHt9O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBSZXNvbHZlIGNhdGVnb3J5IGZpbHRlcmluZyAoc2luZ2xlLCBtdWx0aXBsZSwgb3IgaW5jbHVkZSBzdWJjYXRlZ29yaWVzKVxuICAgICAgICAgICAgaWYgKGNhdGVnb3J5SWRzUGFyYW0pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjYXRlZ29yeUlkcyA9IGNhdGVnb3J5SWRzUGFyYW0uc3BsaXQoJywnKS5tYXAoaWQgPT4gaWQudHJpbSgpKS5maWx0ZXIoQm9vbGVhbik7XG4gICAgICAgICAgICAgICAgaWYgKGNhdGVnb3J5SWRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgd2hlcmVDb25kaXRpb25zLmNhdGVnb3J5SWQgPSB7IGluOiBjYXRlZ29yeUlkcyB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY2F0ZWdvcnlJZCkge1xuICAgICAgICAgICAgICAgIGlmIChpbmNsdWRlU3ViQ2F0ZWdvcmllcykge1xuICAgICAgICAgICAgICAgICAgICAvLyBGaW5kIGRpcmVjdCBzdWJjYXRlZ29yaWVzIG9mIHRoZSBwYXJlbnQgYW5kIGluY2x1ZGUgcGFyZW50IGl0c2VsZlxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzdWJDYXRzID0gYXdhaXQgcHJpc21hLmNhdGVnb3J5LmZpbmRNYW55KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IHBhcmVudENhdGVnb3J5SWQ6IGNhdGVnb3J5SWQgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdDogeyBpZDogdHJ1ZSB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjYXRlZ29yeUlkcyA9IFtjYXRlZ29yeUlkLCAuLi5zdWJDYXRzLm1hcChjID0+IGMuaWQpXTtcbiAgICAgICAgICAgICAgICAgICAgd2hlcmVDb25kaXRpb25zLmNhdGVnb3J5SWQgPSB7IGluOiBjYXRlZ29yeUlkcyB9O1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHdoZXJlQ29uZGl0aW9ucy5jYXRlZ29yeUlkID0gY2F0ZWdvcnlJZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChzZWFyY2gpIHtcbiAgICAgICAgICAgICAgICB3aGVyZUNvbmRpdGlvbnMuT1IgPSBbXG4gICAgICAgICAgICAgICAgICAgIHsgbmFtZTogeyBjb250YWluczogc2VhcmNoLCBtb2RlOiAnaW5zZW5zaXRpdmUnIH0gfSxcbiAgICAgICAgICAgICAgICAgICAgeyBkZXNjcmlwdGlvbjogeyBjb250YWluczogc2VhcmNoLCBtb2RlOiAnaW5zZW5zaXRpdmUnIH0gfVxuICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChmcm9tUHJpY2UgIT09IHVuZGVmaW5lZCB8fCB0b1ByaWNlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB3aGVyZUNvbmRpdGlvbnMudmFyaWFudHMgPSB7XG4gICAgICAgICAgICAgICAgICAgIHNvbWU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByaWNlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uKGZyb21QcmljZSAhPT0gdW5kZWZpbmVkICYmIHsgZ3RlOiBmcm9tUHJpY2UgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uKHRvUHJpY2UgIT09IHVuZGVmaW5lZCAmJiB7IGx0ZTogdG9QcmljZSB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHdob2xlc2FsZSkge1xuICAgICAgICAgICAgICAgIHdoZXJlQ29uZGl0aW9ucy53aG9sZXNhbGUgPSB0cnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBCcmFuZCBmaWx0ZXJpbmcgKHN1cHBvcnQgbXVsdGlwbGUgYnJhbmRzKVxuICAgICAgICAgICAgaWYgKGJyYW5kcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgd2hlcmVDb25kaXRpb25zLmJyYW5kID0ge1xuICAgICAgICAgICAgICAgICAgICBpbjogYnJhbmRzXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gR2V0IHRvdGFsIGNvdW50IGZvciBwYWdpbmF0aW9uIGluZm9cbiAgICAgICAgICAgIGNvbnN0IHRvdGFsQ291bnQgPSBhd2FpdCBwcmlzbWEucHJvZHVjdC5jb3VudCh7XG4gICAgICAgICAgICAgICAgd2hlcmU6IHdoZXJlQ29uZGl0aW9uc1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIEdldCBwYWdpbmF0ZWQgcHJvZHVjdHNcbiAgICAgICAgICAgIGNvbnN0IHByb2R1Y3RzID0gYXdhaXQgcHJpc21hLnByb2R1Y3QuZmluZE1hbnkoe1xuICAgICAgICAgICAgICAgIHdoZXJlOiB3aGVyZUNvbmRpdGlvbnMsXG4gICAgICAgICAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgICAgICAgICAgICBpbWFnZXM6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHZhcmlhbnRzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUHJvZHVjdFZhcmlhbnRJbWFnZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNjb3VudHM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZERhdGU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBndGU6IG5ldyBEYXRlKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgcmV2aWV3czogdHJ1ZVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgc2tpcCxcbiAgICAgICAgICAgICAgICB0YWtlOiBsaW1pdE51bSxcbiAgICAgICAgICAgICAgICBvcmRlckJ5OiB7XG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZWRBdDogJ2Rlc2MnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgICAgICAgICAgc3RhdHVzOiBcInN1Y2Nlc3NcIixcbiAgICAgICAgICAgICAgICBkYXRhOiBwcm9kdWN0cyxcbiAgICAgICAgICAgICAgICBwYWdpbmF0aW9uOiB7XG4gICAgICAgICAgICAgICAgICAgIHRvdGFsOiB0b3RhbENvdW50LFxuICAgICAgICAgICAgICAgICAgICBwYWdlOiBwYWdlTnVtLFxuICAgICAgICAgICAgICAgICAgICBsaW1pdDogbGltaXROdW0sXG4gICAgICAgICAgICAgICAgICAgIHRvdGFsUGFnZXM6IE1hdGguY2VpbCh0b3RhbENvdW50IC8gbGltaXROdW0pLFxuICAgICAgICAgICAgICAgICAgICBoYXNNb3JlOiBza2lwICsgbGltaXROdW0gPCB0b3RhbENvdW50XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyBwYWdpbmF0ZWQgcHJvZHVjdHM6XCIsIGVycm9yKTtcbiAgICAgICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgICAgICAgICAgc3RhdHVzOiBcImVycm9yXCIsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSB8fCBcIkZhaWxlZCB0byBmZXRjaCBwcm9kdWN0c1wiXG4gICAgICAgICAgICB9LCB7IHN0YXR1czogNTAwIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIE90aGVyd2lzZSwgdXNlIHRoZSBvcmlnaW5hbCBpbXBsZW1lbnRhdGlvblxuICAgIHJldHVybiBhd2FpdCBwcm9kdWN0Q29udHJvbGxlci5HZXRBbGxQcm9kdWN0cyhyZXF1ZXN0KTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdDogUmVxdWVzdCkge1xuICAgIHJldHVybiBhd2FpdCBwcm9kdWN0Q29udHJvbGxlci5DcmVhdGVQcm9kdWN0KHJlcXVlc3QpO1xufVxuXG4vLyBQcm9kdWN0IHZhcmlhbnQgaW1hZ2UgZW5kcG9pbnRzXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUFVUKHJlcXVlc3Q6IFJlcXVlc3QpIHtcbiAgICBjb25zdCB7IHNlYXJjaFBhcmFtcyB9ID0gbmV3IFVSTChyZXF1ZXN0LnVybCk7XG4gICAgY29uc3QgYWN0aW9uID0gc2VhcmNoUGFyYW1zLmdldChcImFjdGlvblwiKTtcblxuICAgIHN3aXRjaCAoYWN0aW9uKSB7XG4gICAgICAgIGNhc2UgXCJhZGQtdmFyaWFudC1pbWFnZVwiOlxuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHByb2R1Y3RDb250cm9sbGVyLkFkZFByb2R1Y3RWYXJpYW50SW1hZ2UocmVxdWVzdCk7XG4gICAgICAgIGNhc2UgXCJkZWxldGUtdmFyaWFudC1pbWFnZVwiOlxuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHByb2R1Y3RDb250cm9sbGVyLkRlbGV0ZVByb2R1Y3RWYXJpYW50SW1hZ2UocmVxdWVzdCk7XG4gICAgICAgIGNhc2UgXCJhZGQtdmFyaWFudC1kaXNjb3VudFwiOlxuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHByb2R1Y3RDb250cm9sbGVyLkFkZFByb2R1Y3RWYXJpYW50RGlzY291bnQocmVxdWVzdCk7XG4gICAgICAgIGNhc2UgXCJ1cGRhdGUtdmFyaWFudC1kaXNjb3VudFwiOlxuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHByb2R1Y3RDb250cm9sbGVyLlVwZGF0ZVByb2R1Y3RWYXJpYW50RGlzY291bnQocmVxdWVzdCk7XG4gICAgICAgIGNhc2UgXCJkZWxldGUtdmFyaWFudC1kaXNjb3VudFwiOlxuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHByb2R1Y3RDb250cm9sbGVyLkRlbGV0ZVByb2R1Y3RWYXJpYW50RGlzY291bnQocmVxdWVzdCk7XG4gICAgICAgIGNhc2UgXCJ1cGRhdGUtcHJvZHVjdFwiOlxuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHByb2R1Y3RDb250cm9sbGVyLlVwZGF0ZVByb2R1Y3QocmVxdWVzdCk7XG4gICAgICAgIGNhc2UgXCJ1cGRhdGUtdmFyaWFudFwiOlxuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHByb2R1Y3RDb250cm9sbGVyLlVwZGF0ZVByb2R1Y3RWYXJpYW50KHJlcXVlc3QpO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIG5ldyBSZXNwb25zZShcIkludmFsaWQgYWN0aW9uXCIsIHsgc3RhdHVzOiA0MDAgfSk7XG4gICAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gREVMRVRFKHJlcXVlc3Q6IFJlcXVlc3QpIHtcbiAgICBjb25zdCB7IHNlYXJjaFBhcmFtcyB9ID0gbmV3IFVSTChyZXF1ZXN0LnVybCk7XG4gICAgY29uc3QgYWN0aW9uID0gc2VhcmNoUGFyYW1zLmdldChcImFjdGlvblwiKTtcblxuICAgIHN3aXRjaCAoYWN0aW9uKSB7XG4gICAgICAgIGNhc2UgXCJwcm9kdWN0XCI6XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgcHJvZHVjdENvbnRyb2xsZXIuRGVsZXRlUHJvZHVjdChyZXF1ZXN0KTtcbiAgICAgICAgY2FzZSBcInZhcmlhbnRcIjpcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBwcm9kdWN0Q29udHJvbGxlci5EZWxldGVQcm9kdWN0VmFyaWFudChyZXF1ZXN0KTtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBuZXcgUmVzcG9uc2UoXCJJbnZhbGlkIGFjdGlvblwiLCB7IHN0YXR1czogNDAwIH0pO1xuICAgIH1cbn0gICBcbiJdLCJuYW1lcyI6WyJQcm9kdWN0Q29udHJvbGxlciIsIk5leHRSZXNwb25zZSIsInByaXNtYSIsInByb2R1Y3RDb250cm9sbGVyIiwiR0VUIiwicmVxdWVzdCIsInVybCIsIlVSTCIsInBhZ2UiLCJzZWFyY2hQYXJhbXMiLCJnZXQiLCJsaW1pdCIsInBhZ2VOdW0iLCJwYXJzZUludCIsImxpbWl0TnVtIiwic2tpcCIsImNhdGVnb3J5SWQiLCJjYXRlZ29yeUlkc1BhcmFtIiwiaW5jbHVkZVN1YkNhdGVnb3JpZXMiLCJzZWFyY2giLCJmcm9tUHJpY2UiLCJwYXJzZUZsb2F0IiwidW5kZWZpbmVkIiwidG9QcmljZSIsIndob2xlc2FsZSIsImJyYW5kcyIsImdldEFsbCIsImZpbHRlciIsIkJvb2xlYW4iLCJ3aGVyZUNvbmRpdGlvbnMiLCJjYXRlZ29yeUlkcyIsInNwbGl0IiwibWFwIiwiaWQiLCJ0cmltIiwibGVuZ3RoIiwiaW4iLCJzdWJDYXRzIiwiY2F0ZWdvcnkiLCJmaW5kTWFueSIsIndoZXJlIiwicGFyZW50Q2F0ZWdvcnlJZCIsInNlbGVjdCIsImMiLCJPUiIsIm5hbWUiLCJjb250YWlucyIsIm1vZGUiLCJkZXNjcmlwdGlvbiIsInZhcmlhbnRzIiwic29tZSIsInByaWNlIiwiZ3RlIiwibHRlIiwiYnJhbmQiLCJ0b3RhbENvdW50IiwicHJvZHVjdCIsImNvdW50IiwicHJvZHVjdHMiLCJpbmNsdWRlIiwiaW1hZ2VzIiwiUHJvZHVjdFZhcmlhbnRJbWFnZSIsImRpc2NvdW50cyIsImVuZERhdGUiLCJEYXRlIiwicmV2aWV3cyIsInRha2UiLCJvcmRlckJ5IiwiY3JlYXRlZEF0IiwianNvbiIsInN0YXR1cyIsImRhdGEiLCJwYWdpbmF0aW9uIiwidG90YWwiLCJ0b3RhbFBhZ2VzIiwiTWF0aCIsImNlaWwiLCJoYXNNb3JlIiwiZXJyb3IiLCJjb25zb2xlIiwibWVzc2FnZSIsIkdldEFsbFByb2R1Y3RzIiwiUE9TVCIsIkNyZWF0ZVByb2R1Y3QiLCJQVVQiLCJhY3Rpb24iLCJBZGRQcm9kdWN0VmFyaWFudEltYWdlIiwiRGVsZXRlUHJvZHVjdFZhcmlhbnRJbWFnZSIsIkFkZFByb2R1Y3RWYXJpYW50RGlzY291bnQiLCJVcGRhdGVQcm9kdWN0VmFyaWFudERpc2NvdW50IiwiRGVsZXRlUHJvZHVjdFZhcmlhbnREaXNjb3VudCIsIlVwZGF0ZVByb2R1Y3QiLCJVcGRhdGVQcm9kdWN0VmFyaWFudCIsIlJlc3BvbnNlIiwiREVMRVRFIiwiRGVsZXRlUHJvZHVjdCIsIkRlbGV0ZVByb2R1Y3RWYXJpYW50Il0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/products/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/db.ts":
/*!***********************!*\
  !*** ./src/lib/db.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst db = global.prisma || new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient();\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (db);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2RiLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUE4QztBQUU5QyxNQUFNQyxLQUFLQyxPQUFPQyxNQUFNLElBQUksSUFBSUgsd0RBQVlBO0FBRTVDLGlFQUFlQyxFQUFFQSxFQUFDIiwic291cmNlcyI6WyIvaG9tZS93ZWJub3gvZ29rdWwgaW5kcmFuaWllL3dlYnNpdGUvc3JjL2xpYi9kYi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQcmlzbWFDbGllbnQgfSBmcm9tICdAcHJpc21hL2NsaWVudCc7XG5cbmNvbnN0IGRiID0gZ2xvYmFsLnByaXNtYSB8fCBuZXcgUHJpc21hQ2xpZW50KCk7XG5cbmV4cG9ydCBkZWZhdWx0IGRiO1xuIl0sIm5hbWVzIjpbIlByaXNtYUNsaWVudCIsImRiIiwiZ2xvYmFsIiwicHJpc21hIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/db.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/prisma.ts":
/*!***************************!*\
  !*** ./src/lib/prisma.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst globalForPrisma = global;\nconst prisma = globalForPrisma.prisma || new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient({\n    log: [\n        'query'\n    ]\n});\nif (true) globalForPrisma.prisma = prisma // src/lib/prisma.ts\n // import { PrismaClient } from '@prisma/client';\n // const prismaClientSingleton = () => {\n //   return new PrismaClient();\n // };\n // declare global {\n //   var prisma: undefined | ReturnType<typeof prismaClientSingleton>;\n // }\n // const prisma = globalThis.prisma ?? prismaClientSingleton();\n // export default prisma;\n // if (process.env.NODE_ENV !== 'production') {\n //   globalThis.prisma = prisma;\n // }\n;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3ByaXNtYS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBNkM7QUFFN0MsTUFBTUMsa0JBQWtCQztBQUVqQixNQUFNQyxTQUNYRixnQkFBZ0JFLE1BQU0sSUFDdEIsSUFBSUgsd0RBQVlBLENBQUM7SUFDZkksS0FBSztRQUFDO0tBQVE7QUFDaEIsR0FBRTtBQUVKLElBQUlDLElBQXFDLEVBQUVKLGdCQUFnQkUsTUFBTSxHQUFHQSxPQUVwRSxvQkFBb0I7Q0FDcEIsaURBQWlEO0NBRWpELHdDQUF3QztDQUN4QywrQkFBK0I7Q0FDL0IsS0FBSztDQUVMLG1CQUFtQjtDQUNuQixzRUFBc0U7Q0FDdEUsSUFBSTtDQUVKLCtEQUErRDtDQUUvRCx5QkFBeUI7Q0FFekIsK0NBQStDO0NBQy9DLGdDQUFnQztDQUNoQyxJQUFJIiwic291cmNlcyI6WyIvaG9tZS93ZWJub3gvZ29rdWwgaW5kcmFuaWllL3dlYnNpdGUvc3JjL2xpYi9wcmlzbWEudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUHJpc21hQ2xpZW50IH0gZnJvbSAnQHByaXNtYS9jbGllbnQnXG5cbmNvbnN0IGdsb2JhbEZvclByaXNtYSA9IGdsb2JhbCBhcyB1bmtub3duIGFzIHsgcHJpc21hOiBQcmlzbWFDbGllbnQgfVxuXG5leHBvcnQgY29uc3QgcHJpc21hID1cbiAgZ2xvYmFsRm9yUHJpc21hLnByaXNtYSB8fFxuICBuZXcgUHJpc21hQ2xpZW50KHtcbiAgICBsb2c6IFsncXVlcnknXSxcbiAgfSlcblxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIGdsb2JhbEZvclByaXNtYS5wcmlzbWEgPSBwcmlzbWEgXG5cbi8vIHNyYy9saWIvcHJpc21hLnRzXG4vLyBpbXBvcnQgeyBQcmlzbWFDbGllbnQgfSBmcm9tICdAcHJpc21hL2NsaWVudCc7XG5cbi8vIGNvbnN0IHByaXNtYUNsaWVudFNpbmdsZXRvbiA9ICgpID0+IHtcbi8vICAgcmV0dXJuIG5ldyBQcmlzbWFDbGllbnQoKTtcbi8vIH07XG5cbi8vIGRlY2xhcmUgZ2xvYmFsIHtcbi8vICAgdmFyIHByaXNtYTogdW5kZWZpbmVkIHwgUmV0dXJuVHlwZTx0eXBlb2YgcHJpc21hQ2xpZW50U2luZ2xldG9uPjtcbi8vIH1cblxuLy8gY29uc3QgcHJpc21hID0gZ2xvYmFsVGhpcy5wcmlzbWEgPz8gcHJpc21hQ2xpZW50U2luZ2xldG9uKCk7XG5cbi8vIGV4cG9ydCBkZWZhdWx0IHByaXNtYTtcblxuLy8gaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbi8vICAgZ2xvYmFsVGhpcy5wcmlzbWEgPSBwcmlzbWE7XG4vLyB9Il0sIm5hbWVzIjpbIlByaXNtYUNsaWVudCIsImdsb2JhbEZvclByaXNtYSIsImdsb2JhbCIsInByaXNtYSIsImxvZyIsInByb2Nlc3MiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/prisma.ts\n");

/***/ }),

/***/ "(rsc)/./src/modules/controllers/ProductController.ts":
/*!******************************************************!*\
  !*** ./src/modules/controllers/ProductController.ts ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ProductController: () => (/* binding */ ProductController)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _utils_responseGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/utils/responseGenerator */ \"(rsc)/./src/utils/responseGenerator.ts\");\n/* harmony import */ var _services_ProductService__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../services/ProductService */ \"(rsc)/./src/modules/services/ProductService.ts\");\n/* harmony import */ var _validations_ProductValidation__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../validations/ProductValidation */ \"(rsc)/./src/modules/validations/ProductValidation.ts\");\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/db */ \"(rsc)/./src/lib/db.ts\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v3/ZodError.js\");\n/* harmony import */ var zod_validation_error__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! zod-validation-error */ \"(rsc)/./node_modules/zod-validation-error/v3/index.mjs\");\n/* harmony import */ var xlsx__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! xlsx */ \"(rsc)/./node_modules/xlsx/xlsx.mjs\");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! axios */ \"(rsc)/./node_modules/axios/lib/axios.js\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_5__);\n\n\n\n\n\n\n\n\n\n\nconst prisma = new _prisma_client__WEBPACK_IMPORTED_MODULE_5__.PrismaClient();\nclass ProductController {\n    constructor(){\n        this.productService = new _services_ProductService__WEBPACK_IMPORTED_MODULE_2__.ProductService();\n    }\n    async CreateProduct(request) {\n        try {\n            const body = await request.json();\n            const validatedData = _validations_ProductValidation__WEBPACK_IMPORTED_MODULE_3__.ProductValidation.CreateProduct().parse(body);\n            const product = await this.productService.CreateProduct(validatedData);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(..._utils_responseGenerator__WEBPACK_IMPORTED_MODULE_1__.ResponseGenerator.generate(201, product, \"Product created successfully\"));\n        } catch (error) {\n            return this.handleError(error);\n        }\n    }\n    async GetProductById(id, withDiscounts, includeUnapproved = false) {\n        try {\n            if (!id) throw new Error(\"Product ID is required\");\n            console.log(\"withDiscounts : \", withDiscounts);\n            const product = await this.productService.GetProductById(id, withDiscounts, includeUnapproved);\n            if (!product) throw new Error(\"Product not found\");\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(..._utils_responseGenerator__WEBPACK_IMPORTED_MODULE_1__.ResponseGenerator.generate(200, product, \"Product retrieved successfully\"));\n        } catch (error) {\n            return this.handleError(error);\n        }\n    }\n    async UpdateProduct(request) {\n        try {\n            const { searchParams } = new URL(request.url);\n            const id = searchParams.get(\"id\");\n            console.log(\"id : \", id);\n            if (!id) throw new Error(\"Product ID is required\");\n            const body = await request.json();\n            const validatedData = _validations_ProductValidation__WEBPACK_IMPORTED_MODULE_3__.ProductValidation.UpdateProduct().parse(body);\n            const product = await this.productService.UpdateProduct(id, validatedData);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(..._utils_responseGenerator__WEBPACK_IMPORTED_MODULE_1__.ResponseGenerator.generate(200, product, \"Product updated successfully\"));\n        } catch (error) {\n            return this.handleError(error);\n        }\n    }\n    async DeleteProduct(request) {\n        try {\n            const { searchParams } = new URL(request.url);\n            const id = searchParams.get(\"id\");\n            if (!id) throw new Error(\"Product ID is required\");\n            await this.productService.DeleteProduct(id);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(..._utils_responseGenerator__WEBPACK_IMPORTED_MODULE_1__.ResponseGenerator.generate(200, null, \"Product deleted successfully\"));\n        } catch (error) {\n            return this.handleError(error);\n        }\n    }\n    async GetProductVariantById(request) {\n        try {\n            const body = await request.json();\n            const id = body.id;\n            if (!id) throw new Error(\"Product variant ID is required\");\n            const product = await this.productService.GetProductVariantById(id);\n            if (!product) throw new Error(\"Product variant not found\");\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(..._utils_responseGenerator__WEBPACK_IMPORTED_MODULE_1__.ResponseGenerator.generate(200, product, \"Product variant retrieved successfully\"));\n        } catch (error) {\n            return this.handleError(error);\n        }\n    }\n    async GetAllProducts(request) {\n        try {\n            const { searchParams } = new URL(request.url);\n            const categoryId = searchParams.get(\"categoryId\") || undefined;\n            const fromPrice = searchParams.get(\"fromPrice\") ? Number(searchParams.get(\"fromPrice\")) : undefined;\n            const toPrice = searchParams.get(\"toPrice\") ? Number(searchParams.get(\"toPrice\")) : undefined;\n            const search = searchParams.get(\"search\") || undefined;\n            const onlyDiscounted = searchParams.get(\"onlyDiscounted\") === \"true\";\n            const products = await this.productService.GetAllProducts({\n                categoryId,\n                fromPrice,\n                toPrice,\n                search,\n                onlyDiscounted\n            });\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(..._utils_responseGenerator__WEBPACK_IMPORTED_MODULE_1__.ResponseGenerator.generate(200, products, \"Products retrieved successfully\"));\n        } catch (error) {\n            return this.handleError(error);\n        }\n    }\n    async GetProductsBySeller(request) {\n        try {\n            const userData = request.headers.get(\"x-user\");\n            const user = userData ? JSON.parse(userData) : null;\n            const { searchParams } = new URL(request.url);\n            let sellerId = searchParams.get(\"sellerid\");\n            const search = searchParams.get(\"search\");\n            if (!sellerId && user?.id) {\n                const seller = await _lib_db__WEBPACK_IMPORTED_MODULE_4__[\"default\"].sellerProfile.findUnique({\n                    where: {\n                        userId: user.id\n                    }\n                });\n                sellerId = seller?.id || null;\n            }\n            if (!sellerId) throw new Error(\"Seller ID is required\");\n            const products = await this.productService.GetProductsBySeller(sellerId, search && search.trim() !== \"\" ? search : undefined);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(..._utils_responseGenerator__WEBPACK_IMPORTED_MODULE_1__.ResponseGenerator.generate(200, products, \"Seller products retrieved successfully\"));\n        } catch (error) {\n            return this.handleError(error);\n        }\n    }\n    async AddProductVariantImage(request) {\n        try {\n            const body = await request.json();\n            const validatedData = _validations_ProductValidation__WEBPACK_IMPORTED_MODULE_3__.ProductValidation.AddProductVariantImage().parse(body);\n            const image = await this.productService.AddProductVariantImage(validatedData);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(..._utils_responseGenerator__WEBPACK_IMPORTED_MODULE_1__.ResponseGenerator.generate(201, image, \"Product variant image added successfully\"));\n        } catch (error) {\n            return this.handleError(error);\n        }\n    }\n    async DeleteProductVariantImage(request) {\n        try {\n            const { searchParams } = new URL(request.url);\n            const id = searchParams.get(\"id\");\n            if (!id) throw new Error(\"Image ID is required\");\n            await this.productService.DeleteProductVariantImage(id);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(..._utils_responseGenerator__WEBPACK_IMPORTED_MODULE_1__.ResponseGenerator.generate(200, null, \"Product variant image deleted successfully\"));\n        } catch (error) {\n            return this.handleError(error);\n        }\n    }\n    async AddProductVariantDiscount(request) {\n        try {\n            const body = await request.json();\n            const validatedData = _validations_ProductValidation__WEBPACK_IMPORTED_MODULE_3__.ProductValidation.AddProductVariantDiscount().parse(body);\n            const discount = await this.productService.AddProductVariantDiscount(validatedData);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(..._utils_responseGenerator__WEBPACK_IMPORTED_MODULE_1__.ResponseGenerator.generate(201, discount, \"Product variant discount added successfully\"));\n        } catch (error) {\n            return this.handleError(error);\n        }\n    }\n    async UpdateProductVariantDiscount(request) {\n        try {\n            const body = await request.json();\n            const validatedData = _validations_ProductValidation__WEBPACK_IMPORTED_MODULE_3__.ProductValidation.UpdateProductVariantDiscount().parse(body);\n            const discount = await this.productService.UpdateProductVariantDiscount(validatedData);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(..._utils_responseGenerator__WEBPACK_IMPORTED_MODULE_1__.ResponseGenerator.generate(201, discount, \"Product variant discount updated successfully\"));\n        } catch (error) {\n            return this.handleError(error);\n        }\n    }\n    async DeleteProductVariantDiscount(request) {\n        try {\n            const body = await request.json();\n            const id = body.id;\n            if (!id) throw new Error(\"Discount ID is required\");\n            await this.productService.DeleteProductVariantDiscount(id);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(..._utils_responseGenerator__WEBPACK_IMPORTED_MODULE_1__.ResponseGenerator.generate(200, null, \"Product variant discount deleted successfully\"));\n        } catch (error) {\n            return this.handleError(error);\n        }\n    }\n    async AddProductVariant(request) {\n        try {\n            const body = await request.json();\n            // Validate the base variant data first\n            const validatedData = _validations_ProductValidation__WEBPACK_IMPORTED_MODULE_3__.ProductValidation.AddProductVariant().parse(body);\n            // Add ProductVariantImage and ProductDiscount to the validated data if they exist\n            const variantData = {\n                ...validatedData,\n                ProductVariantImage: body.ProductVariantImage,\n                ProductDiscount: body.ProductDiscount\n            };\n            const variant = await this.productService.AddProductVariant(variantData);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(..._utils_responseGenerator__WEBPACK_IMPORTED_MODULE_1__.ResponseGenerator.generate(201, variant, \"Product variant added successfully\"));\n        } catch (error) {\n            return this.handleError(error);\n        }\n    }\n    async UpdateProductVariant(request) {\n        try {\n            const body = await request.json();\n            const validatedData = _validations_ProductValidation__WEBPACK_IMPORTED_MODULE_3__.ProductValidation.UpdateProductVariant().parse(body);\n            const updatedVariant = await this.productService.UpdateProductVariant(validatedData);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(..._utils_responseGenerator__WEBPACK_IMPORTED_MODULE_1__.ResponseGenerator.generate(201, updatedVariant, \"Product variant Updated successfully\"));\n        } catch (error) {\n            return this.handleError(error);\n        }\n    }\n    async DeleteProductVariant(request) {\n        try {\n            const { searchParams } = new URL(request.url);\n            const id = searchParams.get(\"id\");\n            if (!id) throw new Error(\"Variant ID is required\");\n            await this.productService.DeleteProductVariant(id);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(..._utils_responseGenerator__WEBPACK_IMPORTED_MODULE_1__.ResponseGenerator.generate(200, null, \"Product variant deleted successfully\"));\n        } catch (error) {\n            return this.handleError(error);\n        }\n    }\n    async BulkUploadProducts(fileUrl, request) {\n        try {\n            // Get seller ID from headers\n            const userData = request.headers.get(\"x-user\");\n            const user = userData ? JSON.parse(userData) : null;\n            if (!user?.id) {\n                throw new Error(\"User not authenticated\");\n            }\n            // Get seller profile\n            const seller = await _lib_db__WEBPACK_IMPORTED_MODULE_4__[\"default\"].sellerProfile.findUnique({\n                where: {\n                    userId: user.id\n                }\n            });\n            if (!seller) {\n                throw new Error(\"Seller profile not found\");\n            }\n            // Download the Excel file\n            const response = await axios__WEBPACK_IMPORTED_MODULE_6__[\"default\"].get(fileUrl, {\n                responseType: 'arraybuffer'\n            });\n            const workbook = xlsx__WEBPACK_IMPORTED_MODULE_7__.read(response.data);\n            // Get all sheets\n            const productSheet = workbook.Sheets['Product'];\n            const variantSheet = workbook.Sheets['ProductVariant'];\n            const variantImageSheet = workbook.Sheets['ProductImage'];\n            const variantDiscountSheet = workbook.Sheets['ProductDiscount'];\n            if (!productSheet || !variantSheet) {\n                throw new Error('Required sheets (Product and ProductVariant) are missing');\n            }\n            // Convert sheets to array format and transform data\n            const rawProducts = xlsx__WEBPACK_IMPORTED_MODULE_7__.utils.sheet_to_json(productSheet);\n            console.log('Raw Excel product data:', rawProducts);\n            console.log('Available columns in Excel:', rawProducts.length > 0 ? Object.keys(rawProducts[0]) : 'No data');\n            // Check if subcategory column exists in any form\n            const hasSubcategoryColumn = rawProducts.length > 0 && Object.keys(rawProducts[0]).some((key)=>key.toLowerCase().includes('subcategory') || key.toLowerCase().includes('sub-category') || key.toLowerCase().includes('sub category'));\n            if (!hasSubcategoryColumn) {\n                console.log('  No subcategory column found in Excel. Available columns:', Object.keys(rawProducts[0] || {}));\n                console.log(' To use subcategories, add a column named \"subcategory\", \"Subcategory\", \"Sub Category\", or \"sub-category\"');\n            }\n            const products = rawProducts.map((product)=>{\n                // Try different possible column names for subcategory\n                const subcategoryValue = product.subcategory || product.Subcategory || product['Sub Category'] || product['sub-category'] || product['Sub-Category'] || undefined;\n                // Process related products - handle different possible column names\n                const relatedProductsValue = product.relatedProducts || product.related_products || product['Related Products'] || product['related-products'] || product['Related-Products'] || undefined;\n                // Process link name\n                const linkNameValue = product.linkName || product.link_name || product['Link Name'] || product['link-name'] || product['Link-Name'] || undefined;\n                // Convert related products to new structure\n                let relatedProductsArray = [];\n                if (relatedProductsValue) {\n                    if (typeof relatedProductsValue === 'string') {\n                        // Split by comma, newline, or semicolon and clean up\n                        const urls = relatedProductsValue.split(/[,;\\n]/).map((url)=>url.trim()).filter((url)=>url.length > 0);\n                        // Create objects with linkName and url\n                        relatedProductsArray = urls.map((url)=>({\n                                linkName: linkNameValue || `Related Product ${urls.indexOf(url) + 1}`,\n                                url: url\n                            }));\n                    } else if (Array.isArray(relatedProductsValue)) {\n                        relatedProductsArray = relatedProductsValue.filter((item)=>typeof item === 'string' && item.trim().length > 0).map((url, index)=>({\n                                linkName: linkNameValue || `Related Product ${index + 1}`,\n                                url: url.trim()\n                            }));\n                    }\n                }\n                console.log(`Product ${product.productSKU} subcategory mapping:`, {\n                    original: product.subcategory,\n                    Subcategory: product.Subcategory,\n                    'Sub Category': product['Sub Category'],\n                    'sub-category': product['sub-category'],\n                    'Sub-Category': product['Sub-Category'],\n                    final: subcategoryValue\n                });\n                console.log(`Product ${product.productSKU} related products mapping:`, {\n                    original: relatedProductsValue,\n                    processed: relatedProductsArray\n                });\n                return {\n                    ...product,\n                    subcategory: subcategoryValue,\n                    linkName: linkNameValue,\n                    relatedProducts: relatedProductsArray.length > 0 ? relatedProductsArray : undefined\n                };\n            });\n            console.log('Processed products with subcategory:', products);\n            const variants = xlsx__WEBPACK_IMPORTED_MODULE_7__.utils.sheet_to_json(variantSheet);\n            const variantImages = variantImageSheet ? xlsx__WEBPACK_IMPORTED_MODULE_7__.utils.sheet_to_json(variantImageSheet).map((img)=>({\n                    productVariantSKU: String(img.productVariantSKU),\n                    imageUrl: String(img.imageUrl),\n                    isPrimary: Boolean(img.isPrimary)\n                })) : [];\n            const variantDiscounts = variantDiscountSheet ? xlsx__WEBPACK_IMPORTED_MODULE_7__.utils.sheet_to_json(variantDiscountSheet).map((disc)=>({\n                    productVariantSKU: String(disc.productVariantSKU),\n                    discountType: String(disc.discountType),\n                    discountValue: Number(disc.discountValue),\n                    startDate: disc.startDate,\n                    endDate: disc.endDate\n                })) : [];\n            // Validate variants\n            const variantSKUs = new Set();\n            const productSKUs = new Set();\n            const errors = {};\n            // Validate products\n            products.forEach((product, index)=>{\n                if (!product.productSKU) {\n                    errors[`product_${index}`] = [\n                        \"Product SKU is required\"\n                    ];\n                } else if (productSKUs.has(product.productSKU)) {\n                    errors[`product_${index}`] = [\n                        \"Duplicate Product SKU\"\n                    ];\n                } else {\n                    productSKUs.add(product.productSKU);\n                }\n                if (!product.category) {\n                    errors[`product_${index}`] = [\n                        \"Category is required\"\n                    ];\n                }\n                if (!product.name) {\n                    errors[`product_${index}`] = [\n                        \"Product name is required\"\n                    ];\n                }\n                // Validate brand if provided\n                if (product.brand !== undefined && product.brand !== null && typeof product.brand !== 'string') {\n                    errors[`product_${index}`] = [\n                        \"Brand must be a string\"\n                    ];\n                }\n                // Validate subcategory if provided\n                if (product.subcategory !== undefined && product.subcategory !== null && typeof product.subcategory !== 'string') {\n                    errors[`product_${index}`] = [\n                        \"Subcategory must be a string\"\n                    ];\n                }\n                // Validate related products if provided\n                if (product.relatedProducts !== undefined && product.relatedProducts !== null) {\n                    if (Array.isArray(product.relatedProducts)) {\n                        // Validate each related product object in the array\n                        product.relatedProducts.forEach((item, itemIndex)=>{\n                            if (typeof item !== 'object' || !item.linkName || !item.url) {\n                                errors[`product_${index}`] = [\n                                    `Related product at index ${itemIndex} must have both linkName and url`\n                                ];\n                            } else {\n                                if (typeof item.linkName !== 'string' || !item.linkName.trim()) {\n                                    errors[`product_${index}`] = [\n                                        `Related product linkName at index ${itemIndex} must be a non-empty string`\n                                    ];\n                                }\n                                if (typeof item.url !== 'string' || !item.url.trim()) {\n                                    errors[`product_${index}`] = [\n                                        `Related product URL at index ${itemIndex} must be a non-empty string`\n                                    ];\n                                } else {\n                                    // Basic URL validation\n                                    try {\n                                        new URL(item.url.trim());\n                                    } catch  {\n                                        errors[`product_${index}`] = [\n                                            `Related product URL at index ${itemIndex} is not a valid URL`\n                                        ];\n                                    }\n                                }\n                            }\n                        });\n                    } else {\n                        errors[`product_${index}`] = [\n                            \"Related products must be an array of objects with linkName and url\"\n                        ];\n                    }\n                }\n            });\n            // Validate variants\n            variants.forEach((variant, index)=>{\n                if (!variant.productVariantSKU) {\n                    errors[`variant_${index}`] = [\n                        \"Variant SKU is required\"\n                    ];\n                } else if (variantSKUs.has(variant.productVariantSKU)) {\n                    errors[`variant_${index}`] = [\n                        \"Duplicate Variant SKU\"\n                    ];\n                } else {\n                    variantSKUs.add(variant.productVariantSKU);\n                }\n                if (!variant.productSKU) {\n                    errors[`variant_${index}`] = [\n                        \"Product SKU is required for variant\"\n                    ];\n                } else if (!productSKUs.has(variant.productSKU)) {\n                    errors[`variant_${index}`] = [\n                        \"Product SKU does not exist\"\n                    ];\n                }\n                if (!variant.title) {\n                    errors[`variant_${index}`] = [\n                        \"Variant title is required\"\n                    ];\n                }\n                if (!variant.price || isNaN(Number(variant.price)) || Number(variant.price) <= 0) {\n                    errors[`variant_${index}`] = [\n                        \"Valid price is required\"\n                    ];\n                }\n                if (!variant.stockQuantity || isNaN(Number(variant.stockQuantity)) || Number(variant.stockQuantity) < 0) {\n                    errors[`variant_${index}`] = [\n                        \"Valid stock quantity is required\"\n                    ];\n                }\n                if (!variant.variantType) {\n                    errors[`variant_${index}`] = [\n                        \"Variant type is required\"\n                    ];\n                }\n                if (!variant.variantValue) {\n                    errors[`variant_${index}`] = [\n                        \"Variant value is required\"\n                    ];\n                }\n                // Validate HSN code format if provided\n                if (variant.hsnCode && !/^\\d{6,8}$/.test(String(variant.hsnCode))) {\n                    errors[`variant_${index}`] = [\n                        \"HSN code must be 6-8 digits\"\n                    ];\n                }\n                // Validate product weight if provided\n                if (variant.productWeight !== undefined && variant.productWeight !== null) {\n                    const weight = Number(variant.productWeight);\n                    if (isNaN(weight) || weight <= 0) {\n                        errors[`variant_${index}`] = [\n                            \"Product weight must be a positive number\"\n                        ];\n                    }\n                }\n            });\n            // Validate variant images\n            variantImages.forEach((image, index)=>{\n                if (!image.productVariantSKU) {\n                    errors[`variant_image_${index}`] = [\n                        \"Variant SKU is required for image\"\n                    ];\n                } else if (!variantSKUs.has(image.productVariantSKU)) {\n                    errors[`variant_image_${index}`] = [\n                        \"Variant SKU does not exist\"\n                    ];\n                }\n                if (!image.imageUrl) {\n                    errors[`variant_image_${index}`] = [\n                        \"Image URL is required\"\n                    ];\n                }\n            });\n            // Validate variant discounts\n            variantDiscounts.forEach((discount, index)=>{\n                if (!discount.productVariantSKU) {\n                    errors[`variant_discount_${index}`] = [\n                        \"Variant SKU is required for discount\"\n                    ];\n                } else if (!variantSKUs.has(discount.productVariantSKU)) {\n                    errors[`variant_discount_${index}`] = [\n                        \"Variant SKU does not exist\"\n                    ];\n                }\n                if (!discount.discountType || ![\n                    'percentage',\n                    'amount'\n                ].includes(discount.discountType)) {\n                    errors[`variant_discount_${index}`] = [\n                        \"Valid discount type (percentage/amount) is required\"\n                    ];\n                }\n                if (!discount.discountValue || isNaN(Number(discount.discountValue)) || Number(discount.discountValue) <= 0) {\n                    errors[`variant_discount_${index}`] = [\n                        \"Valid discount value is required\"\n                    ];\n                }\n                if (!discount.startDate || !discount.endDate) {\n                    errors[`variant_discount_${index}`] = [\n                        \"Start date and end date are required\"\n                    ];\n                }\n                try {\n                    new Date(discount.startDate);\n                    new Date(discount.endDate);\n                } catch  {\n                    errors[`variant_discount_${index}`] = [\n                        \"Invalid date format\"\n                    ];\n                }\n            });\n            // If there are validation errors, throw them\n            if (Object.keys(errors).length > 0) {\n                throw {\n                    name: \"ValidationError\",\n                    message: \"Validation failed\",\n                    errors\n                };\n            }\n            // Process the data\n            const result = await this.productService.BulkUploadProducts({\n                products,\n                variants,\n                variantImages: variantImages,\n                variantDiscounts: variantDiscounts,\n                sellerId: seller.id\n            });\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(..._utils_responseGenerator__WEBPACK_IMPORTED_MODULE_1__.ResponseGenerator.generate(201, result, \"Products uploaded successfully\"));\n        } catch (error) {\n            return this.handleError(error);\n        }\n    }\n    async GetPaginatedProducts(req) {\n        try {\n            const { searchParams } = new URL(req.url);\n            // Get pagination parameters\n            const page = parseInt(searchParams.get(\"page\") || \"1\");\n            const limit = parseInt(searchParams.get(\"limit\") || \"10\");\n            const skip = (page - 1) * limit;\n            // Get other filter parameters\n            const categoryId = searchParams.get(\"categoryId\");\n            const search = searchParams.get(\"search\");\n            const fromPrice = searchParams.get(\"fromPrice\") ? parseFloat(searchParams.get(\"fromPrice\") || \"0\") : undefined;\n            const toPrice = searchParams.get(\"toPrice\") ? parseFloat(searchParams.get(\"toPrice\") || \"500000\") : undefined;\n            // Build filter conditions\n            const whereConditions = {};\n            if (categoryId) {\n                whereConditions.categoryId = categoryId;\n            }\n            if (search) {\n                whereConditions.OR = [\n                    {\n                        name: {\n                            contains: search,\n                            mode: 'insensitive'\n                        }\n                    },\n                    {\n                        description: {\n                            contains: search,\n                            mode: 'insensitive'\n                        }\n                    }\n                ];\n            }\n            if (fromPrice !== undefined || toPrice !== undefined) {\n                whereConditions.variants = {\n                    some: {\n                        price: {\n                            ...fromPrice !== undefined && {\n                                gte: fromPrice\n                            },\n                            ...toPrice !== undefined && {\n                                lte: toPrice\n                            }\n                        }\n                    }\n                };\n            }\n            // Get total count for pagination info\n            const totalCount = await prisma.product.count({\n                where: whereConditions\n            });\n            // Get paginated products\n            const products = await prisma.product.findMany({\n                where: whereConditions,\n                include: {\n                    images: true,\n                    variants: {\n                        include: {\n                            ProductVariantImage: true,\n                            discounts: true\n                        }\n                    },\n                    reviews: true,\n                    discounts: true\n                },\n                skip,\n                take: limit,\n                orderBy: {\n                    createdAt: 'desc'\n                }\n            });\n            return new Response(JSON.stringify({\n                status: \"success\",\n                data: products,\n                pagination: {\n                    total: totalCount,\n                    page,\n                    limit,\n                    totalPages: Math.ceil(totalCount / limit),\n                    hasMore: skip + limit < totalCount\n                }\n            }), {\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                }\n            });\n        } catch (error) {\n            console.error(\"Error fetching paginated products:\", error);\n            return new Response(JSON.stringify({\n                status: \"error\",\n                message: error.message || \"Failed to fetch products\"\n            }), {\n                status: 500,\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                }\n            });\n        }\n    }\n    handleError(error) {\n        console.error(error);\n        let errorMessage = \"An unknown error occurred\";\n        let validationError = {};\n        if (error instanceof zod__WEBPACK_IMPORTED_MODULE_8__.ZodError) {\n            errorMessage = \"Validation Error\";\n            validationError = (0,zod_validation_error__WEBPACK_IMPORTED_MODULE_9__.fromError)(error).details;\n        } else if (error instanceof Error) {\n            errorMessage = error.message;\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(..._utils_responseGenerator__WEBPACK_IMPORTED_MODULE_1__.ResponseGenerator.generate(500, null, errorMessage, validationError));\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbW9kdWxlcy9jb250cm9sbGVycy9Qcm9kdWN0Q29udHJvbGxlci50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBMkM7QUFFbUI7QUFDRjtBQUNTO0FBQzNDO0FBQ0Y7QUFFd0I7QUFDbkI7QUFDSDtBQUVvQjtBQUU5QyxNQUFNVSxTQUFTLElBQUlELHdEQUFZQTtBQUV4QixNQUFNRTtJQUdYQyxhQUFjO1FBQ1osSUFBSSxDQUFDQyxjQUFjLEdBQUcsSUFBSVgsb0VBQWNBO0lBQzFDO0lBRUEsTUFBTVksY0FBY0MsT0FBZ0IsRUFBRTtRQUNwQyxJQUFJO1lBQ0YsTUFBTUMsT0FBTyxNQUFNRCxRQUFRRSxJQUFJO1lBQy9CLE1BQU1DLGdCQUFnQmYsNkVBQWlCQSxDQUFDVyxhQUFhLEdBQUdLLEtBQUssQ0FBQ0g7WUFFOUQsTUFBTUksVUFBVSxNQUFNLElBQUksQ0FBQ1AsY0FBYyxDQUFDQyxhQUFhLENBQUNJO1lBRXhELE9BQU9sQixxREFBWUEsQ0FBQ2lCLElBQUksSUFDbkJoQix1RUFBaUJBLENBQUNvQixRQUFRLENBQUMsS0FBS0QsU0FBUztRQUVoRCxFQUFFLE9BQU9FLE9BQWdCO1lBQ3ZCLE9BQU8sSUFBSSxDQUFDQyxXQUFXLENBQUNEO1FBQzFCO0lBQ0Y7SUFFQSxNQUFNRSxlQUFlQyxFQUFVLEVBQUVDLGFBQXNCLEVBQUVDLG9CQUE2QixLQUFLLEVBQUU7UUFFM0YsSUFBSTtZQUNGLElBQUksQ0FBQ0YsSUFBSSxNQUFNLElBQUlHLE1BQU07WUFDekJDLFFBQVFDLEdBQUcsQ0FBQyxvQkFBbUJKO1lBRS9CLE1BQU1OLFVBQVUsTUFBTSxJQUFJLENBQUNQLGNBQWMsQ0FBQ1csY0FBYyxDQUFDQyxJQUFJQyxlQUFlQztZQUM1RSxJQUFJLENBQUNQLFNBQVMsTUFBTSxJQUFJUSxNQUFNO1lBRTlCLE9BQU81QixxREFBWUEsQ0FBQ2lCLElBQUksSUFDbkJoQix1RUFBaUJBLENBQUNvQixRQUFRLENBQUMsS0FBS0QsU0FBUztR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QUFJNUssaUJBQWlCTSxPQUFPO1lBQ2pDbUssZUFBZXpLLE1BQU1zSSxPQUFPO1FBRTlCO1FBRUEsT0FBTzVKLHFEQUFZQSxDQUFDaUIsSUFBSSxJQUNuQmhCLHVFQUFpQkEsQ0FBQ29CLFFBQVEsQ0FBQyxLQUFLLE1BQU0wSyxjQUFjQztJQUUzRDtBQUNGIiwic291cmNlcyI6WyIvaG9tZS93ZWJub3gvZ29rdWwgaW5kcmFuaWllL3dlYnNpdGUvc3JjL21vZHVsZXMvY29udHJvbGxlcnMvUHJvZHVjdENvbnRyb2xsZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvc2VydmVyXCI7XG5pbXBvcnQgeyBJUHJvZHVjdCwgSVByb2R1Y3RJbWFnZSwgSVByb2R1Y3RWYXJpYW50LCBJUHJvZHVjdERpc2NvdW50LCBJUHJvZHVjdFZhcmlhbnRJbWFnZSwgSVByb2R1Y3RWYXJpYW50RGlzY291bnQgfSBmcm9tIFwiLi4vbW9kZWxzL1Byb2R1Y3RcIjtcbmltcG9ydCB7IFJlc3BvbnNlR2VuZXJhdG9yIH0gZnJvbSBcIkAvdXRpbHMvcmVzcG9uc2VHZW5lcmF0b3JcIjtcbmltcG9ydCB7IFByb2R1Y3RTZXJ2aWNlIH0gZnJvbSBcIi4uL3NlcnZpY2VzL1Byb2R1Y3RTZXJ2aWNlXCI7XG5pbXBvcnQgeyBQcm9kdWN0VmFsaWRhdGlvbiB9IGZyb20gXCIuLi92YWxpZGF0aW9ucy9Qcm9kdWN0VmFsaWRhdGlvblwiO1xuaW1wb3J0IGRiIGZyb20gXCJAL2xpYi9kYlwiO1xuaW1wb3J0IHsgeiB9IGZyb20gXCJ6b2RcIjtcbmltcG9ydCBfIGZyb20gXCJsb2Rhc2hcIjtcbmltcG9ydCB7IGZyb21FcnJvciB9IGZyb20gXCJ6b2QtdmFsaWRhdGlvbi1lcnJvclwiXG5pbXBvcnQgKiBhcyBYTFNYIGZyb20gJ3hsc3gnO1xuaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJztcbmltcG9ydCB7IGxvZyB9IGZyb20gXCJjb25zb2xlXCI7XG5pbXBvcnQgeyBQcmlzbWFDbGllbnQgfSBmcm9tIFwiQHByaXNtYS9jbGllbnRcIjtcblxuY29uc3QgcHJpc21hID0gbmV3IFByaXNtYUNsaWVudCgpO1xuXG5leHBvcnQgY2xhc3MgUHJvZHVjdENvbnRyb2xsZXIge1xuICBwcml2YXRlIHByb2R1Y3RTZXJ2aWNlOiBQcm9kdWN0U2VydmljZTtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLnByb2R1Y3RTZXJ2aWNlID0gbmV3IFByb2R1Y3RTZXJ2aWNlKCk7XG4gIH1cblxuICBhc3luYyBDcmVhdGVQcm9kdWN0KHJlcXVlc3Q6IFJlcXVlc3QpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgYm9keSA9IGF3YWl0IHJlcXVlc3QuanNvbigpO1xuICAgICAgY29uc3QgdmFsaWRhdGVkRGF0YSA9IFByb2R1Y3RWYWxpZGF0aW9uLkNyZWF0ZVByb2R1Y3QoKS5wYXJzZShib2R5KTtcblxuICAgICAgY29uc3QgcHJvZHVjdCA9IGF3YWl0IHRoaXMucHJvZHVjdFNlcnZpY2UuQ3JlYXRlUHJvZHVjdCh2YWxpZGF0ZWREYXRhKTtcblxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICAuLi5SZXNwb25zZUdlbmVyYXRvci5nZW5lcmF0ZSgyMDEsIHByb2R1Y3QsIFwiUHJvZHVjdCBjcmVhdGVkIHN1Y2Nlc3NmdWxseVwiKVxuICAgICAgKTtcbiAgICB9IGNhdGNoIChlcnJvcjogdW5rbm93bikge1xuICAgICAgcmV0dXJuIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIEdldFByb2R1Y3RCeUlkKGlkOiBzdHJpbmcsIHdpdGhEaXNjb3VudHM6IGJvb2xlYW4sIGluY2x1ZGVVbmFwcHJvdmVkOiBib29sZWFuID0gZmFsc2UpIHtcblxuICAgIHRyeSB7XG4gICAgICBpZiAoIWlkKSB0aHJvdyBuZXcgRXJyb3IoXCJQcm9kdWN0IElEIGlzIHJlcXVpcmVkXCIpO1xuICAgICAgY29uc29sZS5sb2coXCJ3aXRoRGlzY291bnRzIDogXCIsd2l0aERpc2NvdW50cylcbiAgICAgIFxuICAgICAgY29uc3QgcHJvZHVjdCA9IGF3YWl0IHRoaXMucHJvZHVjdFNlcnZpY2UuR2V0UHJvZHVjdEJ5SWQoaWQsIHdpdGhEaXNjb3VudHMsIGluY2x1ZGVVbmFwcHJvdmVkKTtcbiAgICAgIGlmICghcHJvZHVjdCkgdGhyb3cgbmV3IEVycm9yKFwiUHJvZHVjdCBub3QgZm91bmRcIik7XG5cbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgLi4uUmVzcG9uc2VHZW5lcmF0b3IuZ2VuZXJhdGUoMjAwLCBwcm9kdWN0LCBcIlByb2R1Y3QgcmV0cmlldmVkIHN1Y2Nlc3NmdWxseVwiKVxuICAgICAgKTtcbiAgICB9IGNhdGNoIChlcnJvcjogdW5rbm93bikge1xuICAgICAgcmV0dXJuIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIFVwZGF0ZVByb2R1Y3QocmVxdWVzdDogUmVxdWVzdCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IHNlYXJjaFBhcmFtcyB9ID0gbmV3IFVSTChyZXF1ZXN0LnVybCk7XG4gICAgICBjb25zdCBpZCA9IHNlYXJjaFBhcmFtcy5nZXQoXCJpZFwiKTtcblxuICAgICAgY29uc29sZS5sb2coXCJpZCA6IFwiLGlkKVxuXG4gICAgICBpZiAoIWlkKSB0aHJvdyBuZXcgRXJyb3IoXCJQcm9kdWN0IElEIGlzIHJlcXVpcmVkXCIpO1xuXG4gICAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVxdWVzdC5qc29uKCk7XG4gICAgICBjb25zdCB2YWxpZGF0ZWREYXRhID0gUHJvZHVjdFZhbGlkYXRpb24uVXBkYXRlUHJvZHVjdCgpLnBhcnNlKGJvZHkpO1xuXG4gICAgICBjb25zdCBwcm9kdWN0ID0gYXdhaXQgdGhpcy5wcm9kdWN0U2VydmljZS5VcGRhdGVQcm9kdWN0KGlkLCB2YWxpZGF0ZWREYXRhKTtcblxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICAuLi5SZXNwb25zZUdlbmVyYXRvci5nZW5lcmF0ZSgyMDAsIHByb2R1Y3QsIFwiUHJvZHVjdCB1cGRhdGVkIHN1Y2Nlc3NmdWxseVwiKVxuICAgICAgKTtcbiAgICB9IGNhdGNoIChlcnJvcjogdW5rbm93bikge1xuICAgICAgcmV0dXJuIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIERlbGV0ZVByb2R1Y3QocmVxdWVzdDogUmVxdWVzdCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IHNlYXJjaFBhcmFtcyB9ID0gbmV3IFVSTChyZXF1ZXN0LnVybCk7XG4gICAgICBjb25zdCBpZCA9IHNlYXJjaFBhcmFtcy5nZXQoXCJpZFwiKTtcblxuICAgICAgaWYgKCFpZCkgdGhyb3cgbmV3IEVycm9yKFwiUHJvZHVjdCBJRCBpcyByZXF1aXJlZFwiKTtcblxuICAgICAgYXdhaXQgdGhpcy5wcm9kdWN0U2VydmljZS5EZWxldGVQcm9kdWN0KGlkKTtcblxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICAuLi5SZXNwb25zZUdlbmVyYXRvci5nZW5lcmF0ZSgyMDAsIG51bGwsIFwiUHJvZHVjdCBkZWxldGVkIHN1Y2Nlc3NmdWxseVwiKVxuICAgICAgKTtcbiAgICB9IGNhdGNoIChlcnJvcjogdW5rbm93bikge1xuICAgICAgcmV0dXJuIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIEdldFByb2R1Y3RWYXJpYW50QnlJZChyZXF1ZXN0OiBSZXF1ZXN0KSB7XG4gICAgdHJ5IHtcblxuICAgICAgY29uc3QgYm9keSA9IGF3YWl0IHJlcXVlc3QuanNvbigpXG4gICAgICBjb25zdCBpZCA9IGJvZHkuaWRcbiAgICAgIGlmICghaWQpIHRocm93IG5ldyBFcnJvcihcIlByb2R1Y3QgdmFyaWFudCBJRCBpcyByZXF1aXJlZFwiKTtcblxuICAgICAgY29uc3QgcHJvZHVjdCA9IGF3YWl0IHRoaXMucHJvZHVjdFNlcnZpY2UuR2V0UHJvZHVjdFZhcmlhbnRCeUlkKGlkKTtcbiAgICAgIGlmICghcHJvZHVjdCkgdGhyb3cgbmV3IEVycm9yKFwiUHJvZHVjdCB2YXJpYW50IG5vdCBmb3VuZFwiKTtcblxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICAuLi5SZXNwb25zZUdlbmVyYXRvci5nZW5lcmF0ZSgyMDAsIHByb2R1Y3QsIFwiUHJvZHVjdCB2YXJpYW50IHJldHJpZXZlZCBzdWNjZXNzZnVsbHlcIilcbiAgICAgICk7XG4gICAgfSBjYXRjaCAoZXJyb3I6IHVua25vd24pIHtcbiAgICAgIHJldHVybiB0aGlzLmhhbmRsZUVycm9yKGVycm9yKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBHZXRBbGxQcm9kdWN0cyhyZXF1ZXN0OiBSZXF1ZXN0KSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgc2VhcmNoUGFyYW1zIH0gPSBuZXcgVVJMKHJlcXVlc3QudXJsKTtcbiAgICAgIGNvbnN0IGNhdGVnb3J5SWQgPSBzZWFyY2hQYXJhbXMuZ2V0KFwiY2F0ZWdvcnlJZFwiKSB8fCB1bmRlZmluZWQ7XG4gICAgICBjb25zdCBmcm9tUHJpY2UgPSBzZWFyY2hQYXJhbXMuZ2V0KFwiZnJvbVByaWNlXCIpID8gTnVtYmVyKHNlYXJjaFBhcmFtcy5nZXQoXCJmcm9tUHJpY2VcIikpIDogdW5kZWZpbmVkO1xuICAgICAgY29uc3QgdG9QcmljZSA9IHNlYXJjaFBhcmFtcy5nZXQoXCJ0b1ByaWNlXCIpID8gTnVtYmVyKHNlYXJjaFBhcmFtcy5nZXQoXCJ0b1ByaWNlXCIpKSA6IHVuZGVmaW5lZDtcbiAgICAgIGNvbnN0IHNlYXJjaCA9IHNlYXJjaFBhcmFtcy5nZXQoXCJzZWFyY2hcIikgfHwgdW5kZWZpbmVkO1xuICAgICAgY29uc3Qgb25seURpc2NvdW50ZWQgPSBzZWFyY2hQYXJhbXMuZ2V0KFwib25seURpc2NvdW50ZWRcIikgPT09IFwidHJ1ZVwiO1xuXG4gICAgICBjb25zdCBwcm9kdWN0cyA9IGF3YWl0IHRoaXMucHJvZHVjdFNlcnZpY2UuR2V0QWxsUHJvZHVjdHMoeyBcbiAgICAgICAgY2F0ZWdvcnlJZCwgXG4gICAgICAgIGZyb21QcmljZSwgXG4gICAgICAgIHRvUHJpY2UsIFxuICAgICAgICBzZWFyY2gsXG4gICAgICAgIG9ubHlEaXNjb3VudGVkIFxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgLi4uUmVzcG9uc2VHZW5lcmF0b3IuZ2VuZXJhdGUoMjAwLCBwcm9kdWN0cywgXCJQcm9kdWN0cyByZXRyaWV2ZWQgc3VjY2Vzc2Z1bGx5XCIpXG4gICAgICApO1xuICAgIH0gY2F0Y2ggKGVycm9yOiB1bmtub3duKSB7XG4gICAgICByZXR1cm4gdGhpcy5oYW5kbGVFcnJvcihlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgR2V0UHJvZHVjdHNCeVNlbGxlcihyZXF1ZXN0OiBSZXF1ZXN0KSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHVzZXJEYXRhID0gcmVxdWVzdC5oZWFkZXJzLmdldChcIngtdXNlclwiKTtcbiAgICAgIGNvbnN0IHVzZXI6IHsgaWQ6IHN0cmluZyB8IG51bGwgfSA9IHVzZXJEYXRhID8gSlNPTi5wYXJzZSh1c2VyRGF0YSkgOiBudWxsO1xuXG4gICAgICBjb25zdCB7IHNlYXJjaFBhcmFtcyB9ID0gbmV3IFVSTChyZXF1ZXN0LnVybCk7XG4gICAgICBsZXQgc2VsbGVySWQ6IHN0cmluZyB8IG51bGwgPSBzZWFyY2hQYXJhbXMuZ2V0KFwic2VsbGVyaWRcIik7XG4gICAgICBjb25zdCBzZWFyY2g6IHN0cmluZyB8IG51bGwgPSBzZWFyY2hQYXJhbXMuZ2V0KFwic2VhcmNoXCIpO1xuXG4gICAgICBpZiAoIXNlbGxlcklkICYmIHVzZXI/LmlkKSB7XG4gICAgICAgIGNvbnN0IHNlbGxlciA9IGF3YWl0IGRiLnNlbGxlclByb2ZpbGUuZmluZFVuaXF1ZSh7IHdoZXJlOiB7IHVzZXJJZDogdXNlci5pZCB9IH0pO1xuICAgICAgICBzZWxsZXJJZCA9IHNlbGxlcj8uaWQgfHwgbnVsbDtcbiAgICAgIH1cblxuICAgICAgaWYgKCFzZWxsZXJJZCkgdGhyb3cgbmV3IEVycm9yKFwiU2VsbGVyIElEIGlzIHJlcXVpcmVkXCIpO1xuXG4gICAgICBjb25zdCBwcm9kdWN0cyA9IGF3YWl0IHRoaXMucHJvZHVjdFNlcnZpY2UuR2V0UHJvZHVjdHNCeVNlbGxlcihcbiAgICAgICAgc2VsbGVySWQsXG4gICAgICAgIHNlYXJjaCAmJiBzZWFyY2gudHJpbSgpICE9PSBcIlwiID8gc2VhcmNoIDogdW5kZWZpbmVkXG4gICAgICApO1xuXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIC4uLlJlc3BvbnNlR2VuZXJhdG9yLmdlbmVyYXRlKDIwMCwgcHJvZHVjdHMsIFwiU2VsbGVyIHByb2R1Y3RzIHJldHJpZXZlZCBzdWNjZXNzZnVsbHlcIilcbiAgICAgICk7XG4gICAgfSBjYXRjaCAoZXJyb3I6IHVua25vd24pIHtcbiAgICAgIHJldHVybiB0aGlzLmhhbmRsZUVycm9yKGVycm9yKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBBZGRQcm9kdWN0VmFyaWFudEltYWdlKHJlcXVlc3Q6IFJlcXVlc3QpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgYm9keSA9IGF3YWl0IHJlcXVlc3QuanNvbigpO1xuICAgICAgY29uc3QgdmFsaWRhdGVkRGF0YSA9IFByb2R1Y3RWYWxpZGF0aW9uLkFkZFByb2R1Y3RWYXJpYW50SW1hZ2UoKS5wYXJzZShib2R5KTtcblxuICAgICAgY29uc3QgaW1hZ2UgPSBhd2FpdCB0aGlzLnByb2R1Y3RTZXJ2aWNlLkFkZFByb2R1Y3RWYXJpYW50SW1hZ2UodmFsaWRhdGVkRGF0YSk7XG5cbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgLi4uUmVzcG9uc2VHZW5lcmF0b3IuZ2VuZXJhdGUoMjAxLCBpbWFnZSwgXCJQcm9kdWN0IHZhcmlhbnQgaW1hZ2UgYWRkZWQgc3VjY2Vzc2Z1bGx5XCIpXG4gICAgICApO1xuICAgIH0gY2F0Y2ggKGVycm9yOiB1bmtub3duKSB7XG4gICAgICByZXR1cm4gdGhpcy5oYW5kbGVFcnJvcihlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgRGVsZXRlUHJvZHVjdFZhcmlhbnRJbWFnZShyZXF1ZXN0OiBSZXF1ZXN0KSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgc2VhcmNoUGFyYW1zIH0gPSBuZXcgVVJMKHJlcXVlc3QudXJsKTtcbiAgICAgIGNvbnN0IGlkID0gc2VhcmNoUGFyYW1zLmdldChcImlkXCIpO1xuXG4gICAgICBpZiAoIWlkKSB0aHJvdyBuZXcgRXJyb3IoXCJJbWFnZSBJRCBpcyByZXF1aXJlZFwiKTtcblxuICAgICAgYXdhaXQgdGhpcy5wcm9kdWN0U2VydmljZS5EZWxldGVQcm9kdWN0VmFyaWFudEltYWdlKGlkKTtcblxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICAuLi5SZXNwb25zZUdlbmVyYXRvci5nZW5lcmF0ZSgyMDAsIG51bGwsIFwiUHJvZHVjdCB2YXJpYW50IGltYWdlIGRlbGV0ZWQgc3VjY2Vzc2Z1bGx5XCIpXG4gICAgICApO1xuICAgIH0gY2F0Y2ggKGVycm9yOiB1bmtub3duKSB7XG4gICAgICByZXR1cm4gdGhpcy5oYW5kbGVFcnJvcihlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgQWRkUHJvZHVjdFZhcmlhbnREaXNjb3VudChyZXF1ZXN0OiBSZXF1ZXN0KSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGJvZHkgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKTtcbiAgICAgIGNvbnN0IHZhbGlkYXRlZERhdGEgPSBQcm9kdWN0VmFsaWRhdGlvbi5BZGRQcm9kdWN0VmFyaWFudERpc2NvdW50KCkucGFyc2UoYm9keSk7XG5cbiAgICAgIGNvbnN0IGRpc2NvdW50ID0gYXdhaXQgdGhpcy5wcm9kdWN0U2VydmljZS5BZGRQcm9kdWN0VmFyaWFudERpc2NvdW50KHZhbGlkYXRlZERhdGEpO1xuXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIC4uLlJlc3BvbnNlR2VuZXJhdG9yLmdlbmVyYXRlKDIwMSwgZGlzY291bnQsIFwiUHJvZHVjdCB2YXJpYW50IGRpc2NvdW50IGFkZGVkIHN1Y2Nlc3NmdWxseVwiKVxuICAgICAgKTtcbiAgICB9IGNhdGNoIChlcnJvcjogdW5rbm93bikge1xuICAgICAgcmV0dXJuIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIFVwZGF0ZVByb2R1Y3RWYXJpYW50RGlzY291bnQocmVxdWVzdDogUmVxdWVzdCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVxdWVzdC5qc29uKCk7XG4gICAgICBjb25zdCB2YWxpZGF0ZWREYXRhID0gUHJvZHVjdFZhbGlkYXRpb24uVXBkYXRlUHJvZHVjdFZhcmlhbnREaXNjb3VudCgpLnBhcnNlKGJvZHkpO1xuXG4gICAgICBjb25zdCBkaXNjb3VudCA9IGF3YWl0IHRoaXMucHJvZHVjdFNlcnZpY2UuVXBkYXRlUHJvZHVjdFZhcmlhbnREaXNjb3VudCh2YWxpZGF0ZWREYXRhKTtcblxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICAuLi5SZXNwb25zZUdlbmVyYXRvci5nZW5lcmF0ZSgyMDEsIGRpc2NvdW50LCBcIlByb2R1Y3QgdmFyaWFudCBkaXNjb3VudCB1cGRhdGVkIHN1Y2Nlc3NmdWxseVwiKVxuICAgICAgKTtcbiAgICB9IGNhdGNoIChlcnJvcjogdW5rbm93bikge1xuICAgICAgcmV0dXJuIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIERlbGV0ZVByb2R1Y3RWYXJpYW50RGlzY291bnQocmVxdWVzdDogUmVxdWVzdCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVxdWVzdC5qc29uKCk7XG4gICAgICBjb25zdCBpZCA9IGJvZHkuaWQ7XG4gICAgICBpZiAoIWlkKSB0aHJvdyBuZXcgRXJyb3IoXCJEaXNjb3VudCBJRCBpcyByZXF1aXJlZFwiKTtcblxuICAgICAgYXdhaXQgdGhpcy5wcm9kdWN0U2VydmljZS5EZWxldGVQcm9kdWN0VmFyaWFudERpc2NvdW50KGlkKTtcblxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICAuLi5SZXNwb25zZUdlbmVyYXRvci5nZW5lcmF0ZSgyMDAsIG51bGwsIFwiUHJvZHVjdCB2YXJpYW50IGRpc2NvdW50IGRlbGV0ZWQgc3VjY2Vzc2Z1bGx5XCIpXG4gICAgICApO1xuICAgIH0gY2F0Y2ggKGVycm9yOiB1bmtub3duKSB7XG4gICAgICByZXR1cm4gdGhpcy5oYW5kbGVFcnJvcihlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgQWRkUHJvZHVjdFZhcmlhbnQocmVxdWVzdDogUmVxdWVzdCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVxdWVzdC5qc29uKCk7XG4gICAgICBcbiAgICAgIC8vIFZhbGlkYXRlIHRoZSBiYXNlIHZhcmlhbnQgZGF0YSBmaXJzdFxuICAgICAgY29uc3QgdmFsaWRhdGVkRGF0YSA9IFByb2R1Y3RWYWxpZGF0aW9uLkFkZFByb2R1Y3RWYXJpYW50KCkucGFyc2UoYm9keSk7XG5cbiAgICAgIC8vIEFkZCBQcm9kdWN0VmFyaWFudEltYWdlIGFuZCBQcm9kdWN0RGlzY291bnQgdG8gdGhlIHZhbGlkYXRlZCBkYXRhIGlmIHRoZXkgZXhpc3RcbiAgICAgIGNvbnN0IHZhcmlhbnREYXRhOiBJUHJvZHVjdFZhcmlhbnQgPSB7XG4gICAgICAgIC4uLnZhbGlkYXRlZERhdGEsXG4gICAgICAgIFByb2R1Y3RWYXJpYW50SW1hZ2U6IGJvZHkuUHJvZHVjdFZhcmlhbnRJbWFnZSxcbiAgICAgICAgUHJvZHVjdERpc2NvdW50OiBib2R5LlByb2R1Y3REaXNjb3VudFxuICAgICAgfTtcblxuICAgICAgY29uc3QgdmFyaWFudCA9IGF3YWl0IHRoaXMucHJvZHVjdFNlcnZpY2UuQWRkUHJvZHVjdFZhcmlhbnQodmFyaWFudERhdGEpO1xuXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIC4uLlJlc3BvbnNlR2VuZXJhdG9yLmdlbmVyYXRlKDIwMSwgdmFyaWFudCwgXCJQcm9kdWN0IHZhcmlhbnQgYWRkZWQgc3VjY2Vzc2Z1bGx5XCIpXG4gICAgICApO1xuICAgIH0gY2F0Y2ggKGVycm9yOiB1bmtub3duKSB7XG4gICAgICByZXR1cm4gdGhpcy5oYW5kbGVFcnJvcihlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgVXBkYXRlUHJvZHVjdFZhcmlhbnQocmVxdWVzdDogUmVxdWVzdCkge1xuICAgIHRyeSB7XG5cbiAgICAgIGNvbnN0IGJvZHkgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKVxuXG4gICAgICBjb25zdCB2YWxpZGF0ZWREYXRhID0gUHJvZHVjdFZhbGlkYXRpb24uVXBkYXRlUHJvZHVjdFZhcmlhbnQoKS5wYXJzZShib2R5KVxuICAgICAgY29uc3QgdXBkYXRlZFZhcmlhbnQgPSBhd2FpdCB0aGlzLnByb2R1Y3RTZXJ2aWNlLlVwZGF0ZVByb2R1Y3RWYXJpYW50KHZhbGlkYXRlZERhdGEpXG5cbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgLi4uUmVzcG9uc2VHZW5lcmF0b3IuZ2VuZXJhdGUoMjAxLCB1cGRhdGVkVmFyaWFudCwgXCJQcm9kdWN0IHZhcmlhbnQgVXBkYXRlZCBzdWNjZXNzZnVsbHlcIilcbiAgICAgICk7XG5cblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXR1cm4gdGhpcy5oYW5kbGVFcnJvcihlcnJvcilcbiAgICB9XG4gIH1cblxuICBhc3luYyBEZWxldGVQcm9kdWN0VmFyaWFudChyZXF1ZXN0OiBSZXF1ZXN0KSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgc2VhcmNoUGFyYW1zIH0gPSBuZXcgVVJMKHJlcXVlc3QudXJsKTtcbiAgICAgIGNvbnN0IGlkID0gc2VhcmNoUGFyYW1zLmdldChcImlkXCIpO1xuXG4gICAgICBpZiAoIWlkKSB0aHJvdyBuZXcgRXJyb3IoXCJWYXJpYW50IElEIGlzIHJlcXVpcmVkXCIpO1xuXG4gICAgICBhd2FpdCB0aGlzLnByb2R1Y3RTZXJ2aWNlLkRlbGV0ZVByb2R1Y3RWYXJpYW50KGlkKTtcblxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICAuLi5SZXNwb25zZUdlbmVyYXRvci5nZW5lcmF0ZSgyMDAsIG51bGwsIFwiUHJvZHVjdCB2YXJpYW50IGRlbGV0ZWQgc3VjY2Vzc2Z1bGx5XCIpXG4gICAgICApO1xuICAgIH0gY2F0Y2ggKGVycm9yOiB1bmtub3duKSB7XG4gICAgICByZXR1cm4gdGhpcy5oYW5kbGVFcnJvcihlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgQnVsa1VwbG9hZFByb2R1Y3RzKGZpbGVVcmw6IHN0cmluZywgcmVxdWVzdDogUmVxdWVzdCkge1xuICAgIHRyeSB7XG4gICAgICAvLyBHZXQgc2VsbGVyIElEIGZyb20gaGVhZGVyc1xuICAgICAgY29uc3QgdXNlckRhdGEgPSByZXF1ZXN0LmhlYWRlcnMuZ2V0KFwieC11c2VyXCIpO1xuICAgICAgY29uc3QgdXNlcjogeyBpZDogc3RyaW5nIHwgbnVsbCB9ID0gdXNlckRhdGEgPyBKU09OLnBhcnNlKHVzZXJEYXRhKSA6IG51bGw7XG5cbiAgICAgIGlmICghdXNlcj8uaWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVXNlciBub3QgYXV0aGVudGljYXRlZFwiKTtcbiAgICAgIH1cblxuICAgICAgLy8gR2V0IHNlbGxlciBwcm9maWxlXG4gICAgICBjb25zdCBzZWxsZXIgPSBhd2FpdCBkYi5zZWxsZXJQcm9maWxlLmZpbmRVbmlxdWUoe1xuICAgICAgICB3aGVyZTogeyB1c2VySWQ6IHVzZXIuaWQgfVxuICAgICAgfSk7XG5cbiAgICAgIGlmICghc2VsbGVyKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlNlbGxlciBwcm9maWxlIG5vdCBmb3VuZFwiKTtcbiAgICAgIH1cblxuICAgICAgLy8gRG93bmxvYWQgdGhlIEV4Y2VsIGZpbGVcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MuZ2V0KGZpbGVVcmwsIHsgcmVzcG9uc2VUeXBlOiAnYXJyYXlidWZmZXInIH0pO1xuICAgICAgY29uc3Qgd29ya2Jvb2sgPSBYTFNYLnJlYWQocmVzcG9uc2UuZGF0YSk7XG5cbiAgICAgIC8vIEdldCBhbGwgc2hlZXRzXG4gICAgICBjb25zdCBwcm9kdWN0U2hlZXQgPSB3b3JrYm9vay5TaGVldHNbJ1Byb2R1Y3QnXTtcbiAgICAgIGNvbnN0IHZhcmlhbnRTaGVldCA9IHdvcmtib29rLlNoZWV0c1snUHJvZHVjdFZhcmlhbnQnXTtcbiAgICAgIGNvbnN0IHZhcmlhbnRJbWFnZVNoZWV0ID0gd29ya2Jvb2suU2hlZXRzWydQcm9kdWN0SW1hZ2UnXTtcbiAgICAgIGNvbnN0IHZhcmlhbnREaXNjb3VudFNoZWV0ID0gd29ya2Jvb2suU2hlZXRzWydQcm9kdWN0RGlzY291bnQnXTtcblxuICAgICAgaWYgKCFwcm9kdWN0U2hlZXQgfHwgIXZhcmlhbnRTaGVldCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHNoZWV0cyAoUHJvZHVjdCBhbmQgUHJvZHVjdFZhcmlhbnQpIGFyZSBtaXNzaW5nJyk7XG4gICAgICB9XG5cbiAgICAgIC8vIENvbnZlcnQgc2hlZXRzIHRvIGFycmF5IGZvcm1hdCBhbmQgdHJhbnNmb3JtIGRhdGFcbiAgICAgIGNvbnN0IHJhd1Byb2R1Y3RzID0gWExTWC51dGlscy5zaGVldF90b19qc29uKHByb2R1Y3RTaGVldCk7XG4gICAgICBjb25zb2xlLmxvZygnUmF3IEV4Y2VsIHByb2R1Y3QgZGF0YTonLCByYXdQcm9kdWN0cyk7XG4gICAgICBjb25zb2xlLmxvZygnQXZhaWxhYmxlIGNvbHVtbnMgaW4gRXhjZWw6JywgcmF3UHJvZHVjdHMubGVuZ3RoID4gMCA/IE9iamVjdC5rZXlzKHJhd1Byb2R1Y3RzWzBdIGFzIG9iamVjdCkgOiAnTm8gZGF0YScpO1xuICAgICAgXG4gICAgICAvLyBDaGVjayBpZiBzdWJjYXRlZ29yeSBjb2x1bW4gZXhpc3RzIGluIGFueSBmb3JtXG4gICAgICBjb25zdCBoYXNTdWJjYXRlZ29yeUNvbHVtbiA9IHJhd1Byb2R1Y3RzLmxlbmd0aCA+IDAgJiYgT2JqZWN0LmtleXMocmF3UHJvZHVjdHNbMF0gYXMgb2JqZWN0KS5zb21lKGtleSA9PiBcbiAgICAgICAga2V5LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ3N1YmNhdGVnb3J5JykgfHwgXG4gICAgICAgIGtleS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdzdWItY2F0ZWdvcnknKSB8fFxuICAgICAgICBrZXkudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnc3ViIGNhdGVnb3J5JylcbiAgICAgICk7XG4gICAgICBcbiAgICAgIGlmICghaGFzU3ViY2F0ZWdvcnlDb2x1bW4pIHtcbiAgICAgICAgY29uc29sZS5sb2coJ+KaoO+4jyAgTm8gc3ViY2F0ZWdvcnkgY29sdW1uIGZvdW5kIGluIEV4Y2VsLiBBdmFpbGFibGUgY29sdW1uczonLCBPYmplY3Qua2V5cyhyYXdQcm9kdWN0c1swXSBhcyBvYmplY3QgfHwge30pKTtcbiAgICAgICAgY29uc29sZS5sb2coJ/CfkqEgVG8gdXNlIHN1YmNhdGVnb3JpZXMsIGFkZCBhIGNvbHVtbiBuYW1lZCBcInN1YmNhdGVnb3J5XCIsIFwiU3ViY2F0ZWdvcnlcIiwgXCJTdWIgQ2F0ZWdvcnlcIiwgb3IgXCJzdWItY2F0ZWdvcnlcIicpO1xuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zdCBwcm9kdWN0cyA9IHJhd1Byb2R1Y3RzLm1hcCgocHJvZHVjdDogYW55KSA9PiB7XG4gICAgICAgIC8vIFRyeSBkaWZmZXJlbnQgcG9zc2libGUgY29sdW1uIG5hbWVzIGZvciBzdWJjYXRlZ29yeVxuICAgICAgICBjb25zdCBzdWJjYXRlZ29yeVZhbHVlID0gcHJvZHVjdC5zdWJjYXRlZ29yeSB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZHVjdC5TdWJjYXRlZ29yeSB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZHVjdFsnU3ViIENhdGVnb3J5J10gfHwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2R1Y3RbJ3N1Yi1jYXRlZ29yeSddIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2R1Y3RbJ1N1Yi1DYXRlZ29yeSddIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuZGVmaW5lZDtcbiAgICAgICAgXG4gICAgICAgIC8vIFByb2Nlc3MgcmVsYXRlZCBwcm9kdWN0cyAtIGhhbmRsZSBkaWZmZXJlbnQgcG9zc2libGUgY29sdW1uIG5hbWVzXG4gICAgICAgIGNvbnN0IHJlbGF0ZWRQcm9kdWN0c1ZhbHVlID0gcHJvZHVjdC5yZWxhdGVkUHJvZHVjdHMgfHwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2R1Y3QucmVsYXRlZF9wcm9kdWN0cyB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZHVjdFsnUmVsYXRlZCBQcm9kdWN0cyddIHx8IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9kdWN0WydyZWxhdGVkLXByb2R1Y3RzJ10gfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZHVjdFsnUmVsYXRlZC1Qcm9kdWN0cyddIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuZGVmaW5lZDtcbiAgICAgICAgXG4gICAgICAgIC8vIFByb2Nlc3MgbGluayBuYW1lXG4gICAgICAgIGNvbnN0IGxpbmtOYW1lVmFsdWUgPSBwcm9kdWN0LmxpbmtOYW1lIHx8IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9kdWN0LmxpbmtfbmFtZSB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZHVjdFsnTGluayBOYW1lJ10gfHwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2R1Y3RbJ2xpbmstbmFtZSddIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2R1Y3RbJ0xpbmstTmFtZSddIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuZGVmaW5lZDtcbiAgICAgICAgXG4gICAgICAgIC8vIENvbnZlcnQgcmVsYXRlZCBwcm9kdWN0cyB0byBuZXcgc3RydWN0dXJlXG4gICAgICAgIGxldCByZWxhdGVkUHJvZHVjdHNBcnJheTogQXJyYXk8e2xpbmtOYW1lOiBzdHJpbmc7IHVybDogc3RyaW5nfT4gPSBbXTtcbiAgICAgICAgaWYgKHJlbGF0ZWRQcm9kdWN0c1ZhbHVlKSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiByZWxhdGVkUHJvZHVjdHNWYWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIC8vIFNwbGl0IGJ5IGNvbW1hLCBuZXdsaW5lLCBvciBzZW1pY29sb24gYW5kIGNsZWFuIHVwXG4gICAgICAgICAgICBjb25zdCB1cmxzID0gcmVsYXRlZFByb2R1Y3RzVmFsdWVcbiAgICAgICAgICAgICAgLnNwbGl0KC9bLDtcXG5dLylcbiAgICAgICAgICAgICAgLm1hcCh1cmwgPT4gdXJsLnRyaW0oKSlcbiAgICAgICAgICAgICAgLmZpbHRlcih1cmwgPT4gdXJsLmxlbmd0aCA+IDApO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBDcmVhdGUgb2JqZWN0cyB3aXRoIGxpbmtOYW1lIGFuZCB1cmxcbiAgICAgICAgICAgIHJlbGF0ZWRQcm9kdWN0c0FycmF5ID0gdXJscy5tYXAodXJsID0+ICh7XG4gICAgICAgICAgICAgIGxpbmtOYW1lOiBsaW5rTmFtZVZhbHVlIHx8IGBSZWxhdGVkIFByb2R1Y3QgJHt1cmxzLmluZGV4T2YodXJsKSArIDF9YCxcbiAgICAgICAgICAgICAgdXJsOiB1cmxcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkocmVsYXRlZFByb2R1Y3RzVmFsdWUpKSB7XG4gICAgICAgICAgICByZWxhdGVkUHJvZHVjdHNBcnJheSA9IHJlbGF0ZWRQcm9kdWN0c1ZhbHVlXG4gICAgICAgICAgICAgIC5maWx0ZXIoaXRlbSA9PiB0eXBlb2YgaXRlbSA9PT0gJ3N0cmluZycgJiYgaXRlbS50cmltKCkubGVuZ3RoID4gMClcbiAgICAgICAgICAgICAgLm1hcCgodXJsLCBpbmRleCkgPT4gKHtcbiAgICAgICAgICAgICAgICBsaW5rTmFtZTogbGlua05hbWVWYWx1ZSB8fCBgUmVsYXRlZCBQcm9kdWN0ICR7aW5kZXggKyAxfWAsXG4gICAgICAgICAgICAgICAgdXJsOiB1cmwudHJpbSgpXG4gICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGNvbnNvbGUubG9nKGBQcm9kdWN0ICR7cHJvZHVjdC5wcm9kdWN0U0tVfSBzdWJjYXRlZ29yeSBtYXBwaW5nOmAsIHtcbiAgICAgICAgICBvcmlnaW5hbDogcHJvZHVjdC5zdWJjYXRlZ29yeSxcbiAgICAgICAgICBTdWJjYXRlZ29yeTogcHJvZHVjdC5TdWJjYXRlZ29yeSxcbiAgICAgICAgICAnU3ViIENhdGVnb3J5JzogcHJvZHVjdFsnU3ViIENhdGVnb3J5J10sXG4gICAgICAgICAgJ3N1Yi1jYXRlZ29yeSc6IHByb2R1Y3RbJ3N1Yi1jYXRlZ29yeSddLFxuICAgICAgICAgICdTdWItQ2F0ZWdvcnknOiBwcm9kdWN0WydTdWItQ2F0ZWdvcnknXSxcbiAgICAgICAgICBmaW5hbDogc3ViY2F0ZWdvcnlWYWx1ZVxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIGNvbnNvbGUubG9nKGBQcm9kdWN0ICR7cHJvZHVjdC5wcm9kdWN0U0tVfSByZWxhdGVkIHByb2R1Y3RzIG1hcHBpbmc6YCwge1xuICAgICAgICAgIG9yaWdpbmFsOiByZWxhdGVkUHJvZHVjdHNWYWx1ZSxcbiAgICAgICAgICBwcm9jZXNzZWQ6IHJlbGF0ZWRQcm9kdWN0c0FycmF5XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAuLi5wcm9kdWN0LFxuICAgICAgICAgIHN1YmNhdGVnb3J5OiBzdWJjYXRlZ29yeVZhbHVlLFxuICAgICAgICAgIGxpbmtOYW1lOiBsaW5rTmFtZVZhbHVlLFxuICAgICAgICAgIHJlbGF0ZWRQcm9kdWN0czogcmVsYXRlZFByb2R1Y3RzQXJyYXkubGVuZ3RoID4gMCA/IHJlbGF0ZWRQcm9kdWN0c0FycmF5IDogdW5kZWZpbmVkXG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coJ1Byb2Nlc3NlZCBwcm9kdWN0cyB3aXRoIHN1YmNhdGVnb3J5OicsIHByb2R1Y3RzKTtcbiAgICAgIGNvbnN0IHZhcmlhbnRzID0gWExTWC51dGlscy5zaGVldF90b19qc29uKHZhcmlhbnRTaGVldCk7XG4gICAgICBcbiAgICAgIGludGVyZmFjZSBFeGNlbFZhcmlhbnRJbWFnZSB7XG4gICAgICAgIHByb2R1Y3RWYXJpYW50U0tVOiBzdHJpbmc7XG4gICAgICAgIGltYWdlVXJsOiBzdHJpbmc7XG4gICAgICAgIGlzUHJpbWFyeT86IGJvb2xlYW47XG4gICAgICB9XG5cbiAgICAgIGludGVyZmFjZSBFeGNlbFZhcmlhbnREaXNjb3VudCB7XG4gICAgICAgIHByb2R1Y3RWYXJpYW50U0tVOiBzdHJpbmc7XG4gICAgICAgIGRpc2NvdW50VHlwZTogc3RyaW5nO1xuICAgICAgICBkaXNjb3VudFZhbHVlOiBudW1iZXI7XG4gICAgICAgIHN0YXJ0RGF0ZTogc3RyaW5nO1xuICAgICAgICBlbmREYXRlOiBzdHJpbmc7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHZhcmlhbnRJbWFnZXM6IEV4Y2VsVmFyaWFudEltYWdlW10gPSB2YXJpYW50SW1hZ2VTaGVldCA/IFxuICAgICAgICBYTFNYLnV0aWxzLnNoZWV0X3RvX2pzb24odmFyaWFudEltYWdlU2hlZXQpLm1hcCgoaW1nOiBhbnkpID0+ICh7XG4gICAgICAgICAgcHJvZHVjdFZhcmlhbnRTS1U6IFN0cmluZyhpbWcucHJvZHVjdFZhcmlhbnRTS1UpLFxuICAgICAgICAgIGltYWdlVXJsOiBTdHJpbmcoaW1nLmltYWdlVXJsKSxcbiAgICAgICAgICBpc1ByaW1hcnk6IEJvb2xlYW4oaW1nLmlzUHJpbWFyeSlcbiAgICAgICAgfSkpIDogW107XG5cbiAgICAgIGNvbnN0IHZhcmlhbnREaXNjb3VudHM6IEV4Y2VsVmFyaWFudERpc2NvdW50W10gPSB2YXJpYW50RGlzY291bnRTaGVldCA/IFxuICAgICAgICBYTFNYLnV0aWxzLnNoZWV0X3RvX2pzb24odmFyaWFudERpc2NvdW50U2hlZXQpLm1hcCgoZGlzYzogYW55KSA9PiAoe1xuICAgICAgICAgIHByb2R1Y3RWYXJpYW50U0tVOiBTdHJpbmcoZGlzYy5wcm9kdWN0VmFyaWFudFNLVSksXG4gICAgICAgICAgZGlzY291bnRUeXBlOiBTdHJpbmcoZGlzYy5kaXNjb3VudFR5cGUpIGFzICdwZXJjZW50YWdlJyB8ICdhbW91bnQnLFxuICAgICAgICAgIGRpc2NvdW50VmFsdWU6IE51bWJlcihkaXNjLmRpc2NvdW50VmFsdWUpLFxuICAgICAgICAgIHN0YXJ0RGF0ZTogZGlzYy5zdGFydERhdGUsXG4gICAgICAgICAgZW5kRGF0ZTogZGlzYy5lbmREYXRlXG4gICAgICAgIH0pKSA6IFtdO1xuXG4gICAgICAvLyBWYWxpZGF0ZSB2YXJpYW50c1xuICAgICAgY29uc3QgdmFyaWFudFNLVXMgPSBuZXcgU2V0PHN0cmluZz4oKTtcbiAgICAgIGNvbnN0IHByb2R1Y3RTS1VzID0gbmV3IFNldDxzdHJpbmc+KCk7XG4gICAgICBjb25zdCBlcnJvcnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZ1tdPiA9IHt9O1xuXG4gICAgICAvLyBWYWxpZGF0ZSBwcm9kdWN0c1xuICAgICAgcHJvZHVjdHMuZm9yRWFjaCgocHJvZHVjdDogYW55LCBpbmRleDogbnVtYmVyKSA9PiB7XG4gICAgICAgIGlmICghcHJvZHVjdC5wcm9kdWN0U0tVKSB7XG4gICAgICAgICAgZXJyb3JzW2Bwcm9kdWN0XyR7aW5kZXh9YF0gPSBbXCJQcm9kdWN0IFNLVSBpcyByZXF1aXJlZFwiXTtcbiAgICAgICAgfSBlbHNlIGlmIChwcm9kdWN0U0tVcy5oYXMocHJvZHVjdC5wcm9kdWN0U0tVKSkge1xuICAgICAgICAgIGVycm9yc1tgcHJvZHVjdF8ke2luZGV4fWBdID0gW1wiRHVwbGljYXRlIFByb2R1Y3QgU0tVXCJdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHByb2R1Y3RTS1VzLmFkZChwcm9kdWN0LnByb2R1Y3RTS1UpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFwcm9kdWN0LmNhdGVnb3J5KSB7XG4gICAgICAgICAgZXJyb3JzW2Bwcm9kdWN0XyR7aW5kZXh9YF0gPSBbXCJDYXRlZ29yeSBpcyByZXF1aXJlZFwiXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghcHJvZHVjdC5uYW1lKSB7XG4gICAgICAgICAgZXJyb3JzW2Bwcm9kdWN0XyR7aW5kZXh9YF0gPSBbXCJQcm9kdWN0IG5hbWUgaXMgcmVxdWlyZWRcIl07XG4gICAgICAgIH1cblxuICAgICAgICAvLyBWYWxpZGF0ZSBicmFuZCBpZiBwcm92aWRlZFxuICAgICAgICBpZiAocHJvZHVjdC5icmFuZCAhPT0gdW5kZWZpbmVkICYmIHByb2R1Y3QuYnJhbmQgIT09IG51bGwgJiYgdHlwZW9mIHByb2R1Y3QuYnJhbmQgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgZXJyb3JzW2Bwcm9kdWN0XyR7aW5kZXh9YF0gPSBbXCJCcmFuZCBtdXN0IGJlIGEgc3RyaW5nXCJdO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gVmFsaWRhdGUgc3ViY2F0ZWdvcnkgaWYgcHJvdmlkZWRcbiAgICAgICAgaWYgKHByb2R1Y3Quc3ViY2F0ZWdvcnkgIT09IHVuZGVmaW5lZCAmJiBwcm9kdWN0LnN1YmNhdGVnb3J5ICE9PSBudWxsICYmIHR5cGVvZiBwcm9kdWN0LnN1YmNhdGVnb3J5ICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgIGVycm9yc1tgcHJvZHVjdF8ke2luZGV4fWBdID0gW1wiU3ViY2F0ZWdvcnkgbXVzdCBiZSBhIHN0cmluZ1wiXTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFZhbGlkYXRlIHJlbGF0ZWQgcHJvZHVjdHMgaWYgcHJvdmlkZWRcbiAgICAgICAgaWYgKHByb2R1Y3QucmVsYXRlZFByb2R1Y3RzICE9PSB1bmRlZmluZWQgJiYgcHJvZHVjdC5yZWxhdGVkUHJvZHVjdHMgIT09IG51bGwpIHtcbiAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShwcm9kdWN0LnJlbGF0ZWRQcm9kdWN0cykpIHtcbiAgICAgICAgICAgIC8vIFZhbGlkYXRlIGVhY2ggcmVsYXRlZCBwcm9kdWN0IG9iamVjdCBpbiB0aGUgYXJyYXlcbiAgICAgICAgICAgIHByb2R1Y3QucmVsYXRlZFByb2R1Y3RzLmZvckVhY2goKGl0ZW06IGFueSwgaXRlbUluZGV4OiBudW1iZXIpID0+IHtcbiAgICAgICAgICAgICAgaWYgKHR5cGVvZiBpdGVtICE9PSAnb2JqZWN0JyB8fCAhaXRlbS5saW5rTmFtZSB8fCAhaXRlbS51cmwpIHtcbiAgICAgICAgICAgICAgICBlcnJvcnNbYHByb2R1Y3RfJHtpbmRleH1gXSA9IFtgUmVsYXRlZCBwcm9kdWN0IGF0IGluZGV4ICR7aXRlbUluZGV4fSBtdXN0IGhhdmUgYm90aCBsaW5rTmFtZSBhbmQgdXJsYF07XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBpdGVtLmxpbmtOYW1lICE9PSAnc3RyaW5nJyB8fCAhaXRlbS5saW5rTmFtZS50cmltKCkpIHtcbiAgICAgICAgICAgICAgICAgIGVycm9yc1tgcHJvZHVjdF8ke2luZGV4fWBdID0gW2BSZWxhdGVkIHByb2R1Y3QgbGlua05hbWUgYXQgaW5kZXggJHtpdGVtSW5kZXh9IG11c3QgYmUgYSBub24tZW1wdHkgc3RyaW5nYF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgaXRlbS51cmwgIT09ICdzdHJpbmcnIHx8ICFpdGVtLnVybC50cmltKCkpIHtcbiAgICAgICAgICAgICAgICAgIGVycm9yc1tgcHJvZHVjdF8ke2luZGV4fWBdID0gW2BSZWxhdGVkIHByb2R1Y3QgVVJMIGF0IGluZGV4ICR7aXRlbUluZGV4fSBtdXN0IGJlIGEgbm9uLWVtcHR5IHN0cmluZ2BdO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAvLyBCYXNpYyBVUkwgdmFsaWRhdGlvblxuICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgbmV3IFVSTChpdGVtLnVybC50cmltKCkpO1xuICAgICAgICAgICAgICAgICAgfSBjYXRjaCB7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yc1tgcHJvZHVjdF8ke2luZGV4fWBdID0gW2BSZWxhdGVkIHByb2R1Y3QgVVJMIGF0IGluZGV4ICR7aXRlbUluZGV4fSBpcyBub3QgYSB2YWxpZCBVUkxgXTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBlcnJvcnNbYHByb2R1Y3RfJHtpbmRleH1gXSA9IFtcIlJlbGF0ZWQgcHJvZHVjdHMgbXVzdCBiZSBhbiBhcnJheSBvZiBvYmplY3RzIHdpdGggbGlua05hbWUgYW5kIHVybFwiXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICAvLyBWYWxpZGF0ZSB2YXJpYW50c1xuICAgICAgdmFyaWFudHMuZm9yRWFjaCgodmFyaWFudDogYW55LCBpbmRleDogbnVtYmVyKSA9PiB7XG4gICAgICAgIGlmICghdmFyaWFudC5wcm9kdWN0VmFyaWFudFNLVSkge1xuICAgICAgICAgIGVycm9yc1tgdmFyaWFudF8ke2luZGV4fWBdID0gW1wiVmFyaWFudCBTS1UgaXMgcmVxdWlyZWRcIl07XG4gICAgICAgIH0gZWxzZSBpZiAodmFyaWFudFNLVXMuaGFzKHZhcmlhbnQucHJvZHVjdFZhcmlhbnRTS1UpKSB7XG4gICAgICAgICAgZXJyb3JzW2B2YXJpYW50XyR7aW5kZXh9YF0gPSBbXCJEdXBsaWNhdGUgVmFyaWFudCBTS1VcIl07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyaWFudFNLVXMuYWRkKHZhcmlhbnQucHJvZHVjdFZhcmlhbnRTS1UpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF2YXJpYW50LnByb2R1Y3RTS1UpIHtcbiAgICAgICAgICBlcnJvcnNbYHZhcmlhbnRfJHtpbmRleH1gXSA9IFtcIlByb2R1Y3QgU0tVIGlzIHJlcXVpcmVkIGZvciB2YXJpYW50XCJdO1xuICAgICAgICB9IGVsc2UgaWYgKCFwcm9kdWN0U0tVcy5oYXModmFyaWFudC5wcm9kdWN0U0tVKSkge1xuICAgICAgICAgIGVycm9yc1tgdmFyaWFudF8ke2luZGV4fWBdID0gW1wiUHJvZHVjdCBTS1UgZG9lcyBub3QgZXhpc3RcIl07XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXZhcmlhbnQudGl0bGUpIHtcbiAgICAgICAgICBlcnJvcnNbYHZhcmlhbnRfJHtpbmRleH1gXSA9IFtcIlZhcmlhbnQgdGl0bGUgaXMgcmVxdWlyZWRcIl07XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXZhcmlhbnQucHJpY2UgfHwgaXNOYU4oTnVtYmVyKHZhcmlhbnQucHJpY2UpKSB8fCBOdW1iZXIodmFyaWFudC5wcmljZSkgPD0gMCkge1xuICAgICAgICAgIGVycm9yc1tgdmFyaWFudF8ke2luZGV4fWBdID0gW1wiVmFsaWQgcHJpY2UgaXMgcmVxdWlyZWRcIl07XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXZhcmlhbnQuc3RvY2tRdWFudGl0eSB8fCBpc05hTihOdW1iZXIodmFyaWFudC5zdG9ja1F1YW50aXR5KSkgfHwgTnVtYmVyKHZhcmlhbnQuc3RvY2tRdWFudGl0eSkgPCAwKSB7XG4gICAgICAgICAgZXJyb3JzW2B2YXJpYW50XyR7aW5kZXh9YF0gPSBbXCJWYWxpZCBzdG9jayBxdWFudGl0eSBpcyByZXF1aXJlZFwiXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdmFyaWFudC52YXJpYW50VHlwZSkge1xuICAgICAgICAgIGVycm9yc1tgdmFyaWFudF8ke2luZGV4fWBdID0gW1wiVmFyaWFudCB0eXBlIGlzIHJlcXVpcmVkXCJdO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF2YXJpYW50LnZhcmlhbnRWYWx1ZSkge1xuICAgICAgICAgIGVycm9yc1tgdmFyaWFudF8ke2luZGV4fWBdID0gW1wiVmFyaWFudCB2YWx1ZSBpcyByZXF1aXJlZFwiXTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFZhbGlkYXRlIEhTTiBjb2RlIGZvcm1hdCBpZiBwcm92aWRlZFxuICAgICAgICBpZiAodmFyaWFudC5oc25Db2RlICYmICEvXlxcZHs2LDh9JC8udGVzdChTdHJpbmcodmFyaWFudC5oc25Db2RlKSkpIHtcbiAgICAgICAgICBlcnJvcnNbYHZhcmlhbnRfJHtpbmRleH1gXSA9IFtcIkhTTiBjb2RlIG11c3QgYmUgNi04IGRpZ2l0c1wiXTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFZhbGlkYXRlIHByb2R1Y3Qgd2VpZ2h0IGlmIHByb3ZpZGVkXG4gICAgICAgIGlmICh2YXJpYW50LnByb2R1Y3RXZWlnaHQgIT09IHVuZGVmaW5lZCAmJiB2YXJpYW50LnByb2R1Y3RXZWlnaHQgIT09IG51bGwpIHtcbiAgICAgICAgICBjb25zdCB3ZWlnaHQgPSBOdW1iZXIodmFyaWFudC5wcm9kdWN0V2VpZ2h0KTtcbiAgICAgICAgICBpZiAoaXNOYU4od2VpZ2h0KSB8fCB3ZWlnaHQgPD0gMCkge1xuICAgICAgICAgICAgZXJyb3JzW2B2YXJpYW50XyR7aW5kZXh9YF0gPSBbXCJQcm9kdWN0IHdlaWdodCBtdXN0IGJlIGEgcG9zaXRpdmUgbnVtYmVyXCJdO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIFZhbGlkYXRlIHZhcmlhbnQgaW1hZ2VzXG4gICAgICB2YXJpYW50SW1hZ2VzLmZvckVhY2goKGltYWdlOiBhbnksIGluZGV4OiBudW1iZXIpID0+IHtcbiAgICAgICAgaWYgKCFpbWFnZS5wcm9kdWN0VmFyaWFudFNLVSkge1xuICAgICAgICAgIGVycm9yc1tgdmFyaWFudF9pbWFnZV8ke2luZGV4fWBdID0gW1wiVmFyaWFudCBTS1UgaXMgcmVxdWlyZWQgZm9yIGltYWdlXCJdO1xuICAgICAgICB9IGVsc2UgaWYgKCF2YXJpYW50U0tVcy5oYXMoaW1hZ2UucHJvZHVjdFZhcmlhbnRTS1UpKSB7XG4gICAgICAgICAgZXJyb3JzW2B2YXJpYW50X2ltYWdlXyR7aW5kZXh9YF0gPSBbXCJWYXJpYW50IFNLVSBkb2VzIG5vdCBleGlzdFwiXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghaW1hZ2UuaW1hZ2VVcmwpIHtcbiAgICAgICAgICBlcnJvcnNbYHZhcmlhbnRfaW1hZ2VfJHtpbmRleH1gXSA9IFtcIkltYWdlIFVSTCBpcyByZXF1aXJlZFwiXTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIFZhbGlkYXRlIHZhcmlhbnQgZGlzY291bnRzXG4gICAgICB2YXJpYW50RGlzY291bnRzLmZvckVhY2goKGRpc2NvdW50OiBhbnksIGluZGV4OiBudW1iZXIpID0+IHtcbiAgICAgICAgaWYgKCFkaXNjb3VudC5wcm9kdWN0VmFyaWFudFNLVSkge1xuICAgICAgICAgIGVycm9yc1tgdmFyaWFudF9kaXNjb3VudF8ke2luZGV4fWBdID0gW1wiVmFyaWFudCBTS1UgaXMgcmVxdWlyZWQgZm9yIGRpc2NvdW50XCJdO1xuICAgICAgICB9IGVsc2UgaWYgKCF2YXJpYW50U0tVcy5oYXMoZGlzY291bnQucHJvZHVjdFZhcmlhbnRTS1UpKSB7XG4gICAgICAgICAgZXJyb3JzW2B2YXJpYW50X2Rpc2NvdW50XyR7aW5kZXh9YF0gPSBbXCJWYXJpYW50IFNLVSBkb2VzIG5vdCBleGlzdFwiXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghZGlzY291bnQuZGlzY291bnRUeXBlIHx8ICFbJ3BlcmNlbnRhZ2UnLCAnYW1vdW50J10uaW5jbHVkZXMoZGlzY291bnQuZGlzY291bnRUeXBlKSkge1xuICAgICAgICAgIGVycm9yc1tgdmFyaWFudF9kaXNjb3VudF8ke2luZGV4fWBdID0gW1wiVmFsaWQgZGlzY291bnQgdHlwZSAocGVyY2VudGFnZS9hbW91bnQpIGlzIHJlcXVpcmVkXCJdO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFkaXNjb3VudC5kaXNjb3VudFZhbHVlIHx8IGlzTmFOKE51bWJlcihkaXNjb3VudC5kaXNjb3VudFZhbHVlKSkgfHwgTnVtYmVyKGRpc2NvdW50LmRpc2NvdW50VmFsdWUpIDw9IDApIHtcbiAgICAgICAgICBlcnJvcnNbYHZhcmlhbnRfZGlzY291bnRfJHtpbmRleH1gXSA9IFtcIlZhbGlkIGRpc2NvdW50IHZhbHVlIGlzIHJlcXVpcmVkXCJdO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFkaXNjb3VudC5zdGFydERhdGUgfHwgIWRpc2NvdW50LmVuZERhdGUpIHtcbiAgICAgICAgICBlcnJvcnNbYHZhcmlhbnRfZGlzY291bnRfJHtpbmRleH1gXSA9IFtcIlN0YXJ0IGRhdGUgYW5kIGVuZCBkYXRlIGFyZSByZXF1aXJlZFwiXTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgbmV3IERhdGUoZGlzY291bnQuc3RhcnREYXRlKTtcbiAgICAgICAgICBuZXcgRGF0ZShkaXNjb3VudC5lbmREYXRlKTtcbiAgICAgICAgfSBjYXRjaCB7XG4gICAgICAgICAgZXJyb3JzW2B2YXJpYW50X2Rpc2NvdW50XyR7aW5kZXh9YF0gPSBbXCJJbnZhbGlkIGRhdGUgZm9ybWF0XCJdO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgLy8gSWYgdGhlcmUgYXJlIHZhbGlkYXRpb24gZXJyb3JzLCB0aHJvdyB0aGVtXG4gICAgICBpZiAoT2JqZWN0LmtleXMoZXJyb3JzKS5sZW5ndGggPiAwKSB7XG4gICAgICAgIHRocm93IHtcbiAgICAgICAgICBuYW1lOiBcIlZhbGlkYXRpb25FcnJvclwiLFxuICAgICAgICAgIG1lc3NhZ2U6IFwiVmFsaWRhdGlvbiBmYWlsZWRcIixcbiAgICAgICAgICBlcnJvcnMsXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIC8vIFByb2Nlc3MgdGhlIGRhdGFcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMucHJvZHVjdFNlcnZpY2UuQnVsa1VwbG9hZFByb2R1Y3RzKHtcbiAgICAgICAgcHJvZHVjdHMsXG4gICAgICAgIHZhcmlhbnRzLFxuICAgICAgICB2YXJpYW50SW1hZ2VzOiB2YXJpYW50SW1hZ2VzIGFzIElQcm9kdWN0VmFyaWFudEltYWdlW10sXG4gICAgICAgIHZhcmlhbnREaXNjb3VudHM6IHZhcmlhbnREaXNjb3VudHMgYXMgSVByb2R1Y3RWYXJpYW50RGlzY291bnRbXSxcbiAgICAgICAgc2VsbGVySWQ6IHNlbGxlci5pZFxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgLi4uUmVzcG9uc2VHZW5lcmF0b3IuZ2VuZXJhdGUoMjAxLCByZXN1bHQsIFwiUHJvZHVjdHMgdXBsb2FkZWQgc3VjY2Vzc2Z1bGx5XCIpXG4gICAgICApO1xuICAgIH0gY2F0Y2ggKGVycm9yOiB1bmtub3duKSB7XG4gICAgICByZXR1cm4gdGhpcy5oYW5kbGVFcnJvcihlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgR2V0UGFnaW5hdGVkUHJvZHVjdHMocmVxOiBSZXF1ZXN0KTogUHJvbWlzZTxSZXNwb25zZT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHsgc2VhcmNoUGFyYW1zIH0gPSBuZXcgVVJMKHJlcS51cmwpO1xuXG4gICAgICAgIC8vIEdldCBwYWdpbmF0aW9uIHBhcmFtZXRlcnNcbiAgICAgICAgY29uc3QgcGFnZSA9IHBhcnNlSW50KHNlYXJjaFBhcmFtcy5nZXQoXCJwYWdlXCIpIHx8IFwiMVwiKTtcbiAgICAgICAgY29uc3QgbGltaXQgPSBwYXJzZUludChzZWFyY2hQYXJhbXMuZ2V0KFwibGltaXRcIikgfHwgXCIxMFwiKTtcbiAgICAgICAgY29uc3Qgc2tpcCA9IChwYWdlIC0gMSkgKiBsaW1pdDtcblxuICAgICAgICAvLyBHZXQgb3RoZXIgZmlsdGVyIHBhcmFtZXRlcnNcbiAgICAgICAgY29uc3QgY2F0ZWdvcnlJZCA9IHNlYXJjaFBhcmFtcy5nZXQoXCJjYXRlZ29yeUlkXCIpO1xuICAgICAgICBjb25zdCBzZWFyY2ggPSBzZWFyY2hQYXJhbXMuZ2V0KFwic2VhcmNoXCIpO1xuICAgICAgICBjb25zdCBmcm9tUHJpY2UgPSBzZWFyY2hQYXJhbXMuZ2V0KFwiZnJvbVByaWNlXCIpID8gcGFyc2VGbG9hdChzZWFyY2hQYXJhbXMuZ2V0KFwiZnJvbVByaWNlXCIpIHx8IFwiMFwiKSA6IHVuZGVmaW5lZDtcbiAgICAgICAgY29uc3QgdG9QcmljZSA9IHNlYXJjaFBhcmFtcy5nZXQoXCJ0b1ByaWNlXCIpID8gcGFyc2VGbG9hdChzZWFyY2hQYXJhbXMuZ2V0KFwidG9QcmljZVwiKSB8fCBcIjUwMDAwMFwiKSA6IHVuZGVmaW5lZDtcbiAgICAgICAgXG4gICAgICAgIC8vIEJ1aWxkIGZpbHRlciBjb25kaXRpb25zXG4gICAgICAgIGNvbnN0IHdoZXJlQ29uZGl0aW9uczogYW55ID0ge307XG4gICAgICAgIFxuICAgICAgICBpZiAoY2F0ZWdvcnlJZCkge1xuICAgICAgICAgICAgd2hlcmVDb25kaXRpb25zLmNhdGVnb3J5SWQgPSBjYXRlZ29yeUlkO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAoc2VhcmNoKSB7XG4gICAgICAgICAgICB3aGVyZUNvbmRpdGlvbnMuT1IgPSBbXG4gICAgICAgICAgICAgICAgeyBuYW1lOiB7IGNvbnRhaW5zOiBzZWFyY2gsIG1vZGU6ICdpbnNlbnNpdGl2ZScgfSB9LFxuICAgICAgICAgICAgICAgIHsgZGVzY3JpcHRpb246IHsgY29udGFpbnM6IHNlYXJjaCwgbW9kZTogJ2luc2Vuc2l0aXZlJyB9IH1cbiAgICAgICAgICAgIF07XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmIChmcm9tUHJpY2UgIT09IHVuZGVmaW5lZCB8fCB0b1ByaWNlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHdoZXJlQ29uZGl0aW9ucy52YXJpYW50cyA9IHtcbiAgICAgICAgICAgICAgICBzb21lOiB7XG4gICAgICAgICAgICAgICAgICAgIHByaWNlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi4oZnJvbVByaWNlICE9PSB1bmRlZmluZWQgJiYgeyBndGU6IGZyb21QcmljZSB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLih0b1ByaWNlICE9PSB1bmRlZmluZWQgJiYgeyBsdGU6IHRvUHJpY2UgfSlcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICAvLyBHZXQgdG90YWwgY291bnQgZm9yIHBhZ2luYXRpb24gaW5mb1xuICAgICAgICBjb25zdCB0b3RhbENvdW50ID0gYXdhaXQgcHJpc21hLnByb2R1Y3QuY291bnQoe1xuICAgICAgICAgICAgd2hlcmU6IHdoZXJlQ29uZGl0aW9uc1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBHZXQgcGFnaW5hdGVkIHByb2R1Y3RzXG4gICAgICAgIGNvbnN0IHByb2R1Y3RzID0gYXdhaXQgcHJpc21hLnByb2R1Y3QuZmluZE1hbnkoe1xuICAgICAgICAgICAgd2hlcmU6IHdoZXJlQ29uZGl0aW9ucyxcbiAgICAgICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICAgICAgICBpbWFnZXM6IHRydWUsXG4gICAgICAgICAgICAgICAgdmFyaWFudHM6IHtcbiAgICAgICAgICAgICAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgUHJvZHVjdFZhcmlhbnRJbWFnZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2NvdW50czogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICByZXZpZXdzOiB0cnVlLFxuICAgICAgICAgICAgICAgIGRpc2NvdW50czogdHJ1ZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNraXAsXG4gICAgICAgICAgICB0YWtlOiBsaW1pdCxcbiAgICAgICAgICAgIG9yZGVyQnk6IHtcbiAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6ICdkZXNjJ1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gbmV3IFJlc3BvbnNlKEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgIHN0YXR1czogXCJzdWNjZXNzXCIsXG4gICAgICAgICAgICBkYXRhOiBwcm9kdWN0cyxcbiAgICAgICAgICAgIHBhZ2luYXRpb246IHtcbiAgICAgICAgICAgICAgICB0b3RhbDogdG90YWxDb3VudCxcbiAgICAgICAgICAgICAgICBwYWdlLFxuICAgICAgICAgICAgICAgIGxpbWl0LFxuICAgICAgICAgICAgICAgIHRvdGFsUGFnZXM6IE1hdGguY2VpbCh0b3RhbENvdW50IC8gbGltaXQpLFxuICAgICAgICAgICAgICAgIGhhc01vcmU6IHNraXAgKyBsaW1pdCA8IHRvdGFsQ291bnRcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSksIHtcbiAgICAgICAgICAgIGhlYWRlcnM6IHsgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIgfVxuICAgICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyBwYWdpbmF0ZWQgcHJvZHVjdHM6XCIsIGVycm9yKTtcbiAgICAgICAgcmV0dXJuIG5ldyBSZXNwb25zZShKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICBzdGF0dXM6IFwiZXJyb3JcIixcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UgfHwgXCJGYWlsZWQgdG8gZmV0Y2ggcHJvZHVjdHNcIlxuICAgICAgICB9KSwge1xuICAgICAgICAgICAgc3RhdHVzOiA1MDAsXG4gICAgICAgICAgICBoZWFkZXJzOiB7IFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBoYW5kbGVFcnJvcihlcnJvcjogdW5rbm93bik6IE5leHRSZXNwb25zZSB7XG4gICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgbGV0IGVycm9yTWVzc2FnZSA9IFwiQW4gdW5rbm93biBlcnJvciBvY2N1cnJlZFwiO1xuICAgIGxldCB2YWxpZGF0aW9uRXJyb3IgPSB7fVxuXG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2Ygei5ab2RFcnJvcikge1xuICAgICAgZXJyb3JNZXNzYWdlID0gXCJWYWxpZGF0aW9uIEVycm9yXCJcbiAgICAgIHZhbGlkYXRpb25FcnJvciA9IGZyb21FcnJvcihlcnJvcikuZGV0YWlsc1xuICAgIH0gZWxzZSBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgZXJyb3JNZXNzYWdlID0gZXJyb3IubWVzc2FnZTtcblxuICAgIH1cblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIC4uLlJlc3BvbnNlR2VuZXJhdG9yLmdlbmVyYXRlKDUwMCwgbnVsbCwgZXJyb3JNZXNzYWdlLCB2YWxpZGF0aW9uRXJyb3IpXG4gICAgKTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsIlJlc3BvbnNlR2VuZXJhdG9yIiwiUHJvZHVjdFNlcnZpY2UiLCJQcm9kdWN0VmFsaWRhdGlvbiIsImRiIiwieiIsImZyb21FcnJvciIsIlhMU1giLCJheGlvcyIsIlByaXNtYUNsaWVudCIsInByaXNtYSIsIlByb2R1Y3RDb250cm9sbGVyIiwiY29uc3RydWN0b3IiLCJwcm9kdWN0U2VydmljZSIsIkNyZWF0ZVByb2R1Y3QiLCJyZXF1ZXN0IiwiYm9keSIsImpzb24iLCJ2YWxpZGF0ZWREYXRhIiwicGFyc2UiLCJwcm9kdWN0IiwiZ2VuZXJhdGUiLCJlcnJvciIsImhhbmRsZUVycm9yIiwiR2V0UHJvZHVjdEJ5SWQiLCJpZCIsIndpdGhEaXNjb3VudHMiLCJpbmNsdWRlVW5hcHByb3ZlZCIsIkVycm9yIiwiY29uc29sZSIsImxvZyIsIlVwZGF0ZVByb2R1Y3QiLCJzZWFyY2hQYXJhbXMiLCJVUkwiLCJ1cmwiLCJnZXQiLCJEZWxldGVQcm9kdWN0IiwiR2V0UHJvZHVjdFZhcmlhbnRCeUlkIiwiR2V0QWxsUHJvZHVjdHMiLCJjYXRlZ29yeUlkIiwidW5kZWZpbmVkIiwiZnJvbVByaWNlIiwiTnVtYmVyIiwidG9QcmljZSIsInNlYXJjaCIsIm9ubHlEaXNjb3VudGVkIiwicHJvZHVjdHMiLCJHZXRQcm9kdWN0c0J5U2VsbGVyIiwidXNlckRhdGEiLCJoZWFkZXJzIiwidXNlciIsIkpTT04iLCJzZWxsZXJJZCIsInNlbGxlciIsInNlbGxlclByb2ZpbGUiLCJmaW5kVW5pcXVlIiwid2hlcmUiLCJ1c2VySWQiLCJ0cmltIiwiQWRkUHJvZHVjdFZhcmlhbnRJbWFnZSIsImltYWdlIiwiRGVsZXRlUHJvZHVjdFZhcmlhbnRJbWFnZSIsIkFkZFByb2R1Y3RWYXJpYW50RGlzY291bnQiLCJkaXNjb3VudCIsIlVwZGF0ZVByb2R1Y3RWYXJpYW50RGlzY291bnQiLCJEZWxldGVQcm9kdWN0VmFyaWFudERpc2NvdW50IiwiQWRkUHJvZHVjdFZhcmlhbnQiLCJ2YXJpYW50RGF0YSIsIlByb2R1Y3RWYXJpYW50SW1hZ2UiLCJQcm9kdWN0RGlzY291bnQiLCJ2YXJpYW50IiwiVXBkYXRlUHJvZHVjdFZhcmlhbnQiLCJ1cGRhdGVkVmFyaWFudCIsIkRlbGV0ZVByb2R1Y3RWYXJpYW50IiwiQnVsa1VwbG9hZFByb2R1Y3RzIiwiZmlsZVVybCIsInJlc3BvbnNlIiwicmVzcG9uc2VUeXBlIiwid29ya2Jvb2siLCJyZWFkIiwiZGF0YSIsInByb2R1Y3RTaGVldCIsIlNoZWV0cyIsInZhcmlhbnRTaGVldCIsInZhcmlhbnRJbWFnZVNoZWV0IiwidmFyaWFudERpc2NvdW50U2hlZXQiLCJyYXdQcm9kdWN0cyIsInV0aWxzIiwic2hlZXRfdG9fanNvbiIsImxlbmd0aCIsIk9iamVjdCIsImtleXMiLCJoYXNTdWJjYXRlZ29yeUNvbHVtbiIsInNvbWUiLCJrZXkiLCJ0b0xvd2VyQ2FzZSIsImluY2x1ZGVzIiwibWFwIiwic3ViY2F0ZWdvcnlWYWx1ZSIsInN1YmNhdGVnb3J5IiwiU3ViY2F0ZWdvcnkiLCJyZWxhdGVkUHJvZHVjdHNWYWx1ZSIsInJlbGF0ZWRQcm9kdWN0cyIsInJlbGF0ZWRfcHJvZHVjdHMiLCJsaW5rTmFtZVZhbHVlIiwibGlua05hbWUiLCJsaW5rX25hbWUiLCJyZWxhdGVkUHJvZHVjdHNBcnJheSIsInVybHMiLCJzcGxpdCIsImZpbHRlciIsImluZGV4T2YiLCJBcnJheSIsImlzQXJyYXkiLCJpdGVtIiwiaW5kZXgiLCJwcm9kdWN0U0tVIiwib3JpZ2luYWwiLCJmaW5hbCIsInByb2Nlc3NlZCIsInZhcmlhbnRzIiwidmFyaWFudEltYWdlcyIsImltZyIsInByb2R1Y3RWYXJpYW50U0tVIiwiU3RyaW5nIiwiaW1hZ2VVcmwiLCJpc1ByaW1hcnkiLCJCb29sZWFuIiwidmFyaWFudERpc2NvdW50cyIsImRpc2MiLCJkaXNjb3VudFR5cGUiLCJkaXNjb3VudFZhbHVlIiwic3RhcnREYXRlIiwiZW5kRGF0ZSIsInZhcmlhbnRTS1VzIiwiU2V0IiwicHJvZHVjdFNLVXMiLCJlcnJvcnMiLCJmb3JFYWNoIiwiaGFzIiwiYWRkIiwiY2F0ZWdvcnkiLCJuYW1lIiwiYnJhbmQiLCJpdGVtSW5kZXgiLCJ0aXRsZSIsInByaWNlIiwiaXNOYU4iLCJzdG9ja1F1YW50aXR5IiwidmFyaWFudFR5cGUiLCJ2YXJpYW50VmFsdWUiLCJoc25Db2RlIiwidGVzdCIsInByb2R1Y3RXZWlnaHQiLCJ3ZWlnaHQiLCJEYXRlIiwibWVzc2FnZSIsInJlc3VsdCIsIkdldFBhZ2luYXRlZFByb2R1Y3RzIiwicmVxIiwicGFnZSIsInBhcnNlSW50IiwibGltaXQiLCJza2lwIiwicGFyc2VGbG9hdCIsIndoZXJlQ29uZGl0aW9ucyIsIk9SIiwiY29udGFpbnMiLCJtb2RlIiwiZGVzY3JpcHRpb24iLCJndGUiLCJsdGUiLCJ0b3RhbENvdW50IiwiY291bnQiLCJmaW5kTWFueSIsImluY2x1ZGUiLCJpbWFnZXMiLCJkaXNjb3VudHMiLCJyZXZpZXdzIiwidGFrZSIsIm9yZGVyQnkiLCJjcmVhdGVkQXQiLCJSZXNwb25zZSIsInN0cmluZ2lmeSIsInN0YXR1cyIsInBhZ2luYXRpb24iLCJ0b3RhbCIsInRvdGFsUGFnZXMiLCJNYXRoIiwiY2VpbCIsImhhc01vcmUiLCJlcnJvck1lc3NhZ2UiLCJ2YWxpZGF0aW9uRXJyb3IiLCJab2RFcnJvciIsImRldGFpbHMiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/modules/controllers/ProductController.ts\n");

/***/ }),

/***/ "(rsc)/./src/modules/services/ProductService.ts":
/*!************************************************!*\
  !*** ./src/modules/services/ProductService.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ProductService: () => (/* binding */ ProductService)\n/* harmony export */ });\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../lib/db */ \"(rsc)/./src/lib/db.ts\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash */ \"(rsc)/./node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\nclass ProductService {\n    async CreateProduct(productData) {\n        try {\n            const { variants, GST, ...productInfo } = productData;\n            if (!variants || variants.length === 0) {\n                throw new Error(\"At least one variant is required\");\n            }\n            console.log(\"Creating product with data:\", productInfo);\n            if (!productInfo.categoryId) {\n                throw new Error(\"categoryId is required\");\n            }\n            // First get the seller profile to get the sellerProfileId for GST\n            const sellerProfile = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].sellerProfile.findUnique({\n                where: {\n                    id: productInfo.sellerId\n                }\n            });\n            if (!sellerProfile) {\n                throw new Error(\"Seller profile not found\");\n            }\n            const product = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].$transaction(async (prisma)=>{\n                // First create the product\n                const newProduct = await prisma.product.create({\n                    data: {\n                        categoryId: productInfo.categoryId,\n                        name: productInfo.name,\n                        description: productInfo.description,\n                        productSKU: productInfo.productSKU,\n                        sellerId: productInfo.sellerId,\n                        brand: productInfo.brand,\n                        hsnCode: productInfo.hsnCode || null,\n                        isApproved: productInfo.isApproved || false,\n                        aboutProduct: productInfo.aboutProduct || null,\n                        linkName: productInfo.linkName || null,\n                        relatedProducts: productInfo.relatedProducts ? productInfo.relatedProducts : null,\n                        wholesale: productInfo.wholesale ?? false\n                    }\n                });\n                // If GST is provided, create it\n                if (GST && GST.percentage) {\n                    await prisma.gST.create({\n                        data: {\n                            productId: newProduct.id,\n                            percentage: new _prisma_client__WEBPACK_IMPORTED_MODULE_2__.Prisma.Decimal(GST.percentage)\n                        }\n                    });\n                }\n                // Create all variants first\n                const createdVariants = await prisma.productVariant.createMany({\n                    data: variants.map((variant)=>({\n                            productId: newProduct.id,\n                            productVariantSKU: variant.productVariantSKU,\n                            title: variant.title,\n                            description: variant.description,\n                            price: new _prisma_client__WEBPACK_IMPORTED_MODULE_2__.Prisma.Decimal(variant.price),\n                            stockQuantity: variant.stockQuantity,\n                            variantType: variant.variantType,\n                            variantValue: variant.variantValue,\n                            productWeight: variant.productWeight ? new _prisma_client__WEBPACK_IMPORTED_MODULE_2__.Prisma.Decimal(variant.productWeight) : null,\n                            additionalPrice: new _prisma_client__WEBPACK_IMPORTED_MODULE_2__.Prisma.Decimal(variant.additionalPrice || 0),\n                            height: variant.height !== undefined ? new _prisma_client__WEBPACK_IMPORTED_MODULE_2__.Prisma.Decimal(variant.height) : null,\n                            width: variant.width !== undefined ? new _prisma_client__WEBPACK_IMPORTED_MODULE_2__.Prisma.Decimal(variant.width) : null,\n                            breadth: variant.breadth !== undefined ? new _prisma_client__WEBPACK_IMPORTED_MODULE_2__.Prisma.Decimal(variant.breadth) : null\n                        }))\n                });\n                // Get the created variants with their IDs\n                const variantsWithIds = await prisma.productVariant.findMany({\n                    where: {\n                        productId: newProduct.id\n                    },\n                    select: {\n                        id: true,\n                        productVariantSKU: true\n                    }\n                });\n                // Prepare all images and discounts data\n                const allImages = [];\n                const allDiscounts = [];\n                for (const variant of variants){\n                    const variantWithId = variantsWithIds.find((v)=>v.productVariantSKU === variant.productVariantSKU);\n                    if (!variantWithId) continue;\n                    // Collect images\n                    if (variant.images && variant.images.length > 0) {\n                        allImages.push(...variant.images.map((image)=>({\n                                productVariantId: variantWithId.id,\n                                imageUrl: image.imageUrl,\n                                isPrimary: image.isPrimary || false\n                            })));\n                    }\n                    // Collect discounts\n                    if (variant.discounts && variant.discounts.length > 0) {\n                        allDiscounts.push(...variant.discounts.map((discount)=>({\n                                productVariantId: variantWithId.id,\n                                discountType: discount.discountType,\n                                discountValue: new _prisma_client__WEBPACK_IMPORTED_MODULE_2__.Prisma.Decimal(discount.discountValue),\n                                startDate: new Date(discount.startDate),\n                                endDate: new Date(discount.endDate)\n                            })));\n                    }\n                }\n                // Create all images and discounts in bulk\n                if (allImages.length > 0) {\n                    await prisma.productVariantImage.createMany({\n                        data: allImages\n                    });\n                }\n                if (allDiscounts.length > 0) {\n                    await prisma.productDiscount.createMany({\n                        data: allDiscounts\n                    });\n                }\n                // Return the complete product with all relations\n                return await prisma.product.findUnique({\n                    where: {\n                        id: newProduct.id\n                    },\n                    include: {\n                        variants: {\n                            include: {\n                                discounts: true,\n                                ProductVariantImage: true\n                            }\n                        },\n                        GST: true\n                    }\n                });\n            }, {\n                maxWait: 10000,\n                timeout: 30000\n            });\n            return product;\n        } catch (error) {\n            console.error(`CreateProduct error:`, error);\n            // Handle specific Prisma transaction errors\n            if (error instanceof _prisma_client__WEBPACK_IMPORTED_MODULE_2__.Prisma.PrismaClientKnownRequestError) {\n                switch(error.code){\n                    case 'P2028':\n                        throw new Error('Transaction timeout: The operation took too long to complete. Please try again with fewer variants or images.');\n                    case 'P2002':\n                        throw new Error('A product with this SKU already exists. Please use a different SKU.');\n                    case 'P2003':\n                        throw new Error('Invalid category or seller reference. Please check your selections.');\n                    case 'P2024':\n                        throw new Error('Transaction failed due to a database constraint. Please check your data.');\n                    default:\n                        throw new Error(`Database error: ${error.message}`);\n                }\n            }\n            // Handle other known errors\n            if (error instanceof Error) {\n                throw error;\n            }\n            throw new Error('An unexpected error occurred while creating the product.');\n        }\n    }\n    async GetProductById(id, withDiscounts, includeUnapproved = false) {\n        try {\n            const whereClause = {\n                id\n            };\n            // Only filter by approval status if we don't want to include unapproved products\n            if (!includeUnapproved) {\n                whereClause.isApproved = true;\n            }\n            const product = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].product.findUnique({\n                where: whereClause,\n                include: {\n                    variants: {\n                        include: {\n                            ProductVariantImage: true,\n                            discounts: true // Always include discounts\n                        }\n                    },\n                    seller: true,\n                    GST: true,\n                    images: true,\n                    category: {\n                        include: {\n                            parentCategory: true\n                        }\n                    }\n                }\n            });\n            if (!product) {\n                throw new Error(\"Product not found\");\n            }\n            return product;\n        } catch (error) {\n            console.error(\"GetProductById error:\", error);\n            if (error instanceof Error && error.message === \"Product not found\") {\n                throw error;\n            }\n            throw new Error(\"Failed to get product\");\n        }\n    }\n    async GetProductVariantById(id) {\n        try {\n            const productVariant = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].productVariant.findUnique({\n                where: {\n                    id\n                },\n                include: {\n                    product: {\n                        include: {\n                            images: true,\n                            reviews: true,\n                            variants: {\n                                include: {\n                                    ProductVariantImage: true,\n                                    discounts: true\n                                }\n                            },\n                            GST: true,\n                            seller: {\n                                include: {\n                                    Pickuplocation: {\n                                        where: {\n                                            isDefault: true\n                                        },\n                                        take: 1\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n            });\n            // Check if variant exists and product is approved\n            if (lodash__WEBPACK_IMPORTED_MODULE_1___default().isEmpty(productVariant) || !productVariant.product || !productVariant.product.isApproved) {\n                throw new Error(\"Product variant not found\");\n            }\n            return productVariant;\n        } catch (error) {\n            console.error(error);\n            throw new Error(\"Failed to get product variant\");\n        }\n    }\n    async UpdateProduct(id, productData) {\n        try {\n            const { GST, variants, discounts, images, ...productInfo } = productData;\n            // First check if product exists\n            const existingProduct = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].product.findUnique({\n                where: {\n                    id\n                },\n                include: {\n                    GST: true\n                }\n            });\n            if (!existingProduct) {\n                throw new Error(\"Product not found\");\n            }\n            // Handle GST update separately to avoid transaction timeout\n            if (GST) {\n                await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].gST.upsert({\n                    where: {\n                        productId: id\n                    },\n                    create: {\n                        percentage: new _prisma_client__WEBPACK_IMPORTED_MODULE_2__.Prisma.Decimal(GST.percentage),\n                        productId: id\n                    },\n                    update: {\n                        percentage: new _prisma_client__WEBPACK_IMPORTED_MODULE_2__.Prisma.Decimal(GST.percentage)\n                    }\n                });\n            }\n            // Only update basic product fields, excluding relational data\n            const allowedFields = {\n                ...productInfo.productSKU && {\n                    productSKU: productInfo.productSKU\n                },\n                ...productInfo.categoryId && {\n                    categoryId: productInfo.categoryId\n                },\n                ...productInfo.name && {\n                    name: productInfo.name\n                },\n                ...productInfo.description !== undefined && {\n                    description: productInfo.description\n                },\n                ...productInfo.brand !== undefined && {\n                    brand: productInfo.brand\n                },\n                ...productInfo.isApproved !== undefined && {\n                    isApproved: productInfo.isApproved\n                },\n                ...productInfo.aboutProduct !== undefined && {\n                    aboutProduct: productInfo.aboutProduct\n                },\n                ...productInfo.hsnCode !== undefined && {\n                    hsnCode: productInfo.hsnCode\n                },\n                ...productInfo.linkName !== undefined && {\n                    linkName: productInfo.linkName\n                },\n                ...productInfo.relatedProducts !== undefined && {\n                    relatedProducts: productInfo.relatedProducts\n                },\n                ...productInfo.wholesale !== undefined && {\n                    wholesale: productInfo.wholesale\n                }\n            };\n            // Update product\n            const updatedProduct = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].product.update({\n                where: {\n                    id\n                },\n                data: allowedFields,\n                include: {\n                    variants: {\n                        include: {\n                            ProductVariantImage: true,\n                            discounts: true\n                        }\n                    },\n                    GST: true,\n                    images: true\n                }\n            });\n            return updatedProduct;\n        } catch (error) {\n            console.error(\"UpdateProduct error:\", error);\n            if (error instanceof _prisma_client__WEBPACK_IMPORTED_MODULE_2__.Prisma.PrismaClientKnownRequestError) {\n                if (error.code === \"P2025\") {\n                    throw new Error(\"Product not found\");\n                }\n                if (error.code === \"P2002\") {\n                    throw new Error(\"Duplicate value found for a unique field\");\n                }\n            }\n            throw new Error(\"Failed to update product\");\n        }\n    }\n    async DeleteProduct(id) {\n        try {\n            await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].$transaction(async (prisma)=>{\n                await prisma.productImage.deleteMany({\n                    where: {\n                        productId: id\n                    }\n                });\n                await prisma.productVariant.deleteMany({\n                    where: {\n                        productId: id\n                    }\n                });\n                await prisma.productDiscount.deleteMany({\n                    where: {\n                        productVariantId: id\n                    }\n                });\n                await prisma.product.delete({\n                    where: {\n                        id\n                    }\n                });\n            });\n            return true;\n        } catch (error) {\n            console.error(error);\n            throw new Error(\"Failed to delete product\");\n        }\n    }\n    async GetAllProducts({ categoryId, fromPrice, toPrice, search, onlyDiscounted = false }) {\n        try {\n            const currentDate = new Date();\n            const filters = {\n                isApproved: true,\n                ...categoryId && {\n                    categoryId\n                }\n            };\n            const products = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].product.findMany({\n                where: {\n                    ...filters,\n                    ...search && {\n                        OR: [\n                            {\n                                name: {\n                                    contains: search,\n                                    mode: \"insensitive\"\n                                }\n                            },\n                            {\n                                description: {\n                                    contains: search,\n                                    mode: \"insensitive\"\n                                }\n                            },\n                            {\n                                category: {\n                                    name: {\n                                        contains: search,\n                                        mode: \"insensitive\"\n                                    }\n                                }\n                            }\n                        ]\n                    },\n                    ...onlyDiscounted && {\n                        variants: {\n                            some: {\n                                discounts: {\n                                    some: {\n                                        AND: [\n                                            {\n                                                startDate: {\n                                                    lte: currentDate\n                                                }\n                                            },\n                                            {\n                                                endDate: {\n                                                    gte: currentDate\n                                                }\n                                            }\n                                        ]\n                                    }\n                                }\n                            }\n                        }\n                    }\n                },\n                include: {\n                    variants: {\n                        where: onlyDiscounted ? {\n                            discounts: {\n                                some: {\n                                    AND: [\n                                        {\n                                            startDate: {\n                                                lte: currentDate\n                                            }\n                                        },\n                                        {\n                                            endDate: {\n                                                gte: currentDate\n                                            }\n                                        }\n                                    ]\n                                }\n                            }\n                        } : undefined,\n                        include: {\n                            ProductVariantImage: true,\n                            discounts: {\n                                where: {\n                                    AND: [\n                                        {\n                                            startDate: {\n                                                lte: currentDate\n                                            }\n                                        },\n                                        {\n                                            endDate: {\n                                                gte: currentDate\n                                            }\n                                        }\n                                    ]\n                                },\n                                orderBy: {\n                                    discountValue: 'desc'\n                                }\n                            }\n                        }\n                    },\n                    seller: true,\n                    GST: true,\n                    images: true,\n                    reviews: true\n                }\n            });\n            // Filter out products that have no variants with discounts\n            if (onlyDiscounted) {\n                return products.filter((product)=>product.variants.some((variant)=>variant.discounts.length > 0));\n            }\n            return products;\n        } catch (error) {\n            console.error(error);\n            throw new Error(\"Failed to get products\");\n        }\n    }\n    async GetProductsBySeller(sellerId, search) {\n        try {\n            const products = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].product.findMany({\n                where: {\n                    sellerId,\n                    ...search && {\n                        OR: [\n                            {\n                                productSKU: {\n                                    contains: search,\n                                    mode: \"insensitive\"\n                                }\n                            },\n                            {\n                                name: {\n                                    contains: search,\n                                    mode: \"insensitive\"\n                                }\n                            },\n                            {\n                                hsnCode: {\n                                    contains: search,\n                                    mode: \"insensitive\"\n                                }\n                            },\n                            {\n                                brand: {\n                                    contains: search,\n                                    mode: \"insensitive\"\n                                }\n                            },\n                            {\n                                variants: {\n                                    some: {\n                                        productVariantSKU: {\n                                            contains: search,\n                                            mode: \"insensitive\"\n                                        }\n                                    }\n                                }\n                            }\n                        ]\n                    }\n                },\n                include: {\n                    variants: {\n                        include: {\n                            ProductVariantImage: true,\n                            discounts: true\n                        }\n                    },\n                    GST: true,\n                    seller: true,\n                    images: true,\n                    reviews: true\n                }\n            });\n            return products;\n        } catch (error) {\n            console.error(error);\n            throw new Error(\"Failed to get products by seller\");\n        }\n    }\n    async AddProductImage(imageData) {\n        try {\n            const product = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].product.findUnique({\n                where: {\n                    id: imageData.productId\n                }\n            });\n            if (!product) throw new Error(\"Product not found\");\n            if (imageData.isPrimary) {\n                await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].productImage.updateMany({\n                    where: {\n                        productId: imageData.productId,\n                        isPrimary: true\n                    },\n                    data: {\n                        isPrimary: false\n                    }\n                });\n            }\n            const newImage = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].productImage.create({\n                data: {\n                    productId: imageData.productId,\n                    imageUrl: imageData.imageUrl,\n                    isPrimary: imageData.isPrimary || false\n                }\n            });\n            return newImage;\n        } catch (error) {\n            console.error(error);\n            throw new Error(\"Failed to add product image\");\n        }\n    }\n    async DeleteProductImage(imageId) {\n        try {\n            const image = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].productImage.findUnique({\n                where: {\n                    id: imageId\n                }\n            });\n            if (!image) throw new Error(\"Image not found\");\n            await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].productImage.delete({\n                where: {\n                    id: imageId\n                }\n            });\n            return true;\n        } catch (error) {\n            console.error(error);\n            throw new Error(\"Failed to delete product image\");\n        }\n    }\n    async AddProductVariant(variantData) {\n        try {\n            const product = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].product.findUnique({\n                where: {\n                    id: variantData.productId\n                }\n            });\n            if (!product) throw new Error(\"Product not found\");\n            const newVariant = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].productVariant.create({\n                data: {\n                    productVariantSKU: variantData.productVariantSKU,\n                    productId: variantData.productId,\n                    title: variantData.title,\n                    description: variantData.description,\n                    price: new _prisma_client__WEBPACK_IMPORTED_MODULE_2__.Prisma.Decimal(variantData.price),\n                    stockQuantity: variantData.stockQuantity,\n                    variantType: variantData.variantType,\n                    variantValue: variantData.variantValue,\n                    productWeight: new _prisma_client__WEBPACK_IMPORTED_MODULE_2__.Prisma.Decimal(variantData.productWeight || 0),\n                    additionalPrice: new _prisma_client__WEBPACK_IMPORTED_MODULE_2__.Prisma.Decimal(variantData.additionalPrice || 0),\n                    height: variantData.height !== undefined ? new _prisma_client__WEBPACK_IMPORTED_MODULE_2__.Prisma.Decimal(variantData.height) : null,\n                    width: variantData.width !== undefined ? new _prisma_client__WEBPACK_IMPORTED_MODULE_2__.Prisma.Decimal(variantData.width) : null,\n                    breadth: variantData.breadth !== undefined ? new _prisma_client__WEBPACK_IMPORTED_MODULE_2__.Prisma.Decimal(variantData.breadth) : null,\n                    ...variantData.ProductVariantImage && {\n                        ProductVariantImage: {\n                            createMany: {\n                                data: variantData.ProductVariantImage.map((image)=>({\n                                        imageUrl: image.imageUrl,\n                                        isPrimary: image.isPrimary || false\n                                    }))\n                            }\n                        }\n                    },\n                    ...variantData.ProductDiscount && {\n                        discounts: {\n                            createMany: {\n                                data: variantData.ProductDiscount.map((discount)=>({\n                                        discountType: discount.discountType,\n                                        discountValue: new _prisma_client__WEBPACK_IMPORTED_MODULE_2__.Prisma.Decimal(discount.discountValue),\n                                        startDate: new Date(discount.startDate),\n                                        endDate: new Date(discount.endDate)\n                                    }))\n                            }\n                        }\n                    }\n                },\n                include: {\n                    ProductVariantImage: true,\n                    discounts: true\n                }\n            });\n            return newVariant;\n        } catch (error) {\n            console.error(error);\n            throw new Error(\"Failed to add product variant\");\n        }\n    }\n    async UpdateProductVariant(variantData) {\n        try {\n            const variant = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].productVariant.findUnique({\n                where: {\n                    id: variantData.id\n                }\n            });\n            if (!variant) throw new Error(\"Variant not found\");\n            const updatedVariant = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].productVariant.update({\n                where: {\n                    id: variantData.id\n                },\n                data: {\n                    title: variantData.title,\n                    description: variantData.description,\n                    price: new _prisma_client__WEBPACK_IMPORTED_MODULE_2__.Prisma.Decimal(variantData.price),\n                    stockQuantity: variantData.stockQuantity,\n                    variantType: variantData.variantType,\n                    variantValue: variantData.variantValue,\n                    productWeight: new _prisma_client__WEBPACK_IMPORTED_MODULE_2__.Prisma.Decimal(variantData.productWeight || 0),\n                    additionalPrice: new _prisma_client__WEBPACK_IMPORTED_MODULE_2__.Prisma.Decimal(variantData.additionalPrice || 0),\n                    height: variantData.height !== undefined ? new _prisma_client__WEBPACK_IMPORTED_MODULE_2__.Prisma.Decimal(variantData.height) : undefined,\n                    width: variantData.width !== undefined ? new _prisma_client__WEBPACK_IMPORTED_MODULE_2__.Prisma.Decimal(variantData.width) : undefined,\n                    breadth: variantData.breadth !== undefined ? new _prisma_client__WEBPACK_IMPORTED_MODULE_2__.Prisma.Decimal(variantData.breadth) : undefined\n                }\n            });\n            return updatedVariant;\n        } catch (error) {\n            console.error(error);\n            throw new Error(\"Failed to update product variant\");\n        }\n    }\n    async DeleteProductVariant(variantId) {\n        try {\n            const variant = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].productVariant.findUnique({\n                where: {\n                    id: variantId\n                }\n            });\n            if (!variant) throw new Error(\"Variant not found\");\n            await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].productVariant.delete({\n                where: {\n                    id: variantId\n                }\n            });\n            return true;\n        } catch (error) {\n            console.error(error);\n            throw new Error(\"Failed to delete product variant\");\n        }\n    }\n    async UpdateProductDiscount(discountData) {\n        try {\n            const discount = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].productDiscount.findUnique({\n                where: {\n                    id: discountData.id\n                }\n            });\n            if (!discount) throw new Error(\"Discount not found\");\n            const updatedDiscount = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].productDiscount.update({\n                where: {\n                    id: discountData.id\n                },\n                data: {\n                    discountType: discountData.discountType,\n                    discountValue: new _prisma_client__WEBPACK_IMPORTED_MODULE_2__.Prisma.Decimal(discountData.discountValue),\n                    startDate: new Date(discountData.startDate),\n                    endDate: new Date(discountData.endDate)\n                }\n            });\n            return updatedDiscount;\n        } catch (error) {\n            console.error(error);\n            throw new Error(\"Failed to update product discount\");\n        }\n    }\n    async DeleteProductDiscount(discountId) {\n        try {\n            const discount = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].productDiscount.findUnique({\n                where: {\n                    id: discountId\n                }\n            });\n            if (!discount) throw new Error(\"Discount not found\");\n            await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].productDiscount.delete({\n                where: {\n                    id: discountId\n                }\n            });\n            return true;\n        } catch (error) {\n            console.error(error);\n            throw new Error(\"Failed to delete product variant discount\");\n        }\n    }\n    async AddProductVariantImage(imageData) {\n        try {\n            const variant = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].productVariant.findUnique({\n                where: {\n                    id: imageData.productVariantId\n                }\n            });\n            if (!variant) throw new Error(\"Product variant not found\");\n            if (imageData.isPrimary) {\n                await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].productVariantImage.updateMany({\n                    where: {\n                        productVariantId: imageData.productVariantId,\n                        isPrimary: true\n                    },\n                    data: {\n                        isPrimary: false\n                    }\n                });\n            }\n            const newImage = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].productVariantImage.create({\n                data: {\n                    productVariantId: imageData.productVariantId,\n                    imageUrl: imageData.imageUrl,\n                    isPrimary: imageData.isPrimary || false\n                }\n            });\n            return newImage;\n        } catch (error) {\n            console.error(error);\n            throw new Error(\"Failed to add product variant image\");\n        }\n    }\n    async DeleteProductVariantImage(imageId) {\n        try {\n            const image = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].productVariantImage.findUnique({\n                where: {\n                    id: imageId\n                }\n            });\n            if (!image) throw new Error(\"Image not found\");\n            await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].productVariantImage.delete({\n                where: {\n                    id: imageId\n                }\n            });\n            return true;\n        } catch (error) {\n            console.error(error);\n            throw new Error(\"Failed to delete product variant image\");\n        }\n    }\n    async AddProductVariantDiscount(discountData) {\n        try {\n            const variant = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].productVariant.findUnique({\n                where: {\n                    id: discountData.productVariantId\n                }\n            });\n            if (!variant) throw new Error(\"Product variant not found\");\n            const newDiscount = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].productDiscount.create({\n                data: {\n                    productVariantId: discountData.productVariantId,\n                    discountType: discountData.discountType,\n                    discountValue: new _prisma_client__WEBPACK_IMPORTED_MODULE_2__.Prisma.Decimal(discountData.discountValue),\n                    startDate: new Date(discountData.startDate),\n                    endDate: new Date(discountData.endDate)\n                }\n            });\n            return newDiscount;\n        } catch (error) {\n            console.error(error);\n            throw new Error(\"Failed to add product variant discount\");\n        }\n    }\n    async UpdateProductVariantDiscount(discountData) {\n        try {\n            const discount = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].productDiscount.findUnique({\n                where: {\n                    id: discountData.id\n                }\n            });\n            if (!discount) throw new Error(\"Discount not found\");\n            const updatedDiscount = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].productDiscount.update({\n                where: {\n                    id: discountData.id\n                },\n                data: {\n                    discountType: discountData.discountType,\n                    discountValue: new _prisma_client__WEBPACK_IMPORTED_MODULE_2__.Prisma.Decimal(discountData.discountValue),\n                    startDate: new Date(discountData.startDate),\n                    endDate: new Date(discountData.endDate)\n                }\n            });\n            return updatedDiscount;\n        } catch (error) {\n            console.error(error);\n            throw new Error(\"Failed to update product variant discount\");\n        }\n    }\n    async DeleteProductVariantDiscount(discountId) {\n        try {\n            const discount = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].productDiscount.findUnique({\n                where: {\n                    id: discountId\n                }\n            });\n            if (!discount) throw new Error(\"Discount not found\");\n            await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].productDiscount.delete({\n                where: {\n                    id: discountId\n                }\n            });\n            return true;\n        } catch (error) {\n            console.error(error);\n            throw new Error(\"Failed to delete product variant discount\");\n        }\n    }\n    async BulkUploadProducts(data) {\n        try {\n            const { products, variants, variantImages, variantDiscounts, sellerId } = data;\n            // Validate required data\n            if (!products.length || !variants.length) {\n                throw new Error(\"Products and variants are required\");\n            }\n            if (!sellerId) {\n                throw new Error(\"Seller ID is required\");\n            }\n            // Verify seller exists\n            const seller = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].sellerProfile.findUnique({\n                where: {\n                    id: sellerId\n                }\n            });\n            if (!seller) {\n                throw new Error(\"Seller not found\");\n            }\n            // Process in a transaction\n            const result = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].$transaction(async (prisma)=>{\n                const createdProducts = [];\n                // Process each product with its related data\n                for (const productData of products){\n                    const { productSKU, category, subcategory, name, description, brand, isApproved, aboutProduct, hsnCode, linkName, relatedProducts, gstPercentage } = productData;\n                    // Debug logging\n                    console.log(`Processing product ${productSKU}:`, {\n                        category,\n                        subcategory,\n                        hasSubcategory: !!subcategory,\n                        subcategoryType: typeof subcategory\n                    });\n                    // Determine the final category to use for the product\n                    // If subcategory exists, use subcategory; otherwise use main category\n                    const finalCategoryName = subcategory || category;\n                    // Get or create the main category first (case-insensitive lookup)\n                    let mainCategory = await prisma.category.findFirst({\n                        where: {\n                            name: {\n                                equals: category,\n                                mode: 'insensitive'\n                            }\n                        }\n                    });\n                    if (!mainCategory) {\n                        // Normalize the category name (capitalize first letter)\n                        const normalizedCategoryName = category.charAt(0).toUpperCase() + category.slice(1).toLowerCase();\n                        // Check again with normalized name\n                        mainCategory = await prisma.category.findFirst({\n                            where: {\n                                name: {\n                                    equals: normalizedCategoryName,\n                                    mode: 'insensitive'\n                                }\n                            }\n                        });\n                        if (!mainCategory) {\n                            mainCategory = await prisma.category.create({\n                                data: {\n                                    name: normalizedCategoryName,\n                                    description: `Category created during bulk upload for product ${productSKU}`\n                                }\n                            });\n                        }\n                    }\n                    let categoryId;\n                    // If subcategory is provided and different from main category\n                    if (subcategory && subcategory.trim() !== '' && subcategory !== category) {\n                        console.log(`Creating/finding subcategory \"${subcategory}\" under main category \"${category}\"`);\n                        // Check if subcategory exists under the main category (case-insensitive)\n                        let subcategoryRecord = await prisma.category.findFirst({\n                            where: {\n                                name: {\n                                    equals: subcategory,\n                                    mode: 'insensitive'\n                                },\n                                parentCategoryId: mainCategory.id\n                            }\n                        });\n                        if (!subcategoryRecord) {\n                            // Normalize the subcategory name\n                            const normalizedSubcategoryName = subcategory.charAt(0).toUpperCase() + subcategory.slice(1).toLowerCase();\n                            // Check again with normalized name\n                            subcategoryRecord = await prisma.category.findFirst({\n                                where: {\n                                    name: {\n                                        equals: normalizedSubcategoryName,\n                                        mode: 'insensitive'\n                                    },\n                                    parentCategoryId: mainCategory.id\n                                }\n                            });\n                            if (!subcategoryRecord) {\n                                console.log(`Creating new subcategory \"${normalizedSubcategoryName}\" under main category \"${category}\"`);\n                                // Create subcategory under the main category\n                                subcategoryRecord = await prisma.category.create({\n                                    data: {\n                                        name: normalizedSubcategoryName,\n                                        description: `Subcategory created during bulk upload for product ${productSKU}`,\n                                        parentCategoryId: mainCategory.id\n                                    }\n                                });\n                            } else {\n                                console.log(`Found existing subcategory \"${normalizedSubcategoryName}\" under main category \"${category}\"`);\n                            }\n                        } else {\n                            console.log(`Found existing subcategory \"${subcategory}\" under main category \"${category}\"`);\n                        }\n                        categoryId = subcategoryRecord.id;\n                        console.log(`Using subcategory ID: ${categoryId}`);\n                    } else {\n                        // Use main category as the product category\n                        categoryId = mainCategory.id;\n                        console.log(`Using main category ID: ${categoryId} (no subcategory or subcategory same as main category)`);\n                    }\n                    // Get product variants for this product\n                    const productVariants = variants.filter((v)=>v.productSKU === productSKU);\n                    try {\n                        // Create product with all related data in a single operation\n                        const product = await prisma.product.create({\n                            data: {\n                                productSKU,\n                                categoryId,\n                                name,\n                                description,\n                                isApproved: isApproved || false,\n                                aboutProduct: aboutProduct ? aboutProduct : null,\n                                brand: brand || null,\n                                hsnCode: hsnCode || null,\n                                linkName: linkName || null,\n                                relatedProducts: relatedProducts ? relatedProducts : null,\n                                sellerId,\n                                variants: {\n                                    create: productVariants.map((variant)=>({\n                                            productVariantSKU: variant.productVariantSKU,\n                                            title: variant.title,\n                                            description: variant.description,\n                                            price: new _prisma_client__WEBPACK_IMPORTED_MODULE_2__.Prisma.Decimal(variant.price),\n                                            stockQuantity: variant.stockQuantity,\n                                            variantType: variant.variantType,\n                                            variantValue: String(variant.variantValue),\n                                            additionalPrice: new _prisma_client__WEBPACK_IMPORTED_MODULE_2__.Prisma.Decimal(variant.additionalPrice || 0),\n                                            productWeight: variant.productWeight ? new _prisma_client__WEBPACK_IMPORTED_MODULE_2__.Prisma.Decimal(variant.productWeight) : null\n                                        }))\n                                }\n                            },\n                            include: {\n                                variants: true\n                            }\n                        });\n                        // Create GST if provided\n                        if (gstPercentage) {\n                            await prisma.gST.create({\n                                data: {\n                                    productId: product.id,\n                                    percentage: new _prisma_client__WEBPACK_IMPORTED_MODULE_2__.Prisma.Decimal(gstPercentage)\n                                }\n                            });\n                        }\n                        // After creating the product and variants, create the images and discounts\n                        for (const variant of product.variants){\n                            const variantImagesForVariant = variantImages.filter((img)=>img.productVariantSKU === variant.productVariantSKU);\n                            if (variantImagesForVariant.length > 0) {\n                                const imageData = variantImagesForVariant.map((image)=>({\n                                        productVariantId: variant.id,\n                                        imageUrl: image.imageUrl,\n                                        isPrimary: image.isPrimary || false\n                                    }));\n                                await prisma.productVariantImage.createMany({\n                                    data: imageData\n                                });\n                            }\n                            const variantDiscountsForVariant = variantDiscounts.filter((disc)=>disc.productVariantSKU === variant.productVariantSKU);\n                            if (variantDiscountsForVariant.length > 0) {\n                                await prisma.productDiscount.createMany({\n                                    data: variantDiscountsForVariant.map((discount)=>({\n                                            productVariantId: variant.id,\n                                            discountType: discount.discountType,\n                                            discountValue: new _prisma_client__WEBPACK_IMPORTED_MODULE_2__.Prisma.Decimal(discount.discountValue),\n                                            startDate: new Date(discount.startDate),\n                                            endDate: new Date(discount.endDate)\n                                        }))\n                                });\n                            }\n                        }\n                        // Fetch the complete product with all relations\n                        const completeProduct = await prisma.product.findUnique({\n                            where: {\n                                id: product.id\n                            },\n                            include: {\n                                variants: {\n                                    include: {\n                                        discounts: true,\n                                        ProductVariantImage: true\n                                    }\n                                },\n                                GST: true\n                            }\n                        });\n                        if (completeProduct) {\n                            createdProducts.push(completeProduct);\n                        }\n                    } catch (error) {\n                        const prismaError = error;\n                        if (prismaError.code === \"P2002\") {\n                            throw {\n                                name: \"UniqueConstraintError\",\n                                message: \"A product with this SKU already exists\",\n                                details: prismaError\n                            };\n                        }\n                        throw error;\n                    }\n                }\n                return createdProducts;\n            }, {\n                maxWait: 10000,\n                timeout: 30000\n            });\n            return result;\n        } catch (error) {\n            console.error(\"Bulk upload error:\", error);\n            // Handle different types of errors\n            if (error.name === \"ValidationError\") {\n                return {\n                    success: false,\n                    error: \"Validation Error\",\n                    details: error.errors\n                };\n            }\n            if (error.name === \"UniqueConstraintError\") {\n                return {\n                    success: false,\n                    error: \"Duplicate Entry Error\",\n                    details: error.message\n                };\n            }\n            throw error;\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbW9kdWxlcy9zZXJ2aWNlcy9Qcm9kdWN0U2VydmljZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFROEI7QUFDUDtBQUMrQjtBQXNEL0MsTUFBTUc7SUFDWCxNQUFNQyxjQUNKQyxXQUE2RCxFQUM3RDtRQUNBLElBQUk7WUFDRixNQUFNLEVBQUVDLFFBQVEsRUFBRUMsR0FBRyxFQUFFLEdBQUdDLGFBQWEsR0FBR0g7WUFFMUMsSUFBSSxDQUFDQyxZQUFZQSxTQUFTRyxNQUFNLEtBQUssR0FBRztnQkFDdEMsTUFBTSxJQUFJQyxNQUFNO1lBQ2xCO1lBRUFDLFFBQVFDLEdBQUcsQ0FBQywrQkFBK0JKO1lBRTNDLElBQUksQ0FBQ0EsWUFBWUssVUFBVSxFQUFFO2dCQUMzQixNQUFNLElBQUlILE1BQU07WUFDbEI7WUFFQSxrRUFBa0U7WUFDbEUsTUFBTUksZ0JBQWdCLE1BQU1kLCtDQUFFQSxDQUFDYyxhQUFhLENBQUNDLFVBQVUsQ0FBQztnQkFDdERDLE9BQU87b0JBQUVDLElBQUlULFlBQVlVLFFBQVE7Z0JBQUM7WUFDcEM7WUFFQSxJQUFJLENBQUNKLGVBQWU7Z0JBQ2xCLE1BQU0sSUFBSUosTUFBTTtZQUNsQjtZQUVBLE1BQU1TLFVBQVUsTUFBTW5CLCtDQUFFQSxDQUFDb0IsWUFBWSxDQUFDLE9BQU9DO2dCQUMzQywyQkFBMkI7Z0JBQzNCLE1BQU1DLGFBQWEsTUFBTUQsT0FBT0YsT0FBTyxDQUFDSSxNQUFNLENBQUM7b0JBQzdDQyxNQUFNO3dCQUNKWCxZQUFZTCxZQUFZSyxVQUFVO3dCQUNsQ1ksTUFBTWpCLFlBQVlpQixJQUFJO3dCQUN0QkMsYUFBYWxCLFlBQVlrQixXQUFXO3dCQUNwQ0MsWUFBWW5CLFlBQVltQixVQUFVO3dCQUNsQ1QsVUFBVVYsWUFBWVUsUUFBUTt3QkFDOUJVLE9BQU9wQixZQUFZb0IsS0FBSzt3QkFDeEJDLFNBQVNyQixZQUFZcUIsT0FBTyxJQUFJO3dCQUNoQ0MsWUFBWXRCLFlBQVlzQixVQUFVLElBQUk7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QUNMK0osU0FBUztvQkFDVHJHLE9BQU87b0JBQ1BvRyxTQUFTLE1BQTJCRSxNQUFNO2dCQUM1QztZQUNGO1lBRUEsSUFBSSxNQUFpQ2hLLElBQUksS0FBSyx5QkFBeUI7Z0JBQ3JFLE9BQU87b0JBQ0wrSixTQUFTO29CQUNUckcsT0FBTztvQkFDUG9HLFNBQVMsTUFBaUNqRyxPQUFPO2dCQUNuRDtZQUNGO1lBRUEsTUFBTUg7UUFDUjtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIi9ob21lL3dlYm5veC9nb2t1bCBpbmRyYW5paWUvd2Vic2l0ZS9zcmMvbW9kdWxlcy9zZXJ2aWNlcy9Qcm9kdWN0U2VydmljZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBJUHJvZHVjdCxcbiAgSVByb2R1Y3RJbWFnZSxcbiAgSVByb2R1Y3RWYXJpYW50LFxuICBJUHJvZHVjdERpc2NvdW50LFxuICBJUHJvZHVjdFZhcmlhbnREaXNjb3VudCxcbiAgSVByb2R1Y3RWYXJpYW50SW1hZ2UsXG59IGZyb20gXCIuLi9tb2RlbHMvUHJvZHVjdFwiO1xuaW1wb3J0IGRiIGZyb20gXCIuLi8uLi9saWIvZGJcIjtcbmltcG9ydCBfIGZyb20gXCJsb2Rhc2hcIjtcbmltcG9ydCB7IERpc2NvdW50VHlwZSwgUHJpc21hIH0gZnJvbSBcIkBwcmlzbWEvY2xpZW50XCI7XG5pbXBvcnQgeyBsb2cgfSBmcm9tIFwibm9kZTpjb25zb2xlXCI7XG5cbmludGVyZmFjZSBCdWxrVXBsb2FkRGF0YSB7XG4gIHByb2R1Y3RzOiBBcnJheTx7XG4gICAgcHJvZHVjdFNLVTogc3RyaW5nO1xuICAgIGNhdGVnb3J5OiBzdHJpbmc7XG4gICAgc3ViY2F0ZWdvcnk/OiBzdHJpbmc7XG4gICAgbmFtZTogc3RyaW5nO1xuICAgIGRlc2NyaXB0aW9uPzogc3RyaW5nO1xuICAgIGJyYW5kPzogc3RyaW5nO1xuICAgIGlzQXBwcm92ZWQ/OiBib29sZWFuO1xuICAgIGFib3V0UHJvZHVjdD86IHN0cmluZztcbiAgICBoc25Db2RlPzogc3RyaW5nO1xuICAgIGxpbmtOYW1lPzogc3RyaW5nO1xuICAgIHJlbGF0ZWRQcm9kdWN0cz86IEFycmF5PHtsaW5rTmFtZTogc3RyaW5nOyB1cmw6IHN0cmluZ30+O1xuICAgIGdzdFBlcmNlbnRhZ2U/OiBudW1iZXI7XG4gIH0+O1xuICB2YXJpYW50czogQXJyYXk8e1xuICAgIHByb2R1Y3RTS1U6IHN0cmluZztcbiAgICBwcm9kdWN0VmFyaWFudFNLVTogc3RyaW5nO1xuICAgIHRpdGxlOiBzdHJpbmc7XG4gICAgZGVzY3JpcHRpb24/OiBzdHJpbmc7XG4gICAgcHJpY2U6IG51bWJlcjtcbiAgICBzdG9ja1F1YW50aXR5OiBudW1iZXI7XG4gICAgdmFyaWFudFR5cGU6IHN0cmluZztcbiAgICB2YXJpYW50VmFsdWU6IHN0cmluZztcbiAgICBwcm9kdWN0V2VpZ2h0PzogbnVtYmVyO1xuICAgIGFkZGl0aW9uYWxQcmljZT86IG51bWJlcjtcbiAgfT47XG4gIHZhcmlhbnRJbWFnZXM6IEFycmF5PElQcm9kdWN0VmFyaWFudEltYWdlPjtcbiAgdmFyaWFudERpc2NvdW50czogQXJyYXk8SVByb2R1Y3RWYXJpYW50RGlzY291bnQ+O1xuICBzZWxsZXJJZDogc3RyaW5nO1xufVxuXG5pbnRlcmZhY2UgVmFsaWRhdGlvbkVycm9yIHtcbiAgbmFtZTogXCJWYWxpZGF0aW9uRXJyb3JcIjtcbiAgbWVzc2FnZTogc3RyaW5nO1xuICBlcnJvcnM6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nW10gfTtcbn1cblxuaW50ZXJmYWNlIFVuaXF1ZUNvbnN0cmFpbnRFcnJvciB7XG4gIG5hbWU6IFwiVW5pcXVlQ29uc3RyYWludEVycm9yXCI7XG4gIG1lc3NhZ2U6IHN0cmluZztcbiAgZGV0YWlsczogYW55O1xufVxuXG5pbnRlcmZhY2UgUHJpc21hRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gIGNvZGU/OiBzdHJpbmc7XG4gIG1ldGE/OiB7XG4gICAgdGFyZ2V0Pzogc3RyaW5nW107XG4gIH07XG59XG5cbmV4cG9ydCBjbGFzcyBQcm9kdWN0U2VydmljZSB7XG4gIGFzeW5jIENyZWF0ZVByb2R1Y3QoXG4gICAgcHJvZHVjdERhdGE6IE9taXQ8SVByb2R1Y3QsIFwiaWRcIiB8IFwiY3JlYXRlZEF0XCIgfCBcInVwZGF0ZWRBdFwiPlxuICApIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyB2YXJpYW50cywgR1NULCAuLi5wcm9kdWN0SW5mbyB9ID0gcHJvZHVjdERhdGE7XG5cbiAgICAgIGlmICghdmFyaWFudHMgfHwgdmFyaWFudHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkF0IGxlYXN0IG9uZSB2YXJpYW50IGlzIHJlcXVpcmVkXCIpO1xuICAgICAgfVxuXG4gICAgICBjb25zb2xlLmxvZyhcIkNyZWF0aW5nIHByb2R1Y3Qgd2l0aCBkYXRhOlwiLCBwcm9kdWN0SW5mbyk7XG5cbiAgICAgIGlmICghcHJvZHVjdEluZm8uY2F0ZWdvcnlJZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJjYXRlZ29yeUlkIGlzIHJlcXVpcmVkXCIpO1xuICAgICAgfVxuXG4gICAgICAvLyBGaXJzdCBnZXQgdGhlIHNlbGxlciBwcm9maWxlIHRvIGdldCB0aGUgc2VsbGVyUHJvZmlsZUlkIGZvciBHU1RcbiAgICAgIGNvbnN0IHNlbGxlclByb2ZpbGUgPSBhd2FpdCBkYi5zZWxsZXJQcm9maWxlLmZpbmRVbmlxdWUoe1xuICAgICAgICB3aGVyZTogeyBpZDogcHJvZHVjdEluZm8uc2VsbGVySWQgfSxcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIXNlbGxlclByb2ZpbGUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU2VsbGVyIHByb2ZpbGUgbm90IGZvdW5kXCIpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBwcm9kdWN0ID0gYXdhaXQgZGIuJHRyYW5zYWN0aW9uKGFzeW5jIChwcmlzbWEpID0+IHtcbiAgICAgICAgLy8gRmlyc3QgY3JlYXRlIHRoZSBwcm9kdWN0XG4gICAgICAgIGNvbnN0IG5ld1Byb2R1Y3QgPSBhd2FpdCBwcmlzbWEucHJvZHVjdC5jcmVhdGUoe1xuICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIGNhdGVnb3J5SWQ6IHByb2R1Y3RJbmZvLmNhdGVnb3J5SWQsXG4gICAgICAgICAgICBuYW1lOiBwcm9kdWN0SW5mby5uYW1lLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IHByb2R1Y3RJbmZvLmRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgcHJvZHVjdFNLVTogcHJvZHVjdEluZm8ucHJvZHVjdFNLVSxcbiAgICAgICAgICAgIHNlbGxlcklkOiBwcm9kdWN0SW5mby5zZWxsZXJJZCxcbiAgICAgICAgICAgIGJyYW5kOiBwcm9kdWN0SW5mby5icmFuZCxcbiAgICAgICAgICAgIGhzbkNvZGU6IHByb2R1Y3RJbmZvLmhzbkNvZGUgfHwgbnVsbCxcbiAgICAgICAgICAgIGlzQXBwcm92ZWQ6IHByb2R1Y3RJbmZvLmlzQXBwcm92ZWQgfHwgZmFsc2UsXG4gICAgICAgIGFib3V0UHJvZHVjdDogcHJvZHVjdEluZm8uYWJvdXRQcm9kdWN0IHx8IG51bGwsXG4gICAgICAgIGxpbmtOYW1lOiBwcm9kdWN0SW5mby5saW5rTmFtZSB8fCBudWxsLFxuICAgICAgICByZWxhdGVkUHJvZHVjdHM6IHByb2R1Y3RJbmZvLnJlbGF0ZWRQcm9kdWN0cyA/IHByb2R1Y3RJbmZvLnJlbGF0ZWRQcm9kdWN0cyBhcyBhbnkgOiBudWxsLFxuICAgICAgICB3aG9sZXNhbGU6IHByb2R1Y3RJbmZvLndob2xlc2FsZSA/PyBmYWxzZSxcbiAgICAgICAgICB9LFxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBJZiBHU1QgaXMgcHJvdmlkZWQsIGNyZWF0ZSBpdFxuICAgICAgICBpZiAoR1NUICYmIEdTVC5wZXJjZW50YWdlKSB7XG4gICAgICAgICAgYXdhaXQgcHJpc21hLmdTVC5jcmVhdGUoe1xuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICBwcm9kdWN0SWQ6IG5ld1Byb2R1Y3QuaWQsXG4gICAgICAgICAgICAgIHBlcmNlbnRhZ2U6IG5ldyBQcmlzbWEuRGVjaW1hbChHU1QucGVyY2VudGFnZSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENyZWF0ZSBhbGwgdmFyaWFudHMgZmlyc3RcbiAgICAgICAgY29uc3QgY3JlYXRlZFZhcmlhbnRzID0gYXdhaXQgcHJpc21hLnByb2R1Y3RWYXJpYW50LmNyZWF0ZU1hbnkoe1xuICAgICAgICAgIGRhdGE6IHZhcmlhbnRzLm1hcCh2YXJpYW50ID0+ICh7XG4gICAgICAgICAgICBwcm9kdWN0SWQ6IG5ld1Byb2R1Y3QuaWQsXG4gICAgICAgICAgICBwcm9kdWN0VmFyaWFudFNLVTogdmFyaWFudC5wcm9kdWN0VmFyaWFudFNLVSxcbiAgICAgICAgICAgIHRpdGxlOiB2YXJpYW50LnRpdGxlLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IHZhcmlhbnQuZGVzY3JpcHRpb24sXG4gICAgICAgICAgICBwcmljZTogbmV3IFByaXNtYS5EZWNpbWFsKHZhcmlhbnQucHJpY2UpLFxuICAgICAgICAgICAgc3RvY2tRdWFudGl0eTogdmFyaWFudC5zdG9ja1F1YW50aXR5LFxuICAgICAgICAgICAgdmFyaWFudFR5cGU6IHZhcmlhbnQudmFyaWFudFR5cGUsXG4gICAgICAgICAgICB2YXJpYW50VmFsdWU6IHZhcmlhbnQudmFyaWFudFZhbHVlLFxuICAgICAgICAgICAgcHJvZHVjdFdlaWdodDogdmFyaWFudC5wcm9kdWN0V2VpZ2h0ID8gbmV3IFByaXNtYS5EZWNpbWFsKHZhcmlhbnQucHJvZHVjdFdlaWdodCkgOiBudWxsLFxuICAgICAgICAgICAgYWRkaXRpb25hbFByaWNlOiBuZXcgUHJpc21hLkRlY2ltYWwodmFyaWFudC5hZGRpdGlvbmFsUHJpY2UgfHwgMCksXG4gICAgICAgICAgICBoZWlnaHQ6IHZhcmlhbnQuaGVpZ2h0ICE9PSB1bmRlZmluZWQgPyBuZXcgUHJpc21hLkRlY2ltYWwodmFyaWFudC5oZWlnaHQpIDogbnVsbCxcbiAgICAgICAgICAgIHdpZHRoOiB2YXJpYW50LndpZHRoICE9PSB1bmRlZmluZWQgPyBuZXcgUHJpc21hLkRlY2ltYWwodmFyaWFudC53aWR0aCkgOiBudWxsLFxuICAgICAgICAgICAgYnJlYWR0aDogdmFyaWFudC5icmVhZHRoICE9PSB1bmRlZmluZWQgPyBuZXcgUHJpc21hLkRlY2ltYWwodmFyaWFudC5icmVhZHRoKSA6IG51bGwsXG4gICAgICAgICAgfSkpLFxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBHZXQgdGhlIGNyZWF0ZWQgdmFyaWFudHMgd2l0aCB0aGVpciBJRHNcbiAgICAgICAgY29uc3QgdmFyaWFudHNXaXRoSWRzID0gYXdhaXQgcHJpc21hLnByb2R1Y3RWYXJpYW50LmZpbmRNYW55KHtcbiAgICAgICAgICB3aGVyZTogeyBwcm9kdWN0SWQ6IG5ld1Byb2R1Y3QuaWQgfSxcbiAgICAgICAgICBzZWxlY3Q6IHsgaWQ6IHRydWUsIHByb2R1Y3RWYXJpYW50U0tVOiB0cnVlIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gUHJlcGFyZSBhbGwgaW1hZ2VzIGFuZCBkaXNjb3VudHMgZGF0YVxuICAgICAgICBjb25zdCBhbGxJbWFnZXM6IGFueVtdID0gW107XG4gICAgICAgIGNvbnN0IGFsbERpc2NvdW50czogYW55W10gPSBbXTtcblxuICAgICAgICBmb3IgKGNvbnN0IHZhcmlhbnQgb2YgdmFyaWFudHMpIHtcbiAgICAgICAgICBjb25zdCB2YXJpYW50V2l0aElkID0gdmFyaWFudHNXaXRoSWRzLmZpbmQodiA9PiB2LnByb2R1Y3RWYXJpYW50U0tVID09PSB2YXJpYW50LnByb2R1Y3RWYXJpYW50U0tVKTtcbiAgICAgICAgICBpZiAoIXZhcmlhbnRXaXRoSWQpIGNvbnRpbnVlO1xuXG4gICAgICAgICAgLy8gQ29sbGVjdCBpbWFnZXNcbiAgICAgICAgICBpZiAodmFyaWFudC5pbWFnZXMgJiYgdmFyaWFudC5pbWFnZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgYWxsSW1hZ2VzLnB1c2goLi4udmFyaWFudC5pbWFnZXMubWFwKGltYWdlID0+ICh7XG4gICAgICAgICAgICAgIHByb2R1Y3RWYXJpYW50SWQ6IHZhcmlhbnRXaXRoSWQuaWQsXG4gICAgICAgICAgICAgIGltYWdlVXJsOiBpbWFnZS5pbWFnZVVybCxcbiAgICAgICAgICAgICAgaXNQcmltYXJ5OiBpbWFnZS5pc1ByaW1hcnkgfHwgZmFsc2UsXG4gICAgICAgICAgICB9KSkpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIENvbGxlY3QgZGlzY291bnRzXG4gICAgICAgICAgaWYgKHZhcmlhbnQuZGlzY291bnRzICYmIHZhcmlhbnQuZGlzY291bnRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGFsbERpc2NvdW50cy5wdXNoKC4uLnZhcmlhbnQuZGlzY291bnRzLm1hcChkaXNjb3VudCA9PiAoe1xuICAgICAgICAgICAgICBwcm9kdWN0VmFyaWFudElkOiB2YXJpYW50V2l0aElkLmlkLFxuICAgICAgICAgICAgICBkaXNjb3VudFR5cGU6IGRpc2NvdW50LmRpc2NvdW50VHlwZSxcbiAgICAgICAgICAgICAgZGlzY291bnRWYWx1ZTogbmV3IFByaXNtYS5EZWNpbWFsKGRpc2NvdW50LmRpc2NvdW50VmFsdWUpLFxuICAgICAgICAgICAgICBzdGFydERhdGU6IG5ldyBEYXRlKGRpc2NvdW50LnN0YXJ0RGF0ZSksXG4gICAgICAgICAgICAgIGVuZERhdGU6IG5ldyBEYXRlKGRpc2NvdW50LmVuZERhdGUpLFxuICAgICAgICAgICAgfSkpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDcmVhdGUgYWxsIGltYWdlcyBhbmQgZGlzY291bnRzIGluIGJ1bGtcbiAgICAgICAgaWYgKGFsbEltYWdlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgYXdhaXQgcHJpc21hLnByb2R1Y3RWYXJpYW50SW1hZ2UuY3JlYXRlTWFueSh7XG4gICAgICAgICAgICBkYXRhOiBhbGxJbWFnZXMsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoYWxsRGlzY291bnRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBhd2FpdCBwcmlzbWEucHJvZHVjdERpc2NvdW50LmNyZWF0ZU1hbnkoe1xuICAgICAgICAgICAgZGF0YTogYWxsRGlzY291bnRzLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUmV0dXJuIHRoZSBjb21wbGV0ZSBwcm9kdWN0IHdpdGggYWxsIHJlbGF0aW9uc1xuICAgICAgICByZXR1cm4gYXdhaXQgcHJpc21hLnByb2R1Y3QuZmluZFVuaXF1ZSh7XG4gICAgICAgICAgd2hlcmU6IHsgaWQ6IG5ld1Byb2R1Y3QuaWQgfSxcbiAgICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgICB2YXJpYW50czoge1xuICAgICAgICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgICAgICAgZGlzY291bnRzOiB0cnVlLFxuICAgICAgICAgICAgICAgIFByb2R1Y3RWYXJpYW50SW1hZ2U6IHRydWUsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgR1NUOiB0cnVlLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgfSwge1xuICAgICAgICBtYXhXYWl0OiAxMDAwMCwgLy8gMTAgc2Vjb25kc1xuICAgICAgICB0aW1lb3V0OiAzMDAwMCwgLy8gMzAgc2Vjb25kc1xuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBwcm9kdWN0O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBDcmVhdGVQcm9kdWN0IGVycm9yOmAsIGVycm9yKTtcbiAgICAgIFxuICAgICAgLy8gSGFuZGxlIHNwZWNpZmljIFByaXNtYSB0cmFuc2FjdGlvbiBlcnJvcnNcbiAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIFByaXNtYS5QcmlzbWFDbGllbnRLbm93blJlcXVlc3RFcnJvcikge1xuICAgICAgICBzd2l0Y2ggKGVycm9yLmNvZGUpIHtcbiAgICAgICAgICBjYXNlICdQMjAyOCc6XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RyYW5zYWN0aW9uIHRpbWVvdXQ6IFRoZSBvcGVyYXRpb24gdG9vayB0b28gbG9uZyB0byBjb21wbGV0ZS4gUGxlYXNlIHRyeSBhZ2FpbiB3aXRoIGZld2VyIHZhcmlhbnRzIG9yIGltYWdlcy4nKTtcbiAgICAgICAgICBjYXNlICdQMjAwMic6XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0EgcHJvZHVjdCB3aXRoIHRoaXMgU0tVIGFscmVhZHkgZXhpc3RzLiBQbGVhc2UgdXNlIGEgZGlmZmVyZW50IFNLVS4nKTtcbiAgICAgICAgICBjYXNlICdQMjAwMyc6XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgY2F0ZWdvcnkgb3Igc2VsbGVyIHJlZmVyZW5jZS4gUGxlYXNlIGNoZWNrIHlvdXIgc2VsZWN0aW9ucy4nKTtcbiAgICAgICAgICBjYXNlICdQMjAyNCc6XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RyYW5zYWN0aW9uIGZhaWxlZCBkdWUgdG8gYSBkYXRhYmFzZSBjb25zdHJhaW50LiBQbGVhc2UgY2hlY2sgeW91ciBkYXRhLicpO1xuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYERhdGFiYXNlIGVycm9yOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gSGFuZGxlIG90aGVyIGtub3duIGVycm9yc1xuICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICB9XG4gICAgICBcbiAgICAgIHRocm93IG5ldyBFcnJvcignQW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnJlZCB3aGlsZSBjcmVhdGluZyB0aGUgcHJvZHVjdC4nKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBHZXRQcm9kdWN0QnlJZChpZDogc3RyaW5nLCB3aXRoRGlzY291bnRzOiBib29sZWFuLCBpbmNsdWRlVW5hcHByb3ZlZDogYm9vbGVhbiA9IGZhbHNlKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHdoZXJlQ2xhdXNlOiBhbnkgPSB7IGlkIH07XG4gICAgICBcbiAgICAgIC8vIE9ubHkgZmlsdGVyIGJ5IGFwcHJvdmFsIHN0YXR1cyBpZiB3ZSBkb24ndCB3YW50IHRvIGluY2x1ZGUgdW5hcHByb3ZlZCBwcm9kdWN0c1xuICAgICAgaWYgKCFpbmNsdWRlVW5hcHByb3ZlZCkge1xuICAgICAgICB3aGVyZUNsYXVzZS5pc0FwcHJvdmVkID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcHJvZHVjdCA9IGF3YWl0IGRiLnByb2R1Y3QuZmluZFVuaXF1ZSh7XG4gICAgICAgIHdoZXJlOiB3aGVyZUNsYXVzZSxcbiAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgIHZhcmlhbnRzOiB7XG4gICAgICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgICAgIFByb2R1Y3RWYXJpYW50SW1hZ2U6IHRydWUsXG4gICAgICAgICAgICAgIGRpc2NvdW50czogdHJ1ZSAgLy8gQWx3YXlzIGluY2x1ZGUgZGlzY291bnRzXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAgc2VsbGVyOiB0cnVlLFxuICAgICAgICAgIEdTVDogdHJ1ZSxcbiAgICAgICAgICBpbWFnZXM6IHRydWUsXG4gICAgICAgICAgY2F0ZWdvcnk6IHtcbiAgICAgICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICAgICAgcGFyZW50Q2F0ZWdvcnk6IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGlmICghcHJvZHVjdCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQcm9kdWN0IG5vdCBmb3VuZFwiKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgcmV0dXJuIHByb2R1Y3Q7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJHZXRQcm9kdWN0QnlJZCBlcnJvcjpcIiwgZXJyb3IpO1xuICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IgJiYgZXJyb3IubWVzc2FnZSA9PT0gXCJQcm9kdWN0IG5vdCBmb3VuZFwiKSB7XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgICAgfVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIGdldCBwcm9kdWN0XCIpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIEdldFByb2R1Y3RWYXJpYW50QnlJZChpZDogc3RyaW5nKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHByb2R1Y3RWYXJpYW50ID0gYXdhaXQgZGIucHJvZHVjdFZhcmlhbnQuZmluZFVuaXF1ZSh7XG4gICAgICAgIHdoZXJlOiB7IGlkIH0sXG4gICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICBwcm9kdWN0OiB7XG4gICAgICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgICAgIGltYWdlczogdHJ1ZSxcbiAgICAgICAgICAgICAgcmV2aWV3czogdHJ1ZSxcbiAgICAgICAgICAgICAgdmFyaWFudHM6IHtcbiAgICAgICAgICAgICAgICBpbmNsdWRlOiB7IFByb2R1Y3RWYXJpYW50SW1hZ2U6IHRydWUsIGRpc2NvdW50czogdHJ1ZSB9LFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBHU1Q6IHRydWUsXG4gICAgICAgICAgICAgIHNlbGxlcjoge1xuICAgICAgICAgICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICAgICAgICAgIFBpY2t1cGxvY2F0aW9uOiB7IHdoZXJlOiB7IGlzRGVmYXVsdDogdHJ1ZSB9LCB0YWtlOiAxIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyBDaGVjayBpZiB2YXJpYW50IGV4aXN0cyBhbmQgcHJvZHVjdCBpcyBhcHByb3ZlZFxuICAgICAgaWYgKF8uaXNFbXB0eShwcm9kdWN0VmFyaWFudCkgfHwgIXByb2R1Y3RWYXJpYW50LnByb2R1Y3QgfHwgIXByb2R1Y3RWYXJpYW50LnByb2R1Y3QuaXNBcHByb3ZlZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQcm9kdWN0IHZhcmlhbnQgbm90IGZvdW5kXCIpO1xuICAgICAgfVxuICAgICAgXG4gICAgICByZXR1cm4gcHJvZHVjdFZhcmlhbnQ7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIGdldCBwcm9kdWN0IHZhcmlhbnRcIik7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgVXBkYXRlUHJvZHVjdChcbiAgICBpZDogc3RyaW5nLFxuICAgIHByb2R1Y3REYXRhOiBQYXJ0aWFsPFxuICAgICAgT21pdDxJUHJvZHVjdCwgXCJpZFwiIHwgXCJjcmVhdGVkQXRcIiB8IFwidXBkYXRlZEF0XCIgfCBcInNlbGxlcklkXCI+XG4gICAgPlxuICApIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBHU1QsIHZhcmlhbnRzLCBkaXNjb3VudHMsIGltYWdlcywgLi4ucHJvZHVjdEluZm8gfSA9IHByb2R1Y3REYXRhO1xuXG4gICAgICAvLyBGaXJzdCBjaGVjayBpZiBwcm9kdWN0IGV4aXN0c1xuICAgICAgY29uc3QgZXhpc3RpbmdQcm9kdWN0ID0gYXdhaXQgZGIucHJvZHVjdC5maW5kVW5pcXVlKHtcbiAgICAgICAgd2hlcmU6IHsgaWQgfSxcbiAgICAgICAgaW5jbHVkZTogeyBHU1Q6IHRydWUgfSxcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIWV4aXN0aW5nUHJvZHVjdCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQcm9kdWN0IG5vdCBmb3VuZFwiKTtcbiAgICAgIH1cblxuICAgICAgLy8gSGFuZGxlIEdTVCB1cGRhdGUgc2VwYXJhdGVseSB0byBhdm9pZCB0cmFuc2FjdGlvbiB0aW1lb3V0XG4gICAgICBpZiAoR1NUKSB7XG4gICAgICAgIGF3YWl0IGRiLmdTVC51cHNlcnQoe1xuICAgICAgICAgIHdoZXJlOiB7IHByb2R1Y3RJZDogaWQgfSxcbiAgICAgICAgICBjcmVhdGU6IHtcbiAgICAgICAgICAgIHBlcmNlbnRhZ2U6IG5ldyBQcmlzbWEuRGVjaW1hbChHU1QucGVyY2VudGFnZSksXG4gICAgICAgICAgICBwcm9kdWN0SWQ6IGlkLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgdXBkYXRlOiB7XG4gICAgICAgICAgICBwZXJjZW50YWdlOiBuZXcgUHJpc21hLkRlY2ltYWwoR1NULnBlcmNlbnRhZ2UpLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICAvLyBPbmx5IHVwZGF0ZSBiYXNpYyBwcm9kdWN0IGZpZWxkcywgZXhjbHVkaW5nIHJlbGF0aW9uYWwgZGF0YVxuICAgICAgY29uc3QgYWxsb3dlZEZpZWxkcyA9IHtcbiAgICAgICAgLi4uKHByb2R1Y3RJbmZvLnByb2R1Y3RTS1UgJiYgeyBwcm9kdWN0U0tVOiBwcm9kdWN0SW5mby5wcm9kdWN0U0tVIH0pLFxuICAgICAgICAuLi4ocHJvZHVjdEluZm8uY2F0ZWdvcnlJZCAmJiB7IGNhdGVnb3J5SWQ6IHByb2R1Y3RJbmZvLmNhdGVnb3J5SWQgfSksXG4gICAgICAgIC4uLihwcm9kdWN0SW5mby5uYW1lICYmIHsgbmFtZTogcHJvZHVjdEluZm8ubmFtZSB9KSxcbiAgICAgICAgLi4uKHByb2R1Y3RJbmZvLmRlc2NyaXB0aW9uICE9PSB1bmRlZmluZWQgJiYgeyBkZXNjcmlwdGlvbjogcHJvZHVjdEluZm8uZGVzY3JpcHRpb24gfSksXG4gICAgICAgIC4uLihwcm9kdWN0SW5mby5icmFuZCAhPT0gdW5kZWZpbmVkICYmIHsgYnJhbmQ6IHByb2R1Y3RJbmZvLmJyYW5kIH0pLFxuICAgICAgICAuLi4ocHJvZHVjdEluZm8uaXNBcHByb3ZlZCAhPT0gdW5kZWZpbmVkICYmIHsgaXNBcHByb3ZlZDogcHJvZHVjdEluZm8uaXNBcHByb3ZlZCB9KSxcbiAgICAgICAgLi4uKHByb2R1Y3RJbmZvLmFib3V0UHJvZHVjdCAhPT0gdW5kZWZpbmVkICYmIHsgYWJvdXRQcm9kdWN0OiBwcm9kdWN0SW5mby5hYm91dFByb2R1Y3QgfSksXG4gICAgICAuLi4ocHJvZHVjdEluZm8uaHNuQ29kZSAhPT0gdW5kZWZpbmVkICYmIHsgaHNuQ29kZTogcHJvZHVjdEluZm8uaHNuQ29kZSB9KSxcbiAgICAgIC4uLihwcm9kdWN0SW5mby5saW5rTmFtZSAhPT0gdW5kZWZpbmVkICYmIHsgbGlua05hbWU6IHByb2R1Y3RJbmZvLmxpbmtOYW1lIH0pLFxuICAgICAgLi4uKHByb2R1Y3RJbmZvLnJlbGF0ZWRQcm9kdWN0cyAhPT0gdW5kZWZpbmVkICYmIHsgcmVsYXRlZFByb2R1Y3RzOiBwcm9kdWN0SW5mby5yZWxhdGVkUHJvZHVjdHMgYXMgYW55IH0pLFxuICAgICAgLi4uKHByb2R1Y3RJbmZvLndob2xlc2FsZSAhPT0gdW5kZWZpbmVkICYmIHsgd2hvbGVzYWxlOiBwcm9kdWN0SW5mby53aG9sZXNhbGUgfSksXG4gICAgICB9IGFzIGFueTtcblxuICAgICAgLy8gVXBkYXRlIHByb2R1Y3RcbiAgICAgIGNvbnN0IHVwZGF0ZWRQcm9kdWN0ID0gYXdhaXQgZGIucHJvZHVjdC51cGRhdGUoe1xuICAgICAgICB3aGVyZTogeyBpZCB9LFxuICAgICAgICBkYXRhOiBhbGxvd2VkRmllbGRzLFxuICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgdmFyaWFudHM6IHtcbiAgICAgICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICAgICAgUHJvZHVjdFZhcmlhbnRJbWFnZTogdHJ1ZSxcbiAgICAgICAgICAgICAgZGlzY291bnRzOiB0cnVlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIEdTVDogdHJ1ZSxcbiAgICAgICAgICBpbWFnZXM6IHRydWUsXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHVwZGF0ZWRQcm9kdWN0O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiVXBkYXRlUHJvZHVjdCBlcnJvcjpcIiwgZXJyb3IpO1xuICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgUHJpc21hLlByaXNtYUNsaWVudEtub3duUmVxdWVzdEVycm9yKSB7XG4gICAgICAgIGlmIChlcnJvci5jb2RlID09PSBcIlAyMDI1XCIpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQcm9kdWN0IG5vdCBmb3VuZFwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXJyb3IuY29kZSA9PT0gXCJQMjAwMlwiKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRHVwbGljYXRlIHZhbHVlIGZvdW5kIGZvciBhIHVuaXF1ZSBmaWVsZFwiKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIHVwZGF0ZSBwcm9kdWN0XCIpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIERlbGV0ZVByb2R1Y3QoaWQ6IHN0cmluZykge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCBkYi4kdHJhbnNhY3Rpb24oYXN5bmMgKHByaXNtYSkgPT4ge1xuICAgICAgICBhd2FpdCBwcmlzbWEucHJvZHVjdEltYWdlLmRlbGV0ZU1hbnkoe1xuICAgICAgICAgIHdoZXJlOiB7IHByb2R1Y3RJZDogaWQgfSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgYXdhaXQgcHJpc21hLnByb2R1Y3RWYXJpYW50LmRlbGV0ZU1hbnkoe1xuICAgICAgICAgIHdoZXJlOiB7IHByb2R1Y3RJZDogaWQgfSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgYXdhaXQgcHJpc21hLnByb2R1Y3REaXNjb3VudC5kZWxldGVNYW55KHtcbiAgICAgICAgICB3aGVyZTogeyBwcm9kdWN0VmFyaWFudElkOiBpZCB9LFxuICAgICAgICB9KTtcblxuICAgICAgICBhd2FpdCBwcmlzbWEucHJvZHVjdC5kZWxldGUoe1xuICAgICAgICAgIHdoZXJlOiB7IGlkIH0sXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBkZWxldGUgcHJvZHVjdFwiKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBHZXRBbGxQcm9kdWN0cyh7XG4gICAgY2F0ZWdvcnlJZCxcbiAgICBmcm9tUHJpY2UsXG4gICAgdG9QcmljZSxcbiAgICBzZWFyY2gsXG4gICAgb25seURpc2NvdW50ZWQgPSBmYWxzZVxuICB9OiB7XG4gICAgY2F0ZWdvcnlJZD86IHN0cmluZztcbiAgICBmcm9tUHJpY2U/OiBudW1iZXI7XG4gICAgdG9QcmljZT86IG51bWJlcjtcbiAgICBzZWFyY2g/OiBzdHJpbmc7XG4gICAgb25seURpc2NvdW50ZWQ/OiBib29sZWFuO1xuICB9KSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGN1cnJlbnREYXRlID0gbmV3IERhdGUoKTtcbiAgICAgIFxuICAgICAgY29uc3QgZmlsdGVycyA9IHtcbiAgICAgICAgaXNBcHByb3ZlZDogdHJ1ZSwgLy8gT25seSBzaG93IGFwcHJvdmVkIHByb2R1Y3RzIHRvIHB1YmxpY1xuICAgICAgICAuLi4oY2F0ZWdvcnlJZCAmJiB7IGNhdGVnb3J5SWQgfSksXG4gICAgICB9O1xuXG4gICAgICBjb25zdCBwcm9kdWN0cyA9IGF3YWl0IGRiLnByb2R1Y3QuZmluZE1hbnkoe1xuICAgICAgICB3aGVyZToge1xuICAgICAgICAgIC4uLmZpbHRlcnMsXG4gICAgICAgICAgLi4uKHNlYXJjaCAmJiB7XG4gICAgICAgICAgICBPUjogW1xuICAgICAgICAgICAgICB7IG5hbWU6IHsgY29udGFpbnM6IHNlYXJjaCwgbW9kZTogXCJpbnNlbnNpdGl2ZVwiIGFzIGNvbnN0IH0gfSxcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB7IGNvbnRhaW5zOiBzZWFyY2gsIG1vZGU6IFwiaW5zZW5zaXRpdmVcIiBhcyBjb25zdCB9LFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY2F0ZWdvcnk6IHtcbiAgICAgICAgICAgICAgICAgIG5hbWU6IHsgY29udGFpbnM6IHNlYXJjaCwgbW9kZTogXCJpbnNlbnNpdGl2ZVwiIGFzIGNvbnN0IH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgfSksXG4gICAgICAgICAgLi4uKG9ubHlEaXNjb3VudGVkICYmIHtcbiAgICAgICAgICAgIHZhcmlhbnRzOiB7XG4gICAgICAgICAgICAgIHNvbWU6IHtcbiAgICAgICAgICAgICAgICBkaXNjb3VudHM6IHtcbiAgICAgICAgICAgICAgICAgIHNvbWU6IHtcbiAgICAgICAgICAgICAgICAgICAgQU5EOiBbXG4gICAgICAgICAgICAgICAgICAgICAgeyBzdGFydERhdGU6IHsgbHRlOiBjdXJyZW50RGF0ZSB9IH0sXG4gICAgICAgICAgICAgICAgICAgICAgeyBlbmREYXRlOiB7IGd0ZTogY3VycmVudERhdGUgfSB9XG4gICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgICB9LFxuICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgdmFyaWFudHM6IHtcbiAgICAgICAgICAgIHdoZXJlOiBvbmx5RGlzY291bnRlZCA/IHtcbiAgICAgICAgICAgICAgZGlzY291bnRzOiB7XG4gICAgICAgICAgICAgICAgc29tZToge1xuICAgICAgICAgICAgICAgICAgQU5EOiBbXG4gICAgICAgICAgICAgICAgICAgIHsgc3RhcnREYXRlOiB7IGx0ZTogY3VycmVudERhdGUgfSB9LFxuICAgICAgICAgICAgICAgICAgICB7IGVuZERhdGU6IHsgZ3RlOiBjdXJyZW50RGF0ZSB9IH1cbiAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgICAgIFByb2R1Y3RWYXJpYW50SW1hZ2U6IHRydWUsXG4gICAgICAgICAgICAgIGRpc2NvdW50czoge1xuICAgICAgICAgICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgICAgICAgICBBTkQ6IFtcbiAgICAgICAgICAgICAgICAgICAgeyBzdGFydERhdGU6IHsgbHRlOiBjdXJyZW50RGF0ZSB9IH0sXG4gICAgICAgICAgICAgICAgICAgIHsgZW5kRGF0ZTogeyBndGU6IGN1cnJlbnREYXRlIH0gfVxuICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgb3JkZXJCeToge1xuICAgICAgICAgICAgICAgICAgZGlzY291bnRWYWx1ZTogJ2Rlc2MnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNlbGxlcjogdHJ1ZSxcbiAgICAgICAgICBHU1Q6IHRydWUsXG4gICAgICAgICAgaW1hZ2VzOiB0cnVlLFxuICAgICAgICAgIHJldmlld3M6IHRydWUsXG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICAvLyBGaWx0ZXIgb3V0IHByb2R1Y3RzIHRoYXQgaGF2ZSBubyB2YXJpYW50cyB3aXRoIGRpc2NvdW50c1xuICAgICAgaWYgKG9ubHlEaXNjb3VudGVkKSB7XG4gICAgICAgIHJldHVybiBwcm9kdWN0cy5maWx0ZXIocHJvZHVjdCA9PiBcbiAgICAgICAgICBwcm9kdWN0LnZhcmlhbnRzLnNvbWUodmFyaWFudCA9PiB2YXJpYW50LmRpc2NvdW50cy5sZW5ndGggPiAwKVxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcHJvZHVjdHM7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIGdldCBwcm9kdWN0c1wiKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBHZXRQcm9kdWN0c0J5U2VsbGVyKHNlbGxlcklkOiBzdHJpbmcsIHNlYXJjaD86IHN0cmluZykge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBwcm9kdWN0cyA9IGF3YWl0IGRiLnByb2R1Y3QuZmluZE1hbnkoe1xuICAgICAgICB3aGVyZToge1xuICAgICAgICAgIHNlbGxlcklkLFxuICAgICAgICAgIC4uLihzZWFyY2ggJiYge1xuICAgICAgICAgICAgT1I6IFtcbiAgICAgICAgICAgICAgeyBwcm9kdWN0U0tVOiB7IGNvbnRhaW5zOiBzZWFyY2gsIG1vZGU6IFwiaW5zZW5zaXRpdmVcIiB9IH0sXG4gICAgICAgICAgICAgIHsgbmFtZTogeyBjb250YWluczogc2VhcmNoLCBtb2RlOiBcImluc2Vuc2l0aXZlXCIgfSB9LFxuICAgICAgICAgICAgICB7IGhzbkNvZGU6IHsgY29udGFpbnM6IHNlYXJjaCwgbW9kZTogXCJpbnNlbnNpdGl2ZVwiIH0gfSxcbiAgICAgICAgICAgICAgeyBicmFuZDogeyBjb250YWluczogc2VhcmNoLCBtb2RlOiBcImluc2Vuc2l0aXZlXCIgfSB9LFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdmFyaWFudHM6IHtcbiAgICAgICAgICAgICAgICAgIHNvbWU6IHtcbiAgICAgICAgICAgICAgICAgICAgcHJvZHVjdFZhcmlhbnRTS1U6IHtcbiAgICAgICAgICAgICAgICAgICAgICBjb250YWluczogc2VhcmNoLFxuICAgICAgICAgICAgICAgICAgICAgIG1vZGU6IFwiaW5zZW5zaXRpdmVcIixcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgfSksXG4gICAgICAgIH0sXG4gICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICB2YXJpYW50czoge1xuICAgICAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgICAgICBQcm9kdWN0VmFyaWFudEltYWdlOiB0cnVlLFxuICAgICAgICAgICAgICBkaXNjb3VudHM6IHRydWUsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAgR1NUOiB0cnVlLFxuICAgICAgICAgIHNlbGxlcjogdHJ1ZSxcbiAgICAgICAgICBpbWFnZXM6IHRydWUsXG4gICAgICAgICAgcmV2aWV3czogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHByb2R1Y3RzO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBnZXQgcHJvZHVjdHMgYnkgc2VsbGVyXCIpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIEFkZFByb2R1Y3RJbWFnZShpbWFnZURhdGE6IElQcm9kdWN0SW1hZ2UpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcHJvZHVjdCA9IGF3YWl0IGRiLnByb2R1Y3QuZmluZFVuaXF1ZSh7XG4gICAgICAgIHdoZXJlOiB7IGlkOiBpbWFnZURhdGEucHJvZHVjdElkIH0sXG4gICAgICB9KTtcblxuICAgICAgaWYgKCFwcm9kdWN0KSB0aHJvdyBuZXcgRXJyb3IoXCJQcm9kdWN0IG5vdCBmb3VuZFwiKTtcblxuICAgICAgaWYgKGltYWdlRGF0YS5pc1ByaW1hcnkpIHtcbiAgICAgICAgYXdhaXQgZGIucHJvZHVjdEltYWdlLnVwZGF0ZU1hbnkoe1xuICAgICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgICBwcm9kdWN0SWQ6IGltYWdlRGF0YS5wcm9kdWN0SWQsXG4gICAgICAgICAgICBpc1ByaW1hcnk6IHRydWUsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBkYXRhOiB7IGlzUHJpbWFyeTogZmFsc2UgfSxcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IG5ld0ltYWdlID0gYXdhaXQgZGIucHJvZHVjdEltYWdlLmNyZWF0ZSh7XG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBwcm9kdWN0SWQ6IGltYWdlRGF0YS5wcm9kdWN0SWQhLFxuICAgICAgICAgIGltYWdlVXJsOiBpbWFnZURhdGEuaW1hZ2VVcmwsXG4gICAgICAgICAgaXNQcmltYXJ5OiBpbWFnZURhdGEuaXNQcmltYXJ5IHx8IGZhbHNlLFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBuZXdJbWFnZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gYWRkIHByb2R1Y3QgaW1hZ2VcIik7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgRGVsZXRlUHJvZHVjdEltYWdlKGltYWdlSWQ6IHN0cmluZykge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBpbWFnZSA9IGF3YWl0IGRiLnByb2R1Y3RJbWFnZS5maW5kVW5pcXVlKHtcbiAgICAgICAgd2hlcmU6IHsgaWQ6IGltYWdlSWQgfSxcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIWltYWdlKSB0aHJvdyBuZXcgRXJyb3IoXCJJbWFnZSBub3QgZm91bmRcIik7XG5cbiAgICAgIGF3YWl0IGRiLnByb2R1Y3RJbWFnZS5kZWxldGUoe1xuICAgICAgICB3aGVyZTogeyBpZDogaW1hZ2VJZCB9LFxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBkZWxldGUgcHJvZHVjdCBpbWFnZVwiKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBBZGRQcm9kdWN0VmFyaWFudCh2YXJpYW50RGF0YTogSVByb2R1Y3RWYXJpYW50KSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHByb2R1Y3QgPSBhd2FpdCBkYi5wcm9kdWN0LmZpbmRVbmlxdWUoe1xuICAgICAgICB3aGVyZTogeyBpZDogdmFyaWFudERhdGEucHJvZHVjdElkIH0sXG4gICAgICB9KTtcblxuICAgICAgaWYgKCFwcm9kdWN0KSB0aHJvdyBuZXcgRXJyb3IoXCJQcm9kdWN0IG5vdCBmb3VuZFwiKTtcblxuICAgICAgY29uc3QgbmV3VmFyaWFudCA9IGF3YWl0IGRiLnByb2R1Y3RWYXJpYW50LmNyZWF0ZSh7XG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBwcm9kdWN0VmFyaWFudFNLVTogdmFyaWFudERhdGEucHJvZHVjdFZhcmlhbnRTS1UsXG4gICAgICAgICAgcHJvZHVjdElkOiB2YXJpYW50RGF0YS5wcm9kdWN0SWQhLFxuICAgICAgICAgIHRpdGxlOiB2YXJpYW50RGF0YS50aXRsZSxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogdmFyaWFudERhdGEuZGVzY3JpcHRpb24sXG4gICAgICAgICAgcHJpY2U6IG5ldyBQcmlzbWEuRGVjaW1hbCh2YXJpYW50RGF0YS5wcmljZSksXG4gICAgICAgICAgc3RvY2tRdWFudGl0eTogdmFyaWFudERhdGEuc3RvY2tRdWFudGl0eSxcbiAgICAgICAgICB2YXJpYW50VHlwZTogdmFyaWFudERhdGEudmFyaWFudFR5cGUsXG4gICAgICAgICAgdmFyaWFudFZhbHVlOiB2YXJpYW50RGF0YS52YXJpYW50VmFsdWUsXG4gICAgICAgICAgcHJvZHVjdFdlaWdodDogbmV3IFByaXNtYS5EZWNpbWFsKHZhcmlhbnREYXRhLnByb2R1Y3RXZWlnaHQgfHwgMCksXG4gICAgICAgICAgYWRkaXRpb25hbFByaWNlOiBuZXcgUHJpc21hLkRlY2ltYWwodmFyaWFudERhdGEuYWRkaXRpb25hbFByaWNlIHx8IDApLFxuICAgICAgICAgIGhlaWdodDogdmFyaWFudERhdGEuaGVpZ2h0ICE9PSB1bmRlZmluZWQgPyBuZXcgUHJpc21hLkRlY2ltYWwodmFyaWFudERhdGEuaGVpZ2h0KSA6IG51bGwsXG4gICAgICAgICAgd2lkdGg6IHZhcmlhbnREYXRhLndpZHRoICE9PSB1bmRlZmluZWQgPyBuZXcgUHJpc21hLkRlY2ltYWwodmFyaWFudERhdGEud2lkdGgpIDogbnVsbCxcbiAgICAgICAgICBicmVhZHRoOiB2YXJpYW50RGF0YS5icmVhZHRoICE9PSB1bmRlZmluZWQgPyBuZXcgUHJpc21hLkRlY2ltYWwodmFyaWFudERhdGEuYnJlYWR0aCkgOiBudWxsLFxuICAgICAgICAgIC4uLih2YXJpYW50RGF0YS5Qcm9kdWN0VmFyaWFudEltYWdlICYmIHtcbiAgICAgICAgICAgIFByb2R1Y3RWYXJpYW50SW1hZ2U6IHtcbiAgICAgICAgICAgICAgY3JlYXRlTWFueToge1xuICAgICAgICAgICAgICAgIGRhdGE6IHZhcmlhbnREYXRhLlByb2R1Y3RWYXJpYW50SW1hZ2UubWFwKChpbWFnZSkgPT4gKHtcbiAgICAgICAgICAgICAgICAgIGltYWdlVXJsOiBpbWFnZS5pbWFnZVVybCxcbiAgICAgICAgICAgICAgICAgIGlzUHJpbWFyeTogaW1hZ2UuaXNQcmltYXJ5IHx8IGZhbHNlLFxuICAgICAgICAgICAgICAgIH0pKSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSksXG4gICAgICAgICAgLi4uKHZhcmlhbnREYXRhLlByb2R1Y3REaXNjb3VudCAmJiB7XG4gICAgICAgICAgICBkaXNjb3VudHM6IHtcbiAgICAgICAgICAgICAgY3JlYXRlTWFueToge1xuICAgICAgICAgICAgICAgIGRhdGE6IHZhcmlhbnREYXRhLlByb2R1Y3REaXNjb3VudC5tYXAoKGRpc2NvdW50KSA9PiAoe1xuICAgICAgICAgICAgICAgICAgZGlzY291bnRUeXBlOiBkaXNjb3VudC5kaXNjb3VudFR5cGUgYXMgRGlzY291bnRUeXBlLFxuICAgICAgICAgICAgICAgICAgZGlzY291bnRWYWx1ZTogbmV3IFByaXNtYS5EZWNpbWFsKGRpc2NvdW50LmRpc2NvdW50VmFsdWUpLFxuICAgICAgICAgICAgICAgICAgc3RhcnREYXRlOiBuZXcgRGF0ZShkaXNjb3VudC5zdGFydERhdGUpLFxuICAgICAgICAgICAgICAgICAgZW5kRGF0ZTogbmV3IERhdGUoZGlzY291bnQuZW5kRGF0ZSksXG4gICAgICAgICAgICAgICAgfSkpLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9KSxcbiAgICAgICAgfSxcbiAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgIFByb2R1Y3RWYXJpYW50SW1hZ2U6IHRydWUsXG4gICAgICAgICAgZGlzY291bnRzOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBuZXdWYXJpYW50O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBhZGQgcHJvZHVjdCB2YXJpYW50XCIpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIFVwZGF0ZVByb2R1Y3RWYXJpYW50KHZhcmlhbnREYXRhOiBJUHJvZHVjdFZhcmlhbnQpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdmFyaWFudCA9IGF3YWl0IGRiLnByb2R1Y3RWYXJpYW50LmZpbmRVbmlxdWUoe1xuICAgICAgICB3aGVyZTogeyBpZDogdmFyaWFudERhdGEuaWQgfSxcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIXZhcmlhbnQpIHRocm93IG5ldyBFcnJvcihcIlZhcmlhbnQgbm90IGZvdW5kXCIpO1xuXG4gICAgICBjb25zdCB1cGRhdGVkVmFyaWFudCA9IGF3YWl0IGRiLnByb2R1Y3RWYXJpYW50LnVwZGF0ZSh7XG4gICAgICAgIHdoZXJlOiB7IGlkOiB2YXJpYW50RGF0YS5pZCB9LFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgdGl0bGU6IHZhcmlhbnREYXRhLnRpdGxlLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiB2YXJpYW50RGF0YS5kZXNjcmlwdGlvbixcbiAgICAgICAgICBwcmljZTogbmV3IFByaXNtYS5EZWNpbWFsKHZhcmlhbnREYXRhLnByaWNlKSxcbiAgICAgICAgICBzdG9ja1F1YW50aXR5OiB2YXJpYW50RGF0YS5zdG9ja1F1YW50aXR5LFxuICAgICAgICAgIHZhcmlhbnRUeXBlOiB2YXJpYW50RGF0YS52YXJpYW50VHlwZSxcbiAgICAgICAgICB2YXJpYW50VmFsdWU6IHZhcmlhbnREYXRhLnZhcmlhbnRWYWx1ZSxcbiAgICAgICAgICBwcm9kdWN0V2VpZ2h0OiBuZXcgUHJpc21hLkRlY2ltYWwodmFyaWFudERhdGEucHJvZHVjdFdlaWdodCB8fCAwKSxcbiAgICAgICAgICBhZGRpdGlvbmFsUHJpY2U6IG5ldyBQcmlzbWEuRGVjaW1hbCh2YXJpYW50RGF0YS5hZGRpdGlvbmFsUHJpY2UgfHwgMCksXG4gICAgICAgICAgaGVpZ2h0OiB2YXJpYW50RGF0YS5oZWlnaHQgIT09IHVuZGVmaW5lZCA/IG5ldyBQcmlzbWEuRGVjaW1hbCh2YXJpYW50RGF0YS5oZWlnaHQpIDogdW5kZWZpbmVkLFxuICAgICAgICAgIHdpZHRoOiB2YXJpYW50RGF0YS53aWR0aCAhPT0gdW5kZWZpbmVkID8gbmV3IFByaXNtYS5EZWNpbWFsKHZhcmlhbnREYXRhLndpZHRoKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICBicmVhZHRoOiB2YXJpYW50RGF0YS5icmVhZHRoICE9PSB1bmRlZmluZWQgPyBuZXcgUHJpc21hLkRlY2ltYWwodmFyaWFudERhdGEuYnJlYWR0aCkgOiB1bmRlZmluZWQsXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHVwZGF0ZWRWYXJpYW50O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byB1cGRhdGUgcHJvZHVjdCB2YXJpYW50XCIpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIERlbGV0ZVByb2R1Y3RWYXJpYW50KHZhcmlhbnRJZDogc3RyaW5nKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHZhcmlhbnQgPSBhd2FpdCBkYi5wcm9kdWN0VmFyaWFudC5maW5kVW5pcXVlKHtcbiAgICAgICAgd2hlcmU6IHsgaWQ6IHZhcmlhbnRJZCB9LFxuICAgICAgfSk7XG5cbiAgICAgIGlmICghdmFyaWFudCkgdGhyb3cgbmV3IEVycm9yKFwiVmFyaWFudCBub3QgZm91bmRcIik7XG5cbiAgICAgIGF3YWl0IGRiLnByb2R1Y3RWYXJpYW50LmRlbGV0ZSh7XG4gICAgICAgIHdoZXJlOiB7IGlkOiB2YXJpYW50SWQgfSxcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gZGVsZXRlIHByb2R1Y3QgdmFyaWFudFwiKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBVcGRhdGVQcm9kdWN0RGlzY291bnQoZGlzY291bnREYXRhOiBJUHJvZHVjdERpc2NvdW50KSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGRpc2NvdW50ID0gYXdhaXQgZGIucHJvZHVjdERpc2NvdW50LmZpbmRVbmlxdWUoe1xuICAgICAgICB3aGVyZTogeyBpZDogZGlzY291bnREYXRhLmlkIH0sXG4gICAgICB9KTtcblxuICAgICAgaWYgKCFkaXNjb3VudCkgdGhyb3cgbmV3IEVycm9yKFwiRGlzY291bnQgbm90IGZvdW5kXCIpO1xuXG4gICAgICBjb25zdCB1cGRhdGVkRGlzY291bnQgPSBhd2FpdCBkYi5wcm9kdWN0RGlzY291bnQudXBkYXRlKHtcbiAgICAgICAgd2hlcmU6IHsgaWQ6IGRpc2NvdW50RGF0YS5pZCB9LFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgZGlzY291bnRUeXBlOiBkaXNjb3VudERhdGEuZGlzY291bnRUeXBlLFxuICAgICAgICAgIGRpc2NvdW50VmFsdWU6IG5ldyBQcmlzbWEuRGVjaW1hbChkaXNjb3VudERhdGEuZGlzY291bnRWYWx1ZSksXG4gICAgICAgICAgc3RhcnREYXRlOiBuZXcgRGF0ZShkaXNjb3VudERhdGEuc3RhcnREYXRlKSxcbiAgICAgICAgICBlbmREYXRlOiBuZXcgRGF0ZShkaXNjb3VudERhdGEuZW5kRGF0ZSksXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHVwZGF0ZWREaXNjb3VudDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gdXBkYXRlIHByb2R1Y3QgZGlzY291bnRcIik7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgRGVsZXRlUHJvZHVjdERpc2NvdW50KGRpc2NvdW50SWQ6IHN0cmluZykge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBkaXNjb3VudCA9IGF3YWl0IGRiLnByb2R1Y3REaXNjb3VudC5maW5kVW5pcXVlKHtcbiAgICAgICAgd2hlcmU6IHsgaWQ6IGRpc2NvdW50SWQgfSxcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIWRpc2NvdW50KSB0aHJvdyBuZXcgRXJyb3IoXCJEaXNjb3VudCBub3QgZm91bmRcIik7XG5cbiAgICAgIGF3YWl0IGRiLnByb2R1Y3REaXNjb3VudC5kZWxldGUoe1xuICAgICAgICB3aGVyZTogeyBpZDogZGlzY291bnRJZCB9LFxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBkZWxldGUgcHJvZHVjdCB2YXJpYW50IGRpc2NvdW50XCIpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIEFkZFByb2R1Y3RWYXJpYW50SW1hZ2UoaW1hZ2VEYXRhOiB7XG4gICAgcHJvZHVjdFZhcmlhbnRJZDogc3RyaW5nO1xuICAgIGltYWdlVXJsOiBzdHJpbmc7XG4gICAgaXNQcmltYXJ5PzogYm9vbGVhbjtcbiAgfSkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB2YXJpYW50ID0gYXdhaXQgZGIucHJvZHVjdFZhcmlhbnQuZmluZFVuaXF1ZSh7XG4gICAgICAgIHdoZXJlOiB7IGlkOiBpbWFnZURhdGEucHJvZHVjdFZhcmlhbnRJZCB9LFxuICAgICAgfSk7XG5cbiAgICAgIGlmICghdmFyaWFudCkgdGhyb3cgbmV3IEVycm9yKFwiUHJvZHVjdCB2YXJpYW50IG5vdCBmb3VuZFwiKTtcblxuICAgICAgaWYgKGltYWdlRGF0YS5pc1ByaW1hcnkpIHtcbiAgICAgICAgYXdhaXQgZGIucHJvZHVjdFZhcmlhbnRJbWFnZS51cGRhdGVNYW55KHtcbiAgICAgICAgICB3aGVyZToge1xuICAgICAgICAgICAgcHJvZHVjdFZhcmlhbnRJZDogaW1hZ2VEYXRhLnByb2R1Y3RWYXJpYW50SWQsXG4gICAgICAgICAgICBpc1ByaW1hcnk6IHRydWUsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBkYXRhOiB7IGlzUHJpbWFyeTogZmFsc2UgfSxcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IG5ld0ltYWdlID0gYXdhaXQgZGIucHJvZHVjdFZhcmlhbnRJbWFnZS5jcmVhdGUoe1xuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgcHJvZHVjdFZhcmlhbnRJZDogaW1hZ2VEYXRhLnByb2R1Y3RWYXJpYW50SWQsXG4gICAgICAgICAgaW1hZ2VVcmw6IGltYWdlRGF0YS5pbWFnZVVybCxcbiAgICAgICAgICBpc1ByaW1hcnk6IGltYWdlRGF0YS5pc1ByaW1hcnkgfHwgZmFsc2UsXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIG5ld0ltYWdlO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBhZGQgcHJvZHVjdCB2YXJpYW50IGltYWdlXCIpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIERlbGV0ZVByb2R1Y3RWYXJpYW50SW1hZ2UoaW1hZ2VJZDogc3RyaW5nKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGltYWdlID0gYXdhaXQgZGIucHJvZHVjdFZhcmlhbnRJbWFnZS5maW5kVW5pcXVlKHtcbiAgICAgICAgd2hlcmU6IHsgaWQ6IGltYWdlSWQgfSxcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIWltYWdlKSB0aHJvdyBuZXcgRXJyb3IoXCJJbWFnZSBub3QgZm91bmRcIik7XG5cbiAgICAgIGF3YWl0IGRiLnByb2R1Y3RWYXJpYW50SW1hZ2UuZGVsZXRlKHtcbiAgICAgICAgd2hlcmU6IHsgaWQ6IGltYWdlSWQgfSxcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gZGVsZXRlIHByb2R1Y3QgdmFyaWFudCBpbWFnZVwiKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBBZGRQcm9kdWN0VmFyaWFudERpc2NvdW50KGRpc2NvdW50RGF0YToge1xuICAgIHByb2R1Y3RWYXJpYW50SWQ6IHN0cmluZztcbiAgICBkaXNjb3VudFR5cGU6IHN0cmluZztcbiAgICBkaXNjb3VudFZhbHVlOiBudW1iZXI7XG4gICAgc3RhcnREYXRlOiBzdHJpbmc7XG4gICAgZW5kRGF0ZTogc3RyaW5nO1xuICB9KSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHZhcmlhbnQgPSBhd2FpdCBkYi5wcm9kdWN0VmFyaWFudC5maW5kVW5pcXVlKHtcbiAgICAgICAgd2hlcmU6IHsgaWQ6IGRpc2NvdW50RGF0YS5wcm9kdWN0VmFyaWFudElkIH0sXG4gICAgICB9KTtcblxuICAgICAgaWYgKCF2YXJpYW50KSB0aHJvdyBuZXcgRXJyb3IoXCJQcm9kdWN0IHZhcmlhbnQgbm90IGZvdW5kXCIpO1xuXG4gICAgICBjb25zdCBuZXdEaXNjb3VudCA9IGF3YWl0IGRiLnByb2R1Y3REaXNjb3VudC5jcmVhdGUoe1xuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgcHJvZHVjdFZhcmlhbnRJZDogZGlzY291bnREYXRhLnByb2R1Y3RWYXJpYW50SWQsXG4gICAgICAgICAgZGlzY291bnRUeXBlOiBkaXNjb3VudERhdGEuZGlzY291bnRUeXBlIGFzIERpc2NvdW50VHlwZSxcbiAgICAgICAgICBkaXNjb3VudFZhbHVlOiBuZXcgUHJpc21hLkRlY2ltYWwoZGlzY291bnREYXRhLmRpc2NvdW50VmFsdWUpLFxuICAgICAgICAgIHN0YXJ0RGF0ZTogbmV3IERhdGUoZGlzY291bnREYXRhLnN0YXJ0RGF0ZSksXG4gICAgICAgICAgZW5kRGF0ZTogbmV3IERhdGUoZGlzY291bnREYXRhLmVuZERhdGUpLFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBuZXdEaXNjb3VudDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gYWRkIHByb2R1Y3QgdmFyaWFudCBkaXNjb3VudFwiKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBVcGRhdGVQcm9kdWN0VmFyaWFudERpc2NvdW50KGRpc2NvdW50RGF0YToge1xuICAgIGlkOiBzdHJpbmc7XG4gICAgZGlzY291bnRUeXBlOiBzdHJpbmc7XG4gICAgZGlzY291bnRWYWx1ZTogbnVtYmVyO1xuICAgIHN0YXJ0RGF0ZTogc3RyaW5nO1xuICAgIGVuZERhdGU6IHN0cmluZztcbiAgfSkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBkaXNjb3VudCA9IGF3YWl0IGRiLnByb2R1Y3REaXNjb3VudC5maW5kVW5pcXVlKHtcbiAgICAgICAgd2hlcmU6IHsgaWQ6IGRpc2NvdW50RGF0YS5pZCB9LFxuICAgICAgfSk7XG5cbiAgICAgIGlmICghZGlzY291bnQpIHRocm93IG5ldyBFcnJvcihcIkRpc2NvdW50IG5vdCBmb3VuZFwiKTtcblxuICAgICAgY29uc3QgdXBkYXRlZERpc2NvdW50ID0gYXdhaXQgZGIucHJvZHVjdERpc2NvdW50LnVwZGF0ZSh7XG4gICAgICAgIHdoZXJlOiB7IGlkOiBkaXNjb3VudERhdGEuaWQgfSxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIGRpc2NvdW50VHlwZTogZGlzY291bnREYXRhLmRpc2NvdW50VHlwZSBhcyBEaXNjb3VudFR5cGUsXG4gICAgICAgICAgZGlzY291bnRWYWx1ZTogbmV3IFByaXNtYS5EZWNpbWFsKGRpc2NvdW50RGF0YS5kaXNjb3VudFZhbHVlKSxcbiAgICAgICAgICBzdGFydERhdGU6IG5ldyBEYXRlKGRpc2NvdW50RGF0YS5zdGFydERhdGUpLFxuICAgICAgICAgIGVuZERhdGU6IG5ldyBEYXRlKGRpc2NvdW50RGF0YS5lbmREYXRlKSxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gdXBkYXRlZERpc2NvdW50O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byB1cGRhdGUgcHJvZHVjdCB2YXJpYW50IGRpc2NvdW50XCIpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIERlbGV0ZVByb2R1Y3RWYXJpYW50RGlzY291bnQoZGlzY291bnRJZDogc3RyaW5nKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGRpc2NvdW50ID0gYXdhaXQgZGIucHJvZHVjdERpc2NvdW50LmZpbmRVbmlxdWUoe1xuICAgICAgICB3aGVyZTogeyBpZDogZGlzY291bnRJZCB9LFxuICAgICAgfSk7XG5cbiAgICAgIGlmICghZGlzY291bnQpIHRocm93IG5ldyBFcnJvcihcIkRpc2NvdW50IG5vdCBmb3VuZFwiKTtcblxuICAgICAgYXdhaXQgZGIucHJvZHVjdERpc2NvdW50LmRlbGV0ZSh7XG4gICAgICAgIHdoZXJlOiB7IGlkOiBkaXNjb3VudElkIH0sXG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIGRlbGV0ZSBwcm9kdWN0IHZhcmlhbnQgZGlzY291bnRcIik7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgQnVsa1VwbG9hZFByb2R1Y3RzKGRhdGE6IEJ1bGtVcGxvYWREYXRhKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgcHJvZHVjdHMsIHZhcmlhbnRzLCB2YXJpYW50SW1hZ2VzLCB2YXJpYW50RGlzY291bnRzLCBzZWxsZXJJZCB9ID1cbiAgICAgICAgZGF0YTtcblxuICAgICAgLy8gVmFsaWRhdGUgcmVxdWlyZWQgZGF0YVxuICAgICAgaWYgKCFwcm9kdWN0cy5sZW5ndGggfHwgIXZhcmlhbnRzLmxlbmd0aCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQcm9kdWN0cyBhbmQgdmFyaWFudHMgYXJlIHJlcXVpcmVkXCIpO1xuICAgICAgfVxuXG4gICAgICBpZiAoIXNlbGxlcklkKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlNlbGxlciBJRCBpcyByZXF1aXJlZFwiKTtcbiAgICAgIH1cblxuICAgICAgLy8gVmVyaWZ5IHNlbGxlciBleGlzdHNcbiAgICAgIGNvbnN0IHNlbGxlciA9IGF3YWl0IGRiLnNlbGxlclByb2ZpbGUuZmluZFVuaXF1ZSh7XG4gICAgICAgIHdoZXJlOiB7IGlkOiBzZWxsZXJJZCB9LFxuICAgICAgfSk7XG5cbiAgICAgIGlmICghc2VsbGVyKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlNlbGxlciBub3QgZm91bmRcIik7XG4gICAgICB9XG5cbiAgICAgIC8vIFByb2Nlc3MgaW4gYSB0cmFuc2FjdGlvblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGIuJHRyYW5zYWN0aW9uKFxuICAgICAgICBhc3luYyAocHJpc21hKSA9PiB7XG4gICAgICAgICAgY29uc3QgY3JlYXRlZFByb2R1Y3RzID0gW107XG5cbiAgICAgICAgICAvLyBQcm9jZXNzIGVhY2ggcHJvZHVjdCB3aXRoIGl0cyByZWxhdGVkIGRhdGFcbiAgICAgICAgICBmb3IgKGNvbnN0IHByb2R1Y3REYXRhIG9mIHByb2R1Y3RzKSB7XG4gICAgICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICAgIHByb2R1Y3RTS1UsXG4gICAgICAgICAgICAgIGNhdGVnb3J5LFxuICAgICAgICAgICAgICBzdWJjYXRlZ29yeSxcbiAgICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb24sXG4gICAgICAgICAgICAgIGJyYW5kLFxuICAgICAgICAgICAgICBpc0FwcHJvdmVkLFxuICAgICAgICAgICAgICBhYm91dFByb2R1Y3QsXG4gICAgICAgICAgICAgIGhzbkNvZGUsXG4gICAgICAgICAgICAgIGxpbmtOYW1lLFxuICAgICAgICAgICAgICByZWxhdGVkUHJvZHVjdHMsXG4gICAgICAgICAgICAgIGdzdFBlcmNlbnRhZ2UsXG4gICAgICAgICAgICB9ID0gcHJvZHVjdERhdGE7XG5cbiAgICAgICAgICAgIC8vIERlYnVnIGxvZ2dpbmdcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBQcm9jZXNzaW5nIHByb2R1Y3QgJHtwcm9kdWN0U0tVfTpgLCB7XG4gICAgICAgICAgICAgIGNhdGVnb3J5LFxuICAgICAgICAgICAgICBzdWJjYXRlZ29yeSxcbiAgICAgICAgICAgICAgaGFzU3ViY2F0ZWdvcnk6ICEhc3ViY2F0ZWdvcnksXG4gICAgICAgICAgICAgIHN1YmNhdGVnb3J5VHlwZTogdHlwZW9mIHN1YmNhdGVnb3J5XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gRGV0ZXJtaW5lIHRoZSBmaW5hbCBjYXRlZ29yeSB0byB1c2UgZm9yIHRoZSBwcm9kdWN0XG4gICAgICAgICAgICAvLyBJZiBzdWJjYXRlZ29yeSBleGlzdHMsIHVzZSBzdWJjYXRlZ29yeTsgb3RoZXJ3aXNlIHVzZSBtYWluIGNhdGVnb3J5XG4gICAgICAgICAgICBjb25zdCBmaW5hbENhdGVnb3J5TmFtZSA9IHN1YmNhdGVnb3J5IHx8IGNhdGVnb3J5O1xuXG4gICAgICAgICAgICAvLyBHZXQgb3IgY3JlYXRlIHRoZSBtYWluIGNhdGVnb3J5IGZpcnN0IChjYXNlLWluc2Vuc2l0aXZlIGxvb2t1cClcbiAgICAgICAgICAgIGxldCBtYWluQ2F0ZWdvcnkgPSBhd2FpdCBwcmlzbWEuY2F0ZWdvcnkuZmluZEZpcnN0KHtcbiAgICAgICAgICAgICAgd2hlcmU6IHsgXG4gICAgICAgICAgICAgICAgbmFtZToge1xuICAgICAgICAgICAgICAgICAgZXF1YWxzOiBjYXRlZ29yeSxcbiAgICAgICAgICAgICAgICAgIG1vZGU6ICdpbnNlbnNpdGl2ZSdcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKCFtYWluQ2F0ZWdvcnkpIHtcbiAgICAgICAgICAgICAgLy8gTm9ybWFsaXplIHRoZSBjYXRlZ29yeSBuYW1lIChjYXBpdGFsaXplIGZpcnN0IGxldHRlcilcbiAgICAgICAgICAgICAgY29uc3Qgbm9ybWFsaXplZENhdGVnb3J5TmFtZSA9IGNhdGVnb3J5LmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgY2F0ZWdvcnkuc2xpY2UoMSkudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIENoZWNrIGFnYWluIHdpdGggbm9ybWFsaXplZCBuYW1lXG4gICAgICAgICAgICAgIG1haW5DYXRlZ29yeSA9IGF3YWl0IHByaXNtYS5jYXRlZ29yeS5maW5kRmlyc3Qoe1xuICAgICAgICAgICAgICAgIHdoZXJlOiB7IFxuICAgICAgICAgICAgICAgICAgbmFtZToge1xuICAgICAgICAgICAgICAgICAgICBlcXVhbHM6IG5vcm1hbGl6ZWRDYXRlZ29yeU5hbWUsXG4gICAgICAgICAgICAgICAgICAgIG1vZGU6ICdpbnNlbnNpdGl2ZSdcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICBpZiAoIW1haW5DYXRlZ29yeSkge1xuICAgICAgICAgICAgICAgIG1haW5DYXRlZ29yeSA9IGF3YWl0IHByaXNtYS5jYXRlZ29yeS5jcmVhdGUoe1xuICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBub3JtYWxpemVkQ2F0ZWdvcnlOYW1lLFxuICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogYENhdGVnb3J5IGNyZWF0ZWQgZHVyaW5nIGJ1bGsgdXBsb2FkIGZvciBwcm9kdWN0ICR7cHJvZHVjdFNLVX1gLFxuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsZXQgY2F0ZWdvcnlJZDogc3RyaW5nO1xuXG4gICAgICAgICAgICAvLyBJZiBzdWJjYXRlZ29yeSBpcyBwcm92aWRlZCBhbmQgZGlmZmVyZW50IGZyb20gbWFpbiBjYXRlZ29yeVxuICAgICAgICAgICAgaWYgKHN1YmNhdGVnb3J5ICYmIHN1YmNhdGVnb3J5LnRyaW0oKSAhPT0gJycgJiYgc3ViY2F0ZWdvcnkgIT09IGNhdGVnb3J5KSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBDcmVhdGluZy9maW5kaW5nIHN1YmNhdGVnb3J5IFwiJHtzdWJjYXRlZ29yeX1cIiB1bmRlciBtYWluIGNhdGVnb3J5IFwiJHtjYXRlZ29yeX1cImApO1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgc3ViY2F0ZWdvcnkgZXhpc3RzIHVuZGVyIHRoZSBtYWluIGNhdGVnb3J5IChjYXNlLWluc2Vuc2l0aXZlKVxuICAgICAgICAgICAgICBsZXQgc3ViY2F0ZWdvcnlSZWNvcmQgPSBhd2FpdCBwcmlzbWEuY2F0ZWdvcnkuZmluZEZpcnN0KHtcbiAgICAgICAgICAgICAgICB3aGVyZTogeyBcbiAgICAgICAgICAgICAgICAgIG5hbWU6IHtcbiAgICAgICAgICAgICAgICAgICAgZXF1YWxzOiBzdWJjYXRlZ29yeSxcbiAgICAgICAgICAgICAgICAgICAgbW9kZTogJ2luc2Vuc2l0aXZlJ1xuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIHBhcmVudENhdGVnb3J5SWQ6IG1haW5DYXRlZ29yeS5pZFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgIGlmICghc3ViY2F0ZWdvcnlSZWNvcmQpIHtcbiAgICAgICAgICAgICAgICAvLyBOb3JtYWxpemUgdGhlIHN1YmNhdGVnb3J5IG5hbWVcbiAgICAgICAgICAgICAgICBjb25zdCBub3JtYWxpemVkU3ViY2F0ZWdvcnlOYW1lID0gc3ViY2F0ZWdvcnkuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzdWJjYXRlZ29yeS5zbGljZSgxKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIENoZWNrIGFnYWluIHdpdGggbm9ybWFsaXplZCBuYW1lXG4gICAgICAgICAgICAgICAgc3ViY2F0ZWdvcnlSZWNvcmQgPSBhd2FpdCBwcmlzbWEuY2F0ZWdvcnkuZmluZEZpcnN0KHtcbiAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiB7XG4gICAgICAgICAgICAgICAgICAgICAgZXF1YWxzOiBub3JtYWxpemVkU3ViY2F0ZWdvcnlOYW1lLFxuICAgICAgICAgICAgICAgICAgICAgIG1vZGU6ICdpbnNlbnNpdGl2ZSdcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50Q2F0ZWdvcnlJZDogbWFpbkNhdGVnb3J5LmlkXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgaWYgKCFzdWJjYXRlZ29yeVJlY29yZCkge1xuICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYENyZWF0aW5nIG5ldyBzdWJjYXRlZ29yeSBcIiR7bm9ybWFsaXplZFN1YmNhdGVnb3J5TmFtZX1cIiB1bmRlciBtYWluIGNhdGVnb3J5IFwiJHtjYXRlZ29yeX1cImApO1xuICAgICAgICAgICAgICAgICAgLy8gQ3JlYXRlIHN1YmNhdGVnb3J5IHVuZGVyIHRoZSBtYWluIGNhdGVnb3J5XG4gICAgICAgICAgICAgICAgICBzdWJjYXRlZ29yeVJlY29yZCA9IGF3YWl0IHByaXNtYS5jYXRlZ29yeS5jcmVhdGUoe1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgbmFtZTogbm9ybWFsaXplZFN1YmNhdGVnb3J5TmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogYFN1YmNhdGVnb3J5IGNyZWF0ZWQgZHVyaW5nIGJ1bGsgdXBsb2FkIGZvciBwcm9kdWN0ICR7cHJvZHVjdFNLVX1gLFxuICAgICAgICAgICAgICAgICAgICAgIHBhcmVudENhdGVnb3J5SWQ6IG1haW5DYXRlZ29yeS5pZCxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgRm91bmQgZXhpc3Rpbmcgc3ViY2F0ZWdvcnkgXCIke25vcm1hbGl6ZWRTdWJjYXRlZ29yeU5hbWV9XCIgdW5kZXIgbWFpbiBjYXRlZ29yeSBcIiR7Y2F0ZWdvcnl9XCJgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYEZvdW5kIGV4aXN0aW5nIHN1YmNhdGVnb3J5IFwiJHtzdWJjYXRlZ29yeX1cIiB1bmRlciBtYWluIGNhdGVnb3J5IFwiJHtjYXRlZ29yeX1cImApO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGNhdGVnb3J5SWQgPSBzdWJjYXRlZ29yeVJlY29yZC5pZDtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coYFVzaW5nIHN1YmNhdGVnb3J5IElEOiAke2NhdGVnb3J5SWR9YCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAvLyBVc2UgbWFpbiBjYXRlZ29yeSBhcyB0aGUgcHJvZHVjdCBjYXRlZ29yeVxuICAgICAgICAgICAgICBjYXRlZ29yeUlkID0gbWFpbkNhdGVnb3J5LmlkO1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgVXNpbmcgbWFpbiBjYXRlZ29yeSBJRDogJHtjYXRlZ29yeUlkfSAobm8gc3ViY2F0ZWdvcnkgb3Igc3ViY2F0ZWdvcnkgc2FtZSBhcyBtYWluIGNhdGVnb3J5KWApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBHZXQgcHJvZHVjdCB2YXJpYW50cyBmb3IgdGhpcyBwcm9kdWN0XG4gICAgICAgICAgICBjb25zdCBwcm9kdWN0VmFyaWFudHMgPSB2YXJpYW50cy5maWx0ZXIoXG4gICAgICAgICAgICAgICh2KSA9PiB2LnByb2R1Y3RTS1UgPT09IHByb2R1Y3RTS1VcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIC8vIENyZWF0ZSBwcm9kdWN0IHdpdGggYWxsIHJlbGF0ZWQgZGF0YSBpbiBhIHNpbmdsZSBvcGVyYXRpb25cbiAgICAgICAgICAgICAgY29uc3QgcHJvZHVjdCA9IGF3YWl0IHByaXNtYS5wcm9kdWN0LmNyZWF0ZSh7XG4gICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgcHJvZHVjdFNLVSxcbiAgICAgICAgICAgICAgICAgIGNhdGVnb3J5SWQsXG4gICAgICAgICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb24sXG4gICAgICAgICAgICAgICAgICBpc0FwcHJvdmVkOiBpc0FwcHJvdmVkIHx8IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgYWJvdXRQcm9kdWN0OiBhYm91dFByb2R1Y3QgPyBhYm91dFByb2R1Y3QgOiBudWxsLFxuICAgICAgICAgICAgICAgICAgYnJhbmQ6IGJyYW5kIHx8IG51bGwsXG4gICAgICAgICAgICAgICAgICBoc25Db2RlOiBoc25Db2RlIHx8IG51bGwsXG4gICAgICAgICAgICAgICAgICBsaW5rTmFtZTogbGlua05hbWUgfHwgbnVsbCxcbiAgICAgICAgICAgICAgICAgIHJlbGF0ZWRQcm9kdWN0czogcmVsYXRlZFByb2R1Y3RzID8gcmVsYXRlZFByb2R1Y3RzIGFzIGFueSA6IG51bGwsXG4gICAgICAgICAgICAgICAgICBzZWxsZXJJZCxcbiAgICAgICAgICAgICAgICAgIHZhcmlhbnRzOiB7XG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZTogcHJvZHVjdFZhcmlhbnRzLm1hcCgodmFyaWFudCkgPT4gKHtcbiAgICAgICAgICAgICAgICAgICAgICBwcm9kdWN0VmFyaWFudFNLVTogdmFyaWFudC5wcm9kdWN0VmFyaWFudFNLVSxcbiAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogdmFyaWFudC50aXRsZSxcbiAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogdmFyaWFudC5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICBwcmljZTogbmV3IFByaXNtYS5EZWNpbWFsKHZhcmlhbnQucHJpY2UpLFxuICAgICAgICAgICAgICAgICAgICAgIHN0b2NrUXVhbnRpdHk6IHZhcmlhbnQuc3RvY2tRdWFudGl0eSxcbiAgICAgICAgICAgICAgICAgICAgICB2YXJpYW50VHlwZTogdmFyaWFudC52YXJpYW50VHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICB2YXJpYW50VmFsdWU6IFN0cmluZyh2YXJpYW50LnZhcmlhbnRWYWx1ZSksXG4gICAgICAgICAgICAgICAgICAgICAgYWRkaXRpb25hbFByaWNlOiBuZXcgUHJpc21hLkRlY2ltYWwodmFyaWFudC5hZGRpdGlvbmFsUHJpY2UgfHwgMCksXG4gICAgICAgICAgICAgICAgICAgICAgcHJvZHVjdFdlaWdodDogdmFyaWFudC5wcm9kdWN0V2VpZ2h0ID8gbmV3IFByaXNtYS5EZWNpbWFsKHZhcmlhbnQucHJvZHVjdFdlaWdodCkgOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICB9KSksXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgICAgICAgICAgdmFyaWFudHM6IHRydWUsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgLy8gQ3JlYXRlIEdTVCBpZiBwcm92aWRlZFxuICAgICAgICAgICAgICBpZiAoZ3N0UGVyY2VudGFnZSkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHByaXNtYS5nU1QuY3JlYXRlKHtcbiAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgcHJvZHVjdElkOiBwcm9kdWN0LmlkLFxuICAgICAgICAgICAgICAgICAgICBwZXJjZW50YWdlOiBuZXcgUHJpc21hLkRlY2ltYWwoZ3N0UGVyY2VudGFnZSlcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIC8vIEFmdGVyIGNyZWF0aW5nIHRoZSBwcm9kdWN0IGFuZCB2YXJpYW50cywgY3JlYXRlIHRoZSBpbWFnZXMgYW5kIGRpc2NvdW50c1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgZm9yIChjb25zdCB2YXJpYW50IG9mIHByb2R1Y3QudmFyaWFudHMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB2YXJpYW50SW1hZ2VzRm9yVmFyaWFudCA9IHZhcmlhbnRJbWFnZXMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgKGltZykgPT4gaW1nLnByb2R1Y3RWYXJpYW50U0tVID09PSB2YXJpYW50LnByb2R1Y3RWYXJpYW50U0tVXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIGlmICh2YXJpYW50SW1hZ2VzRm9yVmFyaWFudC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICBjb25zdCBpbWFnZURhdGEgPSB2YXJpYW50SW1hZ2VzRm9yVmFyaWFudC5tYXAoKGltYWdlKSA9PiAoe1xuICAgICAgICAgICAgICAgICAgICBwcm9kdWN0VmFyaWFudElkOiB2YXJpYW50LmlkLFxuICAgICAgICAgICAgICAgICAgICBpbWFnZVVybDogaW1hZ2UuaW1hZ2VVcmwsXG4gICAgICAgICAgICAgICAgICAgIGlzUHJpbWFyeTogaW1hZ2UuaXNQcmltYXJ5IHx8IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICBhd2FpdCBwcmlzbWEucHJvZHVjdFZhcmlhbnRJbWFnZS5jcmVhdGVNYW55KHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogaW1hZ2VEYXRhLFxuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY29uc3QgdmFyaWFudERpc2NvdW50c0ZvclZhcmlhbnQgPSB2YXJpYW50RGlzY291bnRzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgIChkaXNjKSA9PiBkaXNjLnByb2R1Y3RWYXJpYW50U0tVID09PSB2YXJpYW50LnByb2R1Y3RWYXJpYW50U0tVXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIGlmICh2YXJpYW50RGlzY291bnRzRm9yVmFyaWFudC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICBhd2FpdCBwcmlzbWEucHJvZHVjdERpc2NvdW50LmNyZWF0ZU1hbnkoe1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiB2YXJpYW50RGlzY291bnRzRm9yVmFyaWFudC5tYXAoKGRpc2NvdW50KSA9PiAoe1xuICAgICAgICAgICAgICAgICAgICAgIHByb2R1Y3RWYXJpYW50SWQ6IHZhcmlhbnQuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgZGlzY291bnRUeXBlOiBkaXNjb3VudC5kaXNjb3VudFR5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgZGlzY291bnRWYWx1ZTogbmV3IFByaXNtYS5EZWNpbWFsKGRpc2NvdW50LmRpc2NvdW50VmFsdWUpLFxuICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0RGF0ZTogbmV3IERhdGUoZGlzY291bnQuc3RhcnREYXRlKSxcbiAgICAgICAgICAgICAgICAgICAgICBlbmREYXRlOiBuZXcgRGF0ZShkaXNjb3VudC5lbmREYXRlKSxcbiAgICAgICAgICAgICAgICAgICAgfSkpLFxuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgLy8gRmV0Y2ggdGhlIGNvbXBsZXRlIHByb2R1Y3Qgd2l0aCBhbGwgcmVsYXRpb25zXG4gICAgICAgICAgICAgIGNvbnN0IGNvbXBsZXRlUHJvZHVjdCA9IGF3YWl0IHByaXNtYS5wcm9kdWN0LmZpbmRVbmlxdWUoe1xuICAgICAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBwcm9kdWN0LmlkIH0sXG4gICAgICAgICAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgICAgICAgICAgdmFyaWFudHM6IHtcbiAgICAgICAgICAgICAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgICAgICAgICAgICAgIGRpc2NvdW50czogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICBQcm9kdWN0VmFyaWFudEltYWdlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIEdTVDogdHJ1ZVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgIGlmIChjb21wbGV0ZVByb2R1Y3QpIHtcbiAgICAgICAgICAgICAgICBjcmVhdGVkUHJvZHVjdHMucHVzaChjb21wbGV0ZVByb2R1Y3QpO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yOiB1bmtub3duKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHByaXNtYUVycm9yID0gZXJyb3IgYXMgUHJpc21hRXJyb3I7XG4gICAgICAgICAgICAgIGlmIChwcmlzbWFFcnJvci5jb2RlID09PSBcIlAyMDAyXCIpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyB7XG4gICAgICAgICAgICAgICAgICBuYW1lOiBcIlVuaXF1ZUNvbnN0cmFpbnRFcnJvclwiLFxuICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJBIHByb2R1Y3Qgd2l0aCB0aGlzIFNLVSBhbHJlYWR5IGV4aXN0c1wiLFxuICAgICAgICAgICAgICAgICAgZGV0YWlsczogcHJpc21hRXJyb3IsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gY3JlYXRlZFByb2R1Y3RzO1xuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgbWF4V2FpdDogMTAwMDAsXG4gICAgICAgICAgdGltZW91dDogMzAwMDAsXG4gICAgICAgIH1cbiAgICAgICk7XG5cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSBjYXRjaCAoZXJyb3I6IHVua25vd24pIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJCdWxrIHVwbG9hZCBlcnJvcjpcIiwgZXJyb3IpO1xuXG4gICAgICAvLyBIYW5kbGUgZGlmZmVyZW50IHR5cGVzIG9mIGVycm9yc1xuICAgICAgaWYgKChlcnJvciBhcyBWYWxpZGF0aW9uRXJyb3IpLm5hbWUgPT09IFwiVmFsaWRhdGlvbkVycm9yXCIpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBlcnJvcjogXCJWYWxpZGF0aW9uIEVycm9yXCIsXG4gICAgICAgICAgZGV0YWlsczogKGVycm9yIGFzIFZhbGlkYXRpb25FcnJvcikuZXJyb3JzLFxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICBpZiAoKGVycm9yIGFzIFVuaXF1ZUNvbnN0cmFpbnRFcnJvcikubmFtZSA9PT0gXCJVbmlxdWVDb25zdHJhaW50RXJyb3JcIikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIGVycm9yOiBcIkR1cGxpY2F0ZSBFbnRyeSBFcnJvclwiLFxuICAgICAgICAgIGRldGFpbHM6IChlcnJvciBhcyBVbmlxdWVDb25zdHJhaW50RXJyb3IpLm1lc3NhZ2UsXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxufVxuIl0sIm5hbWVzIjpbImRiIiwiXyIsIlByaXNtYSIsIlByb2R1Y3RTZXJ2aWNlIiwiQ3JlYXRlUHJvZHVjdCIsInByb2R1Y3REYXRhIiwidmFyaWFudHMiLCJHU1QiLCJwcm9kdWN0SW5mbyIsImxlbmd0aCIsIkVycm9yIiwiY29uc29sZSIsImxvZyIsImNhdGVnb3J5SWQiLCJzZWxsZXJQcm9maWxlIiwiZmluZFVuaXF1ZSIsIndoZXJlIiwiaWQiLCJzZWxsZXJJZCIsInByb2R1Y3QiLCIkdHJhbnNhY3Rpb24iLCJwcmlzbWEiLCJuZXdQcm9kdWN0IiwiY3JlYXRlIiwiZGF0YSIsIm5hbWUiLCJkZXNjcmlwdGlvbiIsInByb2R1Y3RTS1UiLCJicmFuZCIsImhzbkNvZGUiLCJpc0FwcHJvdmVkIiwiYWJvdXRQcm9kdWN0IiwibGlua05hbWUiLCJyZWxhdGVkUHJvZHVjdHMiLCJ3aG9sZXNhbGUiLCJwZXJjZW50YWdlIiwiZ1NUIiwicHJvZHVjdElkIiwiRGVjaW1hbCIsImNyZWF0ZWRWYXJpYW50cyIsInByb2R1Y3RWYXJpYW50IiwiY3JlYXRlTWFueSIsIm1hcCIsInZhcmlhbnQiLCJwcm9kdWN0VmFyaWFudFNLVSIsInRpdGxlIiwicHJpY2UiLCJzdG9ja1F1YW50aXR5IiwidmFyaWFudFR5cGUiLCJ2YXJpYW50VmFsdWUiLCJwcm9kdWN0V2VpZ2h0IiwiYWRkaXRpb25hbFByaWNlIiwiaGVpZ2h0IiwidW5kZWZpbmVkIiwid2lkdGgiLCJicmVhZHRoIiwidmFyaWFudHNXaXRoSWRzIiwiZmluZE1hbnkiLCJzZWxlY3QiLCJhbGxJbWFnZXMiLCJhbGxEaXNjb3VudHMiLCJ2YXJpYW50V2l0aElkIiwiZmluZCIsInYiLCJpbWFnZXMiLCJwdXNoIiwiaW1hZ2UiLCJwcm9kdWN0VmFyaWFudElkIiwiaW1hZ2VVcmwiLCJpc1ByaW1hcnkiLCJkaXNjb3VudHMiLCJkaXNjb3VudCIsImRpc2NvdW50VHlwZSIsImRpc2NvdW50VmFsdWUiLCJzdGFydERhdGUiLCJEYXRlIiwiZW5kRGF0ZSIsInByb2R1Y3RWYXJpYW50SW1hZ2UiLCJwcm9kdWN0RGlzY291bnQiLCJpbmNsdWRlIiwiUHJvZHVjdFZhcmlhbnRJbWFnZSIsIm1heFdhaXQiLCJ0aW1lb3V0IiwiZXJyb3IiLCJQcmlzbWFDbGllbnRLbm93blJlcXVlc3RFcnJvciIsImNvZGUiLCJtZXNzYWdlIiwiR2V0UHJvZHVjdEJ5SWQiLCJ3aXRoRGlzY291bnRzIiwiaW5jbHVkZVVuYXBwcm92ZWQiLCJ3aGVyZUNsYXVzZSIsInNlbGxlciIsImNhdGVnb3J5IiwicGFyZW50Q2F0ZWdvcnkiLCJHZXRQcm9kdWN0VmFyaWFudEJ5SWQiLCJyZXZpZXdzIiwiUGlja3VwbG9jYXRpb24iLCJpc0RlZmF1bHQiLCJ0YWtlIiwiaXNFbXB0eSIsIlVwZGF0ZVByb2R1Y3QiLCJleGlzdGluZ1Byb2R1Y3QiLCJ1cHNlcnQiLCJ1cGRhdGUiLCJhbGxvd2VkRmllbGRzIiwidXBkYXRlZFByb2R1Y3QiLCJEZWxldGVQcm9kdWN0IiwicHJvZHVjdEltYWdlIiwiZGVsZXRlTWFueSIsImRlbGV0ZSIsIkdldEFsbFByb2R1Y3RzIiwiZnJvbVByaWNlIiwidG9QcmljZSIsInNlYXJjaCIsIm9ubHlEaXNjb3VudGVkIiwiY3VycmVudERhdGUiLCJmaWx0ZXJzIiwicHJvZHVjdHMiLCJPUiIsImNvbnRhaW5zIiwibW9kZSIsInNvbWUiLCJBTkQiLCJsdGUiLCJndGUiLCJvcmRlckJ5IiwiZmlsdGVyIiwiR2V0UHJvZHVjdHNCeVNlbGxlciIsIkFkZFByb2R1Y3RJbWFnZSIsImltYWdlRGF0YSIsInVwZGF0ZU1hbnkiLCJuZXdJbWFnZSIsIkRlbGV0ZVByb2R1Y3RJbWFnZSIsImltYWdlSWQiLCJBZGRQcm9kdWN0VmFyaWFudCIsInZhcmlhbnREYXRhIiwibmV3VmFyaWFudCIsIlByb2R1Y3REaXNjb3VudCIsIlVwZGF0ZVByb2R1Y3RWYXJpYW50IiwidXBkYXRlZFZhcmlhbnQiLCJEZWxldGVQcm9kdWN0VmFyaWFudCIsInZhcmlhbnRJZCIsIlVwZGF0ZVByb2R1Y3REaXNjb3VudCIsImRpc2NvdW50RGF0YSIsInVwZGF0ZWREaXNjb3VudCIsIkRlbGV0ZVByb2R1Y3REaXNjb3VudCIsImRpc2NvdW50SWQiLCJBZGRQcm9kdWN0VmFyaWFudEltYWdlIiwiRGVsZXRlUHJvZHVjdFZhcmlhbnRJbWFnZSIsIkFkZFByb2R1Y3RWYXJpYW50RGlzY291bnQiLCJuZXdEaXNjb3VudCIsIlVwZGF0ZVByb2R1Y3RWYXJpYW50RGlzY291bnQiLCJEZWxldGVQcm9kdWN0VmFyaWFudERpc2NvdW50IiwiQnVsa1VwbG9hZFByb2R1Y3RzIiwidmFyaWFudEltYWdlcyIsInZhcmlhbnREaXNjb3VudHMiLCJyZXN1bHQiLCJjcmVhdGVkUHJvZHVjdHMiLCJzdWJjYXRlZ29yeSIsImdzdFBlcmNlbnRhZ2UiLCJoYXNTdWJjYXRlZ29yeSIsInN1YmNhdGVnb3J5VHlwZSIsImZpbmFsQ2F0ZWdvcnlOYW1lIiwibWFpbkNhdGVnb3J5IiwiZmluZEZpcnN0IiwiZXF1YWxzIiwibm9ybWFsaXplZENhdGVnb3J5TmFtZSIsImNoYXJBdCIsInRvVXBwZXJDYXNlIiwic2xpY2UiLCJ0b0xvd2VyQ2FzZSIsInRyaW0iLCJzdWJjYXRlZ29yeVJlY29yZCIsInBhcmVudENhdGVnb3J5SWQiLCJub3JtYWxpemVkU3ViY2F0ZWdvcnlOYW1lIiwicHJvZHVjdFZhcmlhbnRzIiwiU3RyaW5nIiwidmFyaWFudEltYWdlc0ZvclZhcmlhbnQiLCJpbWciLCJ2YXJpYW50RGlzY291bnRzRm9yVmFyaWFudCIsImRpc2MiLCJjb21wbGV0ZVByb2R1Y3QiLCJwcmlzbWFFcnJvciIsImRldGFpbHMiLCJzdWNjZXNzIiwiZXJyb3JzIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/modules/services/ProductService.ts\n");

/***/ }),

/***/ "(rsc)/./src/modules/validations/ProductValidation.ts":
/*!******************************************************!*\
  !*** ./src/modules/validations/ProductValidation.ts ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ProductValidation: () => (/* binding */ ProductValidation)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v3/types.js\");\n\nclass ProductValidation {\n    static CreateProduct() {\n        return zod__WEBPACK_IMPORTED_MODULE_0__.object({\n            productSKU: zod__WEBPACK_IMPORTED_MODULE_0__.string().min(1, \"Product SKU is required\"),\n            sellerId: zod__WEBPACK_IMPORTED_MODULE_0__.string().min(1, \"Seller ID is required\"),\n            categoryId: zod__WEBPACK_IMPORTED_MODULE_0__.string().min(1, \"Category ID is required\"),\n            name: zod__WEBPACK_IMPORTED_MODULE_0__.string().min(1, \"Product name is required\"),\n            description: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n            brand: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n            aboutProduct: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n            isApproved: zod__WEBPACK_IMPORTED_MODULE_0__.boolean().optional(),\n            wholesale: zod__WEBPACK_IMPORTED_MODULE_0__.boolean().optional(),\n            hsnCode: zod__WEBPACK_IMPORTED_MODULE_0__.string().regex(/^\\d{6,8}$/, \"HSN code must be 6-8 digits\").optional(),\n            linkName: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n            relatedProducts: zod__WEBPACK_IMPORTED_MODULE_0__.array(zod__WEBPACK_IMPORTED_MODULE_0__.object({\n                linkName: zod__WEBPACK_IMPORTED_MODULE_0__.string().min(1, \"Link name is required\"),\n                url: zod__WEBPACK_IMPORTED_MODULE_0__.string().url(\"Each related product must be a valid URL\")\n            })).optional().nullable(),\n            GST: zod__WEBPACK_IMPORTED_MODULE_0__.object({\n                percentage: zod__WEBPACK_IMPORTED_MODULE_0__.number().positive(\"GST percentage must be positive\")\n            }).optional(),\n            variants: zod__WEBPACK_IMPORTED_MODULE_0__.array(zod__WEBPACK_IMPORTED_MODULE_0__.object({\n                productVariantSKU: zod__WEBPACK_IMPORTED_MODULE_0__.string().min(1, \"Variant SKU is required\"),\n                title: zod__WEBPACK_IMPORTED_MODULE_0__.string().min(1, \"Variant title is required\"),\n                description: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n                price: zod__WEBPACK_IMPORTED_MODULE_0__.number().positive(\"Price must be positive\"),\n                stockQuantity: zod__WEBPACK_IMPORTED_MODULE_0__.number().int().min(0, \"Stock quantity cannot be negative\"),\n                productWeight: zod__WEBPACK_IMPORTED_MODULE_0__.number().optional(),\n                variantType: zod__WEBPACK_IMPORTED_MODULE_0__.string().min(1, \"Variant type is required\"),\n                variantValue: zod__WEBPACK_IMPORTED_MODULE_0__.string().min(1, \"Variant value is required\"),\n                height: zod__WEBPACK_IMPORTED_MODULE_0__.number().optional(),\n                width: zod__WEBPACK_IMPORTED_MODULE_0__.number().optional(),\n                breadth: zod__WEBPACK_IMPORTED_MODULE_0__.number().optional(),\n                images: zod__WEBPACK_IMPORTED_MODULE_0__.array(zod__WEBPACK_IMPORTED_MODULE_0__.object({\n                    imageUrl: zod__WEBPACK_IMPORTED_MODULE_0__.string().min(1, \"Image URL is required\"),\n                    isPrimary: zod__WEBPACK_IMPORTED_MODULE_0__.boolean().optional().default(false)\n                })).optional(),\n                discounts: zod__WEBPACK_IMPORTED_MODULE_0__.array(zod__WEBPACK_IMPORTED_MODULE_0__.object({\n                    discountType: zod__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\n                        \"percentage\",\n                        \"amount\"\n                    ]),\n                    discountValue: zod__WEBPACK_IMPORTED_MODULE_0__.number().positive(\"Discount value must be positive\"),\n                    startDate: zod__WEBPACK_IMPORTED_MODULE_0__.string().datetime(),\n                    endDate: zod__WEBPACK_IMPORTED_MODULE_0__.string().datetime()\n                })).optional()\n            })).min(1, \"At least one variant is required\")\n        });\n    }\n    static UpdateProduct() {\n        return zod__WEBPACK_IMPORTED_MODULE_0__.object({\n            categoryId: zod__WEBPACK_IMPORTED_MODULE_0__.string().min(1, \"Category ID is required\"),\n            name: zod__WEBPACK_IMPORTED_MODULE_0__.string().min(1, \"Product name is required\").optional(),\n            description: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n            brand: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n            aboutProduct: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n            isApproved: zod__WEBPACK_IMPORTED_MODULE_0__.boolean().optional(),\n            wholesale: zod__WEBPACK_IMPORTED_MODULE_0__.boolean().optional(),\n            hsnCode: zod__WEBPACK_IMPORTED_MODULE_0__.string().regex(/^\\d{6,8}$/, \"HSN code must be 6-8 digits\").optional(),\n            linkName: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n            relatedProducts: zod__WEBPACK_IMPORTED_MODULE_0__.array(zod__WEBPACK_IMPORTED_MODULE_0__.object({\n                linkName: zod__WEBPACK_IMPORTED_MODULE_0__.string().min(1, \"Link name is required\"),\n                url: zod__WEBPACK_IMPORTED_MODULE_0__.string().url(\"Each related product must be a valid URL\")\n            })).optional().nullable(),\n            GST: zod__WEBPACK_IMPORTED_MODULE_0__.object({\n                percentage: zod__WEBPACK_IMPORTED_MODULE_0__.coerce.number().min(0, \"GST percentage must be non-negative\").max(100, \"GST percentage cannot exceed 100\")\n            }).optional()\n        });\n    }\n    static AddProductVariantImage() {\n        return zod__WEBPACK_IMPORTED_MODULE_0__.object({\n            productVariantId: zod__WEBPACK_IMPORTED_MODULE_0__.string().min(1, \"Product variant ID is required\"),\n            imageUrl: zod__WEBPACK_IMPORTED_MODULE_0__.string().min(1, \"Image URL is required\"),\n            isPrimary: zod__WEBPACK_IMPORTED_MODULE_0__.boolean().optional().default(false)\n        });\n    }\n    static AddProductVariant() {\n        return zod__WEBPACK_IMPORTED_MODULE_0__.object({\n            productId: zod__WEBPACK_IMPORTED_MODULE_0__.string().min(1, \"Product ID is required\"),\n            productVariantSKU: zod__WEBPACK_IMPORTED_MODULE_0__.string().min(1, \"Variant SKU is required\"),\n            title: zod__WEBPACK_IMPORTED_MODULE_0__.string().min(1, \"Variant title is required\"),\n            description: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n            price: zod__WEBPACK_IMPORTED_MODULE_0__.number().positive(\"Price must be positive\"),\n            stockQuantity: zod__WEBPACK_IMPORTED_MODULE_0__.number().int().min(0, \"Stock quantity cannot be negative\"),\n            productWeight: zod__WEBPACK_IMPORTED_MODULE_0__.number().optional(),\n            variantType: zod__WEBPACK_IMPORTED_MODULE_0__.string().min(1, \"Variant type is required\"),\n            variantValue: zod__WEBPACK_IMPORTED_MODULE_0__.string().min(1, \"Variant value is required\"),\n            height: zod__WEBPACK_IMPORTED_MODULE_0__.number().optional(),\n            width: zod__WEBPACK_IMPORTED_MODULE_0__.number().optional(),\n            breadth: zod__WEBPACK_IMPORTED_MODULE_0__.number().optional(),\n            images: zod__WEBPACK_IMPORTED_MODULE_0__.array(zod__WEBPACK_IMPORTED_MODULE_0__.object({\n                imageUrl: zod__WEBPACK_IMPORTED_MODULE_0__.string().min(1, \"Image URL is required\"),\n                isPrimary: zod__WEBPACK_IMPORTED_MODULE_0__.boolean().optional().default(false)\n            })).optional(),\n            discounts: zod__WEBPACK_IMPORTED_MODULE_0__.array(zod__WEBPACK_IMPORTED_MODULE_0__.object({\n                discountType: zod__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\n                    \"percentage\",\n                    \"amount\"\n                ]),\n                discountValue: zod__WEBPACK_IMPORTED_MODULE_0__.number().positive(\"Discount value must be positive\"),\n                startDate: zod__WEBPACK_IMPORTED_MODULE_0__.string().datetime(),\n                endDate: zod__WEBPACK_IMPORTED_MODULE_0__.string().datetime()\n            })).optional()\n        });\n    }\n    static UpdateProductVariant() {\n        return zod__WEBPACK_IMPORTED_MODULE_0__.object({\n            id: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n            productId: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n            productVariantSKU: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n            title: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n            description: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n            price: zod__WEBPACK_IMPORTED_MODULE_0__.number(),\n            stockQuantity: zod__WEBPACK_IMPORTED_MODULE_0__.number(),\n            productWeight: zod__WEBPACK_IMPORTED_MODULE_0__.number().optional(),\n            variantType: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n            variantValue: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n            height: zod__WEBPACK_IMPORTED_MODULE_0__.number().optional(),\n            width: zod__WEBPACK_IMPORTED_MODULE_0__.number().optional(),\n            breadth: zod__WEBPACK_IMPORTED_MODULE_0__.number().optional(),\n            images: zod__WEBPACK_IMPORTED_MODULE_0__.array(zod__WEBPACK_IMPORTED_MODULE_0__.object({\n                imageUrl: zod__WEBPACK_IMPORTED_MODULE_0__.string().min(1, \"Image URL is required\"),\n                isPrimary: zod__WEBPACK_IMPORTED_MODULE_0__.boolean().optional().default(false)\n            })).optional(),\n            discounts: zod__WEBPACK_IMPORTED_MODULE_0__.array(zod__WEBPACK_IMPORTED_MODULE_0__.object({\n                discountType: zod__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\n                    \"percentage\",\n                    \"amount\"\n                ]),\n                discountValue: zod__WEBPACK_IMPORTED_MODULE_0__.number().positive(\"Discount value must be positive\"),\n                startDate: zod__WEBPACK_IMPORTED_MODULE_0__.string().datetime(),\n                endDate: zod__WEBPACK_IMPORTED_MODULE_0__.string().datetime()\n            })).optional()\n        });\n    }\n    static AddProductVariantDiscount() {\n        return zod__WEBPACK_IMPORTED_MODULE_0__.object({\n            productVariantId: zod__WEBPACK_IMPORTED_MODULE_0__.string().min(1, \"Product variant ID is required\"),\n            discountType: zod__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\n                \"percentage\",\n                \"amount\"\n            ]),\n            discountValue: zod__WEBPACK_IMPORTED_MODULE_0__.number().positive(\"Discount value must be positive\"),\n            startDate: zod__WEBPACK_IMPORTED_MODULE_0__.string().datetime(),\n            endDate: zod__WEBPACK_IMPORTED_MODULE_0__.string().datetime()\n        });\n    }\n    static UpdateProductVariantDiscount() {\n        return zod__WEBPACK_IMPORTED_MODULE_0__.object({\n            id: zod__WEBPACK_IMPORTED_MODULE_0__.string().min(1, \"Discount ID is required\"),\n            discountType: zod__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\n                \"percentage\",\n                \"amount\"\n            ]),\n            discountValue: zod__WEBPACK_IMPORTED_MODULE_0__.number().positive(\"Discount value must be positive\"),\n            startDate: zod__WEBPACK_IMPORTED_MODULE_0__.string().datetime(),\n            endDate: zod__WEBPACK_IMPORTED_MODULE_0__.string().datetime()\n        });\n    }\n    static BulkUploadProduct() {\n        return zod__WEBPACK_IMPORTED_MODULE_0__.object({\n            products: zod__WEBPACK_IMPORTED_MODULE_0__.array(zod__WEBPACK_IMPORTED_MODULE_0__.object({\n                productSKU: zod__WEBPACK_IMPORTED_MODULE_0__.string().min(1, \"Product SKU is required\"),\n                category: zod__WEBPACK_IMPORTED_MODULE_0__.string().min(1, \"Category is required\"),\n                name: zod__WEBPACK_IMPORTED_MODULE_0__.string().min(1, \"Product name is required\"),\n                description: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n                isApproved: zod__WEBPACK_IMPORTED_MODULE_0__.boolean().optional(),\n                aboutProduct: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n                brand: zod__WEBPACK_IMPORTED_MODULE_0__.string().min(1, \"Brand is required\"),\n                hsnCode: zod__WEBPACK_IMPORTED_MODULE_0__.union([\n                    zod__WEBPACK_IMPORTED_MODULE_0__.string().regex(/^\\d{6,8}$/, \"HSN code must be 6-8 digits\"),\n                    zod__WEBPACK_IMPORTED_MODULE_0__.number().transform((val)=>String(val))\n                ]).transform((val)=>val.toString().padStart(8, '0')).optional(),\n                linkName: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n                relatedProducts: zod__WEBPACK_IMPORTED_MODULE_0__.array(zod__WEBPACK_IMPORTED_MODULE_0__.object({\n                    linkName: zod__WEBPACK_IMPORTED_MODULE_0__.string().min(1, \"Link name is required\"),\n                    url: zod__WEBPACK_IMPORTED_MODULE_0__.string().url(\"Each related product must be a valid URL\")\n                })).optional(),\n                GST: zod__WEBPACK_IMPORTED_MODULE_0__.object({\n                    percentage: zod__WEBPACK_IMPORTED_MODULE_0__.number().positive(\"GST percentage must be positive\")\n                }).optional()\n            })),\n            variants: zod__WEBPACK_IMPORTED_MODULE_0__.array(zod__WEBPACK_IMPORTED_MODULE_0__.object({\n                productSKU: zod__WEBPACK_IMPORTED_MODULE_0__.string().min(1, \"Product SKU is required\"),\n                productVariantSKU: zod__WEBPACK_IMPORTED_MODULE_0__.string().min(1, \"Variant SKU is required\"),\n                title: zod__WEBPACK_IMPORTED_MODULE_0__.string().min(1, \"Variant title is required\"),\n                description: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n                price: zod__WEBPACK_IMPORTED_MODULE_0__.number().positive(\"Price must be positive\"),\n                stockQuantity: zod__WEBPACK_IMPORTED_MODULE_0__.number().int().min(0, \"Stock quantity cannot be negative\"),\n                variantType: zod__WEBPACK_IMPORTED_MODULE_0__.string().min(1, \"Variant type is required\"),\n                variantValue: zod__WEBPACK_IMPORTED_MODULE_0__.string().min(1, \"Variant value is required\"),\n                productWeight: zod__WEBPACK_IMPORTED_MODULE_0__.number().min(0, \"Product weight cannot be negative\").optional()\n            })),\n            variantImages: zod__WEBPACK_IMPORTED_MODULE_0__.array(zod__WEBPACK_IMPORTED_MODULE_0__.object({\n                productVariantSKU: zod__WEBPACK_IMPORTED_MODULE_0__.string().min(1, \"Variant SKU is required\"),\n                imageUrl: zod__WEBPACK_IMPORTED_MODULE_0__.string().min(1, \"Image URL is required\"),\n                isPrimary: zod__WEBPACK_IMPORTED_MODULE_0__.boolean().optional()\n            })).optional(),\n            variantDiscounts: zod__WEBPACK_IMPORTED_MODULE_0__.array(zod__WEBPACK_IMPORTED_MODULE_0__.object({\n                productVariantSKU: zod__WEBPACK_IMPORTED_MODULE_0__.string().min(1, \"Variant SKU is required\"),\n                discountType: zod__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\n                    \"percentage\",\n                    \"amount\"\n                ]),\n                discountValue: zod__WEBPACK_IMPORTED_MODULE_0__.number().positive(\"Discount value must be positive\"),\n                startDate: zod__WEBPACK_IMPORTED_MODULE_0__.union([\n                    zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n                    zod__WEBPACK_IMPORTED_MODULE_0__.number()\n                ]).transform((val)=>typeof val === 'number' ? new Date(Math.round((val - 25569) * 86400 * 1000)).toISOString() : String(val)),\n                endDate: zod__WEBPACK_IMPORTED_MODULE_0__.union([\n                    zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n                    zod__WEBPACK_IMPORTED_MODULE_0__.number()\n                ]).transform((val)=>typeof val === 'number' ? new Date(Math.round((val - 25569) * 86400 * 1000)).toISOString() : String(val))\n            })).optional(),\n            sellerId: zod__WEBPACK_IMPORTED_MODULE_0__.string().min(1, \"Seller ID is required\")\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbW9kdWxlcy92YWxpZGF0aW9ucy9Qcm9kdWN0VmFsaWRhdGlvbi50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUF3QjtBQUVqQixNQUFNQztJQUNYLE9BQU9DLGdCQUFnQjtRQUNyQixPQUFPRix1Q0FBUSxDQUFDO1lBQ2RJLFlBQVlKLHVDQUFRLEdBQUdNLEdBQUcsQ0FBQyxHQUFHO1lBQzlCQyxVQUFVUCx1Q0FBUSxHQUFHTSxHQUFHLENBQUMsR0FBRztZQUM1QkUsWUFBWVIsdUNBQVEsR0FBR00sR0FBRyxDQUFDLEdBQUc7WUFDOUJHLE1BQU1ULHVDQUFRLEdBQUdNLEdBQUcsQ0FBQyxHQUFHO1lBQ3hCSSxhQUFhVix1Q0FBUSxHQUFHVyxRQUFRO1lBQ2hDQyxPQUFPWix1Q0FBUSxHQUFHVyxRQUFRO1lBQzFCRSxjQUFjYix1Q0FBUSxHQUFHVyxRQUFRO1lBQ2pDRyxZQUFZZCx3Q0FBUyxHQUFHVyxRQUFRO1lBQ2hDSyxXQUFXaEIsd0NBQVMsR0FBR1csUUFBUTtZQUMvQk0sU0FBU2pCLHVDQUFRLEdBQUdrQixLQUFLLENBQUMsYUFBYSwrQkFBK0JQLFFBQVE7WUFDOUVRLFVBQVVuQix1Q0FBUSxHQUFHVyxRQUFRO1lBQzdCUyxpQkFBaUJwQixzQ0FBTyxDQUFDQSx1Q0FBUSxDQUFDO2dCQUNoQ21CLFVBQVVuQix1Q0FBUSxHQUFHTSxHQUFHLENBQUMsR0FBRztnQkFDNUJnQixLQUFLdEIsdUNBQVEsR0FBR3NCLEdBQUcsQ0FBQztZQUN0QixJQUFJWCxRQUFRLEdBQUdZLFFBQVE7WUFDdkJDLEtBQUt4Qix1Q0FBUSxDQUFDO2dCQUNaeUIsWUFBWXpCLHVDQUFRLEdBQUcyQixRQUFRLENBQUM7WUFDbEMsR0FBR2hCLFFBQVE7WUFDWGlCLFVBQVU1QixzQ0FBTyxDQUNmQSx1Q0FBUSxDQUFDO2dCQUNQNkIsbUJBQW1CN0IsdUNBQVEsR0FBR00sR0FBRyxDQUFDLEdBQUc7Z0JBQ3JDd0IsT0FBTzlCLHVDQUFRLEdBQUdNLEdBQUcsQ0FBQyxHQUFHO2dCQUN6QkksYUFBYVYsdUNBQVEsR0FBR1csUUFBUTtnQkFDaENvQixPQUFPL0IsdUNBQVEsR0FBRzJCLFFBQVEsQ0FBQztnQkFDM0JLLGVBQWVoQyx1Q0FBUSxHQUFHaUMsR0FBRyxHQUFHM0IsR0FBRyxDQUFDLEdBQUc7Z0JBQ3ZDNEIsZUFBZWxDLHVDQUFRLEdBQUdXLFFBQVE7Z0JBQ2xDd0IsYUFBYW5DLHVDQUFRLEdBQUdNLEdBQUcsQ0FBQyxHQUFHO2dCQUMvQjhCLGNBQWNwQyx1Q0FBUSxHQUFHTSxHQUFHLENBQUMsR0FBRztnQkFDaEMrQixRQUFRckMsdUNBQVEsR0FBR1csUUFBUTtnQkFDM0IyQixPQUFPdEMsdUNBQVEsR0FBR1csUUFBUTtnQkFDMUI0QixTQUFTdkMsdUNBQVEsR0FBR1csUUFBUTtnQkFDNUI2QixRQUFReEMsc0NBQU8sQ0FDYkEsdUNBQVEsQ0FBQztvQkFDUHlDLFVBQVV6Qyx1Q0FBUSxHQUFHTSxHQUFHLENBQUMsR0FBRztvQkFDNUJvQyxXQUFXMUMsd0NBQVMsR0FBR1csUUFBUSxHQUFHZ0MsT0FBTyxDQUFDO2dCQUM1QyxJQUNBaEMsUUFBUTtnQkFDVmlDLFdBQVc1QyxzQ0FBTyxDQUNoQkEsdUNBQVEsQ0FBQztvQkFDUDZDLGNBQWM3Qyx3Q0FBTSxDQUFDO3dCQUFDO3dCQUFjO3FCQUFTO29CQUM3QytDLGVBQWUvQyx1Q0FBUSxHQUFHMkIsUUFBUSxDQUFDO29CQUNuQ3FCLFdBQVdoRCx1Q0FBUSxHQUFHaUQsUUFBUTtvQkFDOUJDLFNBQVNsRCx1Q0FBUSxHQUFHaUQsUUFBUTtnQkFDOUIsSUFDQXRDLFFBQVE7WUFDWixJQUNBTCxHQUFHLENBQUMsR0FBRztRQUNYO0lBQ0Y7SUFFQSxPQUFPNkMsZ0JBQWdCO1FBQ3JCLE9BQU9uRCx1Q0FBUSxDQUFDO1lBQ2RRLFlBQVlSLHVDQUFRLEdBQUdNLEdBQUcsQ0FBQyxHQUFHO1lBQzlCRyxNQUFNVCx1Q0FBUSxHQUFHTSxHQUFHLENBQUMsR0FBRyw0QkFBNEJLLFFBQVE7WUFDNURELGFBQWFWLHVDQUFRLEdBQUdXLFFBQVE7WUFDaENDLE9BQU9aLHVDQUFRLEdBQUdXLFFBQVE7WUFDMUJFLGNBQWNiLHVDQUFRLEdBQUdXLFFBQVE7WUFDakNHLFlBQVlkLHdDQUFTLEdBQUdXLFFBQVE7WUFDaENLLFdBQVdoQix3Q0FBUyxHQUFHVyxRQUFRO1lBQy9CTSxTQUFTakIsdUNBQVEsR0FBR2tCLEtBQUssQ0FBQyxhQUFhLCtCQUErQlAsUUFBUTtZQUM5RVEsVUFBVW5CLHVDQUFRLEdBQUdXLFFBQVE7WUFDN0JTLGlCQUFpQnBCLHNDQUFPLENBQUNBLHVDQUFRLENBQUM7Z0JBQ2hDbUIsVUFBVW5CLHVDQUFRLEdBQUdNLEdBQUcsQ0FBQyxHQUFHO2dCQUM1QmdCLEtBQUt0Qix1Q0FBUSxHQUFHc0IsR0FBRyxDQUFDO1lBQ3RCLElBQUlYLFFBQVEsR0FBR1ksUUFBUTtZQUN2QkMsS0FBS3hCLHVDQUFRLENBQUM7Z0JBQ1p5QixZQUFZekIsdUNBQVEsQ0FBQzBCLE1BQU0sR0FBR3BCLEdBQUcsQ0FBQyxHQUFHLHVDQUF1QytDLEdBQUcsQ0FBQyxLQUFLO1lBQ3ZGLEdBQUcxQyxRQUFRO1FBQ2I7SUFDRjtJQUVBLE9BQU8yQyx5QkFBeUI7UUFDOUIsT0FBT3RELHVDQUFRLENBQUM7WUFDZHVELGtCQUFrQnZELHVDQUFRLEdBQUdNLEdBQUcsQ0FBQyxHQUFHO1lBQ3BDbUMsVUFBVXpDLHVDQUFRLEdBQUdNLEdBQUcsQ0FBQyxHQUFHO1lBQzVCb0MsV0FBVzFDLHdDQUFTLEdBQUdXLFFBQVEsR0FBR2dDLE9BQU8sQ0FBQztRQUM1QztJQUNGO0lBRUEsT0FBT2Esb0JBQW9CO1FBQ3pCLE9BQU94RCx1Q0FBUSxDQUFDO1lBQ2R5RCxXQUFXekQsdUNBQVEsR0FBR00sR0FBRyxDQUFDLEdBQUc7WUFDN0J1QixtQkFBbUI3Qix1Q0FBUSxHQUFHTSxHQUFHLENBQUMsR0FBRztZQUNyQ3dCLE9BQU85Qix1Q0FBUSxHQUFHTSxHQUFHLENBQUMsR0FBRztZQUN6QkksYUFBYVYsdUNBQVEsR0FBR1csUUFBUTtZQUNoQ29CLE9BQU8vQix1Q0FBUSxHQUFHMkIsUUFBUSxDQUFDO1lBQzNCSyxlQUFlaEMsdUNBQVEsR0FBR2lDLEdBQUcsR0FBRzNCLEdBQUcsQ0FBQyxHQUFHO1lBQ3ZDNEIsZUFBZWxDLHVDQUFRLEdBQUdXLFFBQVE7WUFDbEN3QixhQUFhbkMsdUNBQVEsR0FBR00sR0FBRyxDQUFDLEdBQUc7WUFDL0I4QixjQUFjcEMsdUNBQVEsR0FBR00sR0FBRyxDQUFDLEdBQUc7WUFDaEMrQixRQUFRckMsdUNBQVEsR0FBR1csUUFBUTtZQUMzQjJCLE9BQU90Qyx1Q0FBUSxHQUFHVyxRQUFRO1lBQzFCNEIsU0FBU3ZDLHVDQUFRLEdBQUdXLFFBQVE7WUFDNUI2QixRQUFReEMsc0NBQU8sQ0FDYkEsdUNBQVEsQ0FBQztnQkFDUHlDLFVBQVV6Qyx1Q0FBUSxHQUFHTSxHQUFHLENBQUMsR0FBRztnQkFDNUJvQyxXQUFXMUMsd0NBQVMsR0FBR1csUUFBUSxHQUFHZ0MsT0FBTyxDQUFDO1lBQzVDLElBQ0FoQyxRQUFRO1lBQ1ZpQyxXQUFXNUMsc0NBQU8sQ0FDaEJBLHVDQUFRLENBQUM7Z0JBQ1A2QyxjQUFjN0Msd0NBQU0sQ0FBQztvQkFBQztvQkFBYztpQkFBUztnQkFDN0MrQyxlQUFlL0MsdUNBQVEsR0FBRzJCLFFBQVEsQ0FBQztnQkFDbkNxQixXQUFXaEQsdUNBQVEsR0FBR2lELFFBQVE7Z0JBQzlCQyxTQUFTbEQsdUNBQVEsR0FBR2lELFFBQVE7WUFDOUIsSUFDQXRDLFFBQVE7UUFDWjtJQUNGO0lBRUEsT0FBTytDLHVCQUF1QjtRQUM1QixPQUFPMUQsdUNBQVEsQ0FBQztZQUNkMkQsSUFBSTNELHVDQUFRO1lBQ1p5RCxXQUFXekQsdUNBQVE7WUFDbkI2QixtQkFBbUI3Qix1Q0FBUTtZQUMzQjhCLE9BQU85Qix1Q0FBUTtZQUNmVSxhQUFhVix1Q0FBUSxHQUFHVyxRQUFRO1lBQ2hDb0IsT0FBTy9CLHVDQUFRO1lBQ2ZnQyxlQUFlaEMsdUNBQVE7WUFDdkJrQyxlQUFlbEMsdUNBQVEsR0FBR1csUUFBUTtZQUNsQ3dCLGFBQWFuQyx1Q0FBUTtZQUNyQm9DLGNBQWNwQyx1Q0FBUTtZQUN0QnFDLFFBQVFyQyx1Q0FBUSxHQUFHVyxRQUFRO1lBQzNCMkIsT0FBT3RDLHVDQUFRLEdBQUdXLFFBQVE7WUFDMUI0QixTQUFTdkMsdUNBQVEsR0FBR1csUUFBUTtZQUM1QjZCLFFBQVF4QyxzQ0FBTyxDQUNiQSx1Q0FBUSxDQUFDO2dCQUNQeUMsVUFBVXpDLHVDQUFRLEdBQUdNLEdBQUcsQ0FBQyxHQUFHO2dCQUM1Qm9DLFdBQVcxQyx3Q0FBUyxHQUFHVyxRQUFRLEdBQUdnQyxPQUFPLENBQUM7WUFDNUMsSUFDQWhDLFFBQVE7WUFDVmlDLFdBQVc1QyxzQ0FBTyxDQUNoQkEsdUNBQVEsQ0FBQztnQkFDUDZDLGNBQWM3Qyx3Q0FBTSxDQUFDO29CQUFDO29CQUFjO2lCQUFTO2dCQUM3QytDLGVBQWUvQyx1Q0FBUSxHQUFHMkIsUUFBUSxDQUFDO2dCQUNuQ3FCLFdBQVdoRCx1Q0FBUSxHQUFHaUQsUUFBUTtnQkFDOUJDLFNBQVNsRCx1Q0FBUSxHQUFHaUQsUUFBUTtZQUM5QixJQUNBdEMsUUFBUTtRQUNaO0lBQ0Y7SUFFQSxPQUFPaUQsNEJBQTRCO1FBQ2pDLE9BQU81RCx1Q0FBUSxDQUFDO1lBQ2R1RCxrQkFBa0J2RCx1Q0FBUSxHQUFHTSxHQUFHLENBQUMsR0FBRztZQUNwQ3VDLGNBQWM3Qyx3Q0FBTSxDQUFDO2dCQUFDO2dCQUFjO2FBQVM7WUFDN0MrQyxlQUFlL0MsdUNBQVEsR0FBRzJCLFFBQVEsQ0FBQztZQUNuQ3FCLFdBQVdoRCx1Q0FBUSxHQUFHaUQsUUFBUTtZQUM5QkMsU0FBU2xELHVDQUFRLEdBQUdpRCxRQUFRO1FBQzlCO0lBQ0Y7SUFFQSxPQUFPWSwrQkFBK0I7UUFDcEMsT0FBTzdELHVDQUFRLENBQUM7WUFDZDJELElBQUkzRCx1Q0FBUSxHQUFHTSxHQUFHLENBQUMsR0FBRztZQUN0QnVDLGNBQWM3Qyx3Q0FBTSxDQUFDO2dCQUFDO2dCQUFjO2FBQVM7WUFDN0MrQyxlQUFlL0MsdUNBQVEsR0FBRzJCLFFBQVEsQ0FBQztZQUNuQ3FCLFdBQVdoRCx1Q0FBUSxHQUFHaUQsUUFBUTtZQUM5QkMsU0FBU2xELHVDQUFRLEdBQUdpRCxRQUFRO1FBQzlCO0lBQ0Y7SUFFQSxPQUFPYSxvQkFBb0I7UUFDekIsT0FBTzlELHVDQUFRLENBQUM7WUFDZCtELFVBQVUvRCxzQ0FBTyxDQUNmQSx1Q0FBUSxDQUFDO2dCQUNQSSxZQUFZSix1Q0FBUSxHQUFHTSxHQUFHLENBQUMsR0FBRztnQkFDOUIwRCxVQUFVaEUsdUNBQVEsR0FBR00sR0FBRyxDQUFDLEdBQUc7Z0JBQzVCRyxNQUFNVCx1Q0FBUSxHQUFHTSxHQUFHLENBQUMsR0FBRztnQkFDeEJJLGFBQWFWLHVDQUFRLEdBQUdXLFFBQVE7Z0JBQ2hDRyxZQUFZZCx3Q0FBUyxHQUFHVyxRQUFRO2dCQUNoQ0UsY0FBY2IsdUNBQVEsR0FBR1csUUFBUTtnQkFDakNDLE9BQU9aLHVDQUFRLEdBQUdNLEdBQUcsQ0FBQyxHQUFHO2dCQUN6QlcsU0FBU2pCLHNDQUFPLENBQUM7b0JBQ2ZBLHVDQUFRLEdBQUdrQixLQUFLLENBQUMsYUFBYTtvQkFDOUJsQix1Q0FBUSxHQUFHa0UsU0FBUyxDQUFDQyxDQUFBQSxNQUFPQyxPQUFPRDtpQkFDcEMsRUFDRUQsU0FBUyxDQUFDQyxDQUFBQSxNQUFPQSxJQUFJRSxRQUFRLEdBQUdDLFFBQVEsQ0FBQyxHQUFHLE1BQzVDM0QsUUFBUTtnQkFDWFEsVUFBVW5CLHVDQUFRLEdBQUdXLFFBQVE7Z0JBQzdCUyxpQkFBaUJwQixzQ0FBTyxDQUFDQSx1Q0FBUSxDQUFDO29CQUNoQ21CLFVBQVVuQix1Q0FBUSxHQUFHTSxHQUFHLENBQUMsR0FBRztvQkFDNUJnQixLQUFLdEIsdUNBQVEsR0FBR3NCLEdBQUcsQ0FBQztnQkFDdEIsSUFBSVgsUUFBUTtnQkFDWmEsS0FBS3hCLHVDQUFRLENBQUM7b0JBQ1p5QixZQUFZekIsdUNBQVEsR0FBRzJCLFFBQVEsQ0FBQztnQkFDbEMsR0FBR2hCLFFBQVE7WUFDYjtZQUVGaUIsVUFBVTVCLHNDQUFPLENBQ2ZBLHVDQUFRLENBQUM7Z0JBQ1BJLFlBQVlKLHVDQUFRLEdBQUdNLEdBQUcsQ0FBQyxHQUFHO2dCQUM5QnVCLG1CQUFtQjdCLHVDQUFRLEdBQUdNLEdBQUcsQ0FBQyxHQUFHO2dCQUNyQ3dCLE9BQU85Qix1Q0FBUSxHQUFHTSxHQUFHLENBQUMsR0FBRztnQkFDekJJLGFBQWFWLHVDQUFRLEdBQUdXLFFBQVE7Z0JBQ2hDb0IsT0FBTy9CLHVDQUFRLEdBQUcyQixRQUFRLENBQUM7Z0JBQzNCSyxlQUFlaEMsdUNBQVEsR0FBR2lDLEdBQUcsR0FBRzNCLEdBQUcsQ0FBQyxHQUFHO2dCQUN2QzZCLGFBQWFuQyx1Q0FBUSxHQUFHTSxHQUFHLENBQUMsR0FBRztnQkFDL0I4QixjQUFjcEMsdUNBQVEsR0FBR00sR0FBRyxDQUFDLEdBQUc7Z0JBQ2hDNEIsZUFBZWxDLHVDQUFRLEdBQUdNLEdBQUcsQ0FBQyxHQUFHLHFDQUFxQ0ssUUFBUTtZQUNoRjtZQUVGNEQsZUFBZXZFLHNDQUFPLENBQ3BCQSx1Q0FBUSxDQUFDO2dCQUNQNkIsbUJBQW1CN0IsdUNBQVEsR0FBR00sR0FBRyxDQUFDLEdBQUc7Z0JBQ3JDbUMsVUFBVXpDLHVDQUFRLEdBQUdNLEdBQUcsQ0FBQyxHQUFHO2dCQUM1Qm9DLFdBQVcxQyx3Q0FBUyxHQUFHVyxRQUFRO1lBQ2pDLElBQ0FBLFFBQVE7WUFDVjZELGtCQUFrQnhFLHNDQUFPLENBQ3ZCQSx1Q0FBUSxDQUFDO2dCQUNQNkIsbUJBQW1CN0IsdUNBQVEsR0FBR00sR0FBRyxDQUFDLEdBQUc7Z0JBQ3JDdUMsY0FBYzdDLHdDQUFNLENBQUM7b0JBQUM7b0JBQWM7aUJBQVM7Z0JBQzdDK0MsZUFBZS9DLHVDQUFRLEdBQUcyQixRQUFRLENBQUM7Z0JBQ25DcUIsV0FBV2hELHNDQUFPLENBQUM7b0JBQUNBLHVDQUFRO29CQUFJQSx1Q0FBUTtpQkFBRyxFQUFFa0UsU0FBUyxDQUFDQyxDQUFBQSxNQUNyRCxPQUFPQSxRQUFRLFdBQ1gsSUFBSU0sS0FBS0MsS0FBS0MsS0FBSyxDQUFDLENBQUNSLE1BQU0sS0FBSSxJQUFLLFFBQVEsT0FBT1MsV0FBVyxLQUM5RFIsT0FBT0Q7Z0JBRWJqQixTQUFTbEQsc0NBQU8sQ0FBQztvQkFBQ0EsdUNBQVE7b0JBQUlBLHVDQUFRO2lCQUFHLEVBQUVrRSxTQUFTLENBQUNDLENBQUFBLE1BQ25ELE9BQU9BLFFBQVEsV0FDWCxJQUFJTSxLQUFLQyxLQUFLQyxLQUFLLENBQUMsQ0FBQ1IsTUFBTSxLQUFJLElBQUssUUFBUSxPQUFPUyxXQUFXLEtBQzlEUixPQUFPRDtZQUVmLElBQ0F4RCxRQUFRO1lBQ1ZKLFVBQVVQLHVDQUFRLEdBQUdNLEdBQUcsQ0FBQyxHQUFHO1FBQzlCO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsiL2hvbWUvd2Vibm94L2dva3VsIGluZHJhbmlpZS93ZWJzaXRlL3NyYy9tb2R1bGVzL3ZhbGlkYXRpb25zL1Byb2R1Y3RWYWxpZGF0aW9uLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHogfSBmcm9tIFwiem9kXCI7XG5cbmV4cG9ydCBjbGFzcyBQcm9kdWN0VmFsaWRhdGlvbiB7XG4gIHN0YXRpYyBDcmVhdGVQcm9kdWN0KCkge1xuICAgIHJldHVybiB6Lm9iamVjdCh7XG4gICAgICBwcm9kdWN0U0tVOiB6LnN0cmluZygpLm1pbigxLCBcIlByb2R1Y3QgU0tVIGlzIHJlcXVpcmVkXCIpLFxuICAgICAgc2VsbGVySWQ6IHouc3RyaW5nKCkubWluKDEsIFwiU2VsbGVyIElEIGlzIHJlcXVpcmVkXCIpLFxuICAgICAgY2F0ZWdvcnlJZDogei5zdHJpbmcoKS5taW4oMSwgXCJDYXRlZ29yeSBJRCBpcyByZXF1aXJlZFwiKSxcbiAgICAgIG5hbWU6IHouc3RyaW5nKCkubWluKDEsIFwiUHJvZHVjdCBuYW1lIGlzIHJlcXVpcmVkXCIpLFxuICAgICAgZGVzY3JpcHRpb246IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgIGJyYW5kOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICBhYm91dFByb2R1Y3Q6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgIGlzQXBwcm92ZWQ6IHouYm9vbGVhbigpLm9wdGlvbmFsKCksXG4gICAgICB3aG9sZXNhbGU6IHouYm9vbGVhbigpLm9wdGlvbmFsKCksXG4gICAgICBoc25Db2RlOiB6LnN0cmluZygpLnJlZ2V4KC9eXFxkezYsOH0kLywgXCJIU04gY29kZSBtdXN0IGJlIDYtOCBkaWdpdHNcIikub3B0aW9uYWwoKSxcbiAgICAgIGxpbmtOYW1lOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICByZWxhdGVkUHJvZHVjdHM6IHouYXJyYXkoei5vYmplY3Qoe1xuICAgICAgICBsaW5rTmFtZTogei5zdHJpbmcoKS5taW4oMSwgXCJMaW5rIG5hbWUgaXMgcmVxdWlyZWRcIiksXG4gICAgICAgIHVybDogei5zdHJpbmcoKS51cmwoXCJFYWNoIHJlbGF0ZWQgcHJvZHVjdCBtdXN0IGJlIGEgdmFsaWQgVVJMXCIpXG4gICAgICB9KSkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgICAgR1NUOiB6Lm9iamVjdCh7XG4gICAgICAgIHBlcmNlbnRhZ2U6IHoubnVtYmVyKCkucG9zaXRpdmUoXCJHU1QgcGVyY2VudGFnZSBtdXN0IGJlIHBvc2l0aXZlXCIpXG4gICAgICB9KS5vcHRpb25hbCgpLFxuICAgICAgdmFyaWFudHM6IHouYXJyYXkoXG4gICAgICAgIHoub2JqZWN0KHtcbiAgICAgICAgICBwcm9kdWN0VmFyaWFudFNLVTogei5zdHJpbmcoKS5taW4oMSwgXCJWYXJpYW50IFNLVSBpcyByZXF1aXJlZFwiKSxcbiAgICAgICAgICB0aXRsZTogei5zdHJpbmcoKS5taW4oMSwgXCJWYXJpYW50IHRpdGxlIGlzIHJlcXVpcmVkXCIpLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgICAgcHJpY2U6IHoubnVtYmVyKCkucG9zaXRpdmUoXCJQcmljZSBtdXN0IGJlIHBvc2l0aXZlXCIpLFxuICAgICAgICAgIHN0b2NrUXVhbnRpdHk6IHoubnVtYmVyKCkuaW50KCkubWluKDAsIFwiU3RvY2sgcXVhbnRpdHkgY2Fubm90IGJlIG5lZ2F0aXZlXCIpLFxuICAgICAgICAgIHByb2R1Y3RXZWlnaHQ6IHoubnVtYmVyKCkub3B0aW9uYWwoKSxcbiAgICAgICAgICB2YXJpYW50VHlwZTogei5zdHJpbmcoKS5taW4oMSwgXCJWYXJpYW50IHR5cGUgaXMgcmVxdWlyZWRcIiksXG4gICAgICAgICAgdmFyaWFudFZhbHVlOiB6LnN0cmluZygpLm1pbigxLCBcIlZhcmlhbnQgdmFsdWUgaXMgcmVxdWlyZWRcIiksXG4gICAgICAgICAgaGVpZ2h0OiB6Lm51bWJlcigpLm9wdGlvbmFsKCksXG4gICAgICAgICAgd2lkdGg6IHoubnVtYmVyKCkub3B0aW9uYWwoKSxcbiAgICAgICAgICBicmVhZHRoOiB6Lm51bWJlcigpLm9wdGlvbmFsKCksXG4gICAgICAgICAgaW1hZ2VzOiB6LmFycmF5KFxuICAgICAgICAgICAgei5vYmplY3Qoe1xuICAgICAgICAgICAgICBpbWFnZVVybDogei5zdHJpbmcoKS5taW4oMSwgXCJJbWFnZSBVUkwgaXMgcmVxdWlyZWRcIiksXG4gICAgICAgICAgICAgIGlzUHJpbWFyeTogei5ib29sZWFuKCkub3B0aW9uYWwoKS5kZWZhdWx0KGZhbHNlKSxcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgKS5vcHRpb25hbCgpLFxuICAgICAgICAgIGRpc2NvdW50czogei5hcnJheShcbiAgICAgICAgICAgIHoub2JqZWN0KHtcbiAgICAgICAgICAgICAgZGlzY291bnRUeXBlOiB6LmVudW0oW1wicGVyY2VudGFnZVwiLCBcImFtb3VudFwiXSksXG4gICAgICAgICAgICAgIGRpc2NvdW50VmFsdWU6IHoubnVtYmVyKCkucG9zaXRpdmUoXCJEaXNjb3VudCB2YWx1ZSBtdXN0IGJlIHBvc2l0aXZlXCIpLFxuICAgICAgICAgICAgICBzdGFydERhdGU6IHouc3RyaW5nKCkuZGF0ZXRpbWUoKSxcbiAgICAgICAgICAgICAgZW5kRGF0ZTogei5zdHJpbmcoKS5kYXRldGltZSgpLFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICApLm9wdGlvbmFsKCksXG4gICAgICAgIH0pXG4gICAgICApLm1pbigxLCBcIkF0IGxlYXN0IG9uZSB2YXJpYW50IGlzIHJlcXVpcmVkXCIpLFxuICAgIH0pO1xuICB9XG4gXG4gIHN0YXRpYyBVcGRhdGVQcm9kdWN0KCkge1xuICAgIHJldHVybiB6Lm9iamVjdCh7XG4gICAgICBjYXRlZ29yeUlkOiB6LnN0cmluZygpLm1pbigxLCBcIkNhdGVnb3J5IElEIGlzIHJlcXVpcmVkXCIpLFxuICAgICAgbmFtZTogei5zdHJpbmcoKS5taW4oMSwgXCJQcm9kdWN0IG5hbWUgaXMgcmVxdWlyZWRcIikub3B0aW9uYWwoKSxcbiAgICAgIGRlc2NyaXB0aW9uOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICBicmFuZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgYWJvdXRQcm9kdWN0OiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICBpc0FwcHJvdmVkOiB6LmJvb2xlYW4oKS5vcHRpb25hbCgpLFxuICAgICAgd2hvbGVzYWxlOiB6LmJvb2xlYW4oKS5vcHRpb25hbCgpLFxuICAgICAgaHNuQ29kZTogei5zdHJpbmcoKS5yZWdleCgvXlxcZHs2LDh9JC8sIFwiSFNOIGNvZGUgbXVzdCBiZSA2LTggZGlnaXRzXCIpLm9wdGlvbmFsKCksXG4gICAgICBsaW5rTmFtZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgcmVsYXRlZFByb2R1Y3RzOiB6LmFycmF5KHoub2JqZWN0KHtcbiAgICAgICAgbGlua05hbWU6IHouc3RyaW5nKCkubWluKDEsIFwiTGluayBuYW1lIGlzIHJlcXVpcmVkXCIpLFxuICAgICAgICB1cmw6IHouc3RyaW5nKCkudXJsKFwiRWFjaCByZWxhdGVkIHByb2R1Y3QgbXVzdCBiZSBhIHZhbGlkIFVSTFwiKVxuICAgICAgfSkpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICAgIEdTVDogei5vYmplY3Qoe1xuICAgICAgICBwZXJjZW50YWdlOiB6LmNvZXJjZS5udW1iZXIoKS5taW4oMCwgXCJHU1QgcGVyY2VudGFnZSBtdXN0IGJlIG5vbi1uZWdhdGl2ZVwiKS5tYXgoMTAwLCBcIkdTVCBwZXJjZW50YWdlIGNhbm5vdCBleGNlZWQgMTAwXCIpXG4gICAgICB9KS5vcHRpb25hbCgpLFxuICAgIH0pO1xuICB9XG5cbiAgc3RhdGljIEFkZFByb2R1Y3RWYXJpYW50SW1hZ2UoKSB7XG4gICAgcmV0dXJuIHoub2JqZWN0KHtcbiAgICAgIHByb2R1Y3RWYXJpYW50SWQ6IHouc3RyaW5nKCkubWluKDEsIFwiUHJvZHVjdCB2YXJpYW50IElEIGlzIHJlcXVpcmVkXCIpLFxuICAgICAgaW1hZ2VVcmw6IHouc3RyaW5nKCkubWluKDEsIFwiSW1hZ2UgVVJMIGlzIHJlcXVpcmVkXCIpLFxuICAgICAgaXNQcmltYXJ5OiB6LmJvb2xlYW4oKS5vcHRpb25hbCgpLmRlZmF1bHQoZmFsc2UpLFxuICAgIH0pO1xuICB9XG5cbiAgc3RhdGljIEFkZFByb2R1Y3RWYXJpYW50KCkge1xuICAgIHJldHVybiB6Lm9iamVjdCh7XG4gICAgICBwcm9kdWN0SWQ6IHouc3RyaW5nKCkubWluKDEsIFwiUHJvZHVjdCBJRCBpcyByZXF1aXJlZFwiKSxcbiAgICAgIHByb2R1Y3RWYXJpYW50U0tVOiB6LnN0cmluZygpLm1pbigxLCBcIlZhcmlhbnQgU0tVIGlzIHJlcXVpcmVkXCIpLFxuICAgICAgdGl0bGU6IHouc3RyaW5nKCkubWluKDEsIFwiVmFyaWFudCB0aXRsZSBpcyByZXF1aXJlZFwiKSxcbiAgICAgIGRlc2NyaXB0aW9uOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICBwcmljZTogei5udW1iZXIoKS5wb3NpdGl2ZShcIlByaWNlIG11c3QgYmUgcG9zaXRpdmVcIiksXG4gICAgICBzdG9ja1F1YW50aXR5OiB6Lm51bWJlcigpLmludCgpLm1pbigwLCBcIlN0b2NrIHF1YW50aXR5IGNhbm5vdCBiZSBuZWdhdGl2ZVwiKSxcbiAgICAgIHByb2R1Y3RXZWlnaHQ6IHoubnVtYmVyKCkub3B0aW9uYWwoKSxcbiAgICAgIHZhcmlhbnRUeXBlOiB6LnN0cmluZygpLm1pbigxLCBcIlZhcmlhbnQgdHlwZSBpcyByZXF1aXJlZFwiKSxcbiAgICAgIHZhcmlhbnRWYWx1ZTogei5zdHJpbmcoKS5taW4oMSwgXCJWYXJpYW50IHZhbHVlIGlzIHJlcXVpcmVkXCIpLFxuICAgICAgaGVpZ2h0OiB6Lm51bWJlcigpLm9wdGlvbmFsKCksXG4gICAgICB3aWR0aDogei5udW1iZXIoKS5vcHRpb25hbCgpLFxuICAgICAgYnJlYWR0aDogei5udW1iZXIoKS5vcHRpb25hbCgpLFxuICAgICAgaW1hZ2VzOiB6LmFycmF5KFxuICAgICAgICB6Lm9iamVjdCh7XG4gICAgICAgICAgaW1hZ2VVcmw6IHouc3RyaW5nKCkubWluKDEsIFwiSW1hZ2UgVVJMIGlzIHJlcXVpcmVkXCIpLFxuICAgICAgICAgIGlzUHJpbWFyeTogei5ib29sZWFuKCkub3B0aW9uYWwoKS5kZWZhdWx0KGZhbHNlKSxcbiAgICAgICAgfSlcbiAgICAgICkub3B0aW9uYWwoKSxcbiAgICAgIGRpc2NvdW50czogei5hcnJheShcbiAgICAgICAgei5vYmplY3Qoe1xuICAgICAgICAgIGRpc2NvdW50VHlwZTogei5lbnVtKFtcInBlcmNlbnRhZ2VcIiwgXCJhbW91bnRcIl0pLFxuICAgICAgICAgIGRpc2NvdW50VmFsdWU6IHoubnVtYmVyKCkucG9zaXRpdmUoXCJEaXNjb3VudCB2YWx1ZSBtdXN0IGJlIHBvc2l0aXZlXCIpLFxuICAgICAgICAgIHN0YXJ0RGF0ZTogei5zdHJpbmcoKS5kYXRldGltZSgpLFxuICAgICAgICAgIGVuZERhdGU6IHouc3RyaW5nKCkuZGF0ZXRpbWUoKSxcbiAgICAgICAgfSlcbiAgICAgICkub3B0aW9uYWwoKSxcbiAgICB9KTtcbiAgfVxuXG4gIHN0YXRpYyBVcGRhdGVQcm9kdWN0VmFyaWFudCgpIHtcbiAgICByZXR1cm4gei5vYmplY3Qoe1xuICAgICAgaWQ6IHouc3RyaW5nKCksXG4gICAgICBwcm9kdWN0SWQ6IHouc3RyaW5nKCksXG4gICAgICBwcm9kdWN0VmFyaWFudFNLVTogei5zdHJpbmcoKSxcbiAgICAgIHRpdGxlOiB6LnN0cmluZygpLFxuICAgICAgZGVzY3JpcHRpb246IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgIHByaWNlOiB6Lm51bWJlcigpLFxuICAgICAgc3RvY2tRdWFudGl0eTogei5udW1iZXIoKSxcbiAgICAgIHByb2R1Y3RXZWlnaHQ6IHoubnVtYmVyKCkub3B0aW9uYWwoKSxcbiAgICAgIHZhcmlhbnRUeXBlOiB6LnN0cmluZygpLFxuICAgICAgdmFyaWFudFZhbHVlOiB6LnN0cmluZygpLFxuICAgICAgaGVpZ2h0OiB6Lm51bWJlcigpLm9wdGlvbmFsKCksXG4gICAgICB3aWR0aDogei5udW1iZXIoKS5vcHRpb25hbCgpLFxuICAgICAgYnJlYWR0aDogei5udW1iZXIoKS5vcHRpb25hbCgpLFxuICAgICAgaW1hZ2VzOiB6LmFycmF5KFxuICAgICAgICB6Lm9iamVjdCh7XG4gICAgICAgICAgaW1hZ2VVcmw6IHouc3RyaW5nKCkubWluKDEsIFwiSW1hZ2UgVVJMIGlzIHJlcXVpcmVkXCIpLFxuICAgICAgICAgIGlzUHJpbWFyeTogei5ib29sZWFuKCkub3B0aW9uYWwoKS5kZWZhdWx0KGZhbHNlKSxcbiAgICAgICAgfSlcbiAgICAgICkub3B0aW9uYWwoKSxcbiAgICAgIGRpc2NvdW50czogei5hcnJheShcbiAgICAgICAgei5vYmplY3Qoe1xuICAgICAgICAgIGRpc2NvdW50VHlwZTogei5lbnVtKFtcInBlcmNlbnRhZ2VcIiwgXCJhbW91bnRcIl0pLFxuICAgICAgICAgIGRpc2NvdW50VmFsdWU6IHoubnVtYmVyKCkucG9zaXRpdmUoXCJEaXNjb3VudCB2YWx1ZSBtdXN0IGJlIHBvc2l0aXZlXCIpLFxuICAgICAgICAgIHN0YXJ0RGF0ZTogei5zdHJpbmcoKS5kYXRldGltZSgpLFxuICAgICAgICAgIGVuZERhdGU6IHouc3RyaW5nKCkuZGF0ZXRpbWUoKSxcbiAgICAgICAgfSlcbiAgICAgICkub3B0aW9uYWwoKSxcbiAgICB9KTtcbiAgfVxuXG4gIHN0YXRpYyBBZGRQcm9kdWN0VmFyaWFudERpc2NvdW50KCkge1xuICAgIHJldHVybiB6Lm9iamVjdCh7XG4gICAgICBwcm9kdWN0VmFyaWFudElkOiB6LnN0cmluZygpLm1pbigxLCBcIlByb2R1Y3QgdmFyaWFudCBJRCBpcyByZXF1aXJlZFwiKSxcbiAgICAgIGRpc2NvdW50VHlwZTogei5lbnVtKFtcInBlcmNlbnRhZ2VcIiwgXCJhbW91bnRcIl0pLFxuICAgICAgZGlzY291bnRWYWx1ZTogei5udW1iZXIoKS5wb3NpdGl2ZShcIkRpc2NvdW50IHZhbHVlIG11c3QgYmUgcG9zaXRpdmVcIiksXG4gICAgICBzdGFydERhdGU6IHouc3RyaW5nKCkuZGF0ZXRpbWUoKSxcbiAgICAgIGVuZERhdGU6IHouc3RyaW5nKCkuZGF0ZXRpbWUoKSxcbiAgICB9KTtcbiAgfVxuXG4gIHN0YXRpYyBVcGRhdGVQcm9kdWN0VmFyaWFudERpc2NvdW50KCkge1xuICAgIHJldHVybiB6Lm9iamVjdCh7XG4gICAgICBpZDogei5zdHJpbmcoKS5taW4oMSwgXCJEaXNjb3VudCBJRCBpcyByZXF1aXJlZFwiKSxcbiAgICAgIGRpc2NvdW50VHlwZTogei5lbnVtKFtcInBlcmNlbnRhZ2VcIiwgXCJhbW91bnRcIl0pLFxuICAgICAgZGlzY291bnRWYWx1ZTogei5udW1iZXIoKS5wb3NpdGl2ZShcIkRpc2NvdW50IHZhbHVlIG11c3QgYmUgcG9zaXRpdmVcIiksXG4gICAgICBzdGFydERhdGU6IHouc3RyaW5nKCkuZGF0ZXRpbWUoKSxcbiAgICAgIGVuZERhdGU6IHouc3RyaW5nKCkuZGF0ZXRpbWUoKSxcbiAgICB9KTtcbiAgfVxuXG4gIHN0YXRpYyBCdWxrVXBsb2FkUHJvZHVjdCgpIHtcbiAgICByZXR1cm4gei5vYmplY3Qoe1xuICAgICAgcHJvZHVjdHM6IHouYXJyYXkoXG4gICAgICAgIHoub2JqZWN0KHtcbiAgICAgICAgICBwcm9kdWN0U0tVOiB6LnN0cmluZygpLm1pbigxLCBcIlByb2R1Y3QgU0tVIGlzIHJlcXVpcmVkXCIpLFxuICAgICAgICAgIGNhdGVnb3J5OiB6LnN0cmluZygpLm1pbigxLCBcIkNhdGVnb3J5IGlzIHJlcXVpcmVkXCIpLFxuICAgICAgICAgIG5hbWU6IHouc3RyaW5nKCkubWluKDEsIFwiUHJvZHVjdCBuYW1lIGlzIHJlcXVpcmVkXCIpLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgICAgaXNBcHByb3ZlZDogei5ib29sZWFuKCkub3B0aW9uYWwoKSxcbiAgICAgICAgICBhYm91dFByb2R1Y3Q6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgICAgICBicmFuZDogei5zdHJpbmcoKS5taW4oMSwgXCJCcmFuZCBpcyByZXF1aXJlZFwiKSxcbiAgICAgICAgICBoc25Db2RlOiB6LnVuaW9uKFtcbiAgICAgICAgICAgIHouc3RyaW5nKCkucmVnZXgoL15cXGR7Niw4fSQvLCBcIkhTTiBjb2RlIG11c3QgYmUgNi04IGRpZ2l0c1wiKSxcbiAgICAgICAgICAgIHoubnVtYmVyKCkudHJhbnNmb3JtKHZhbCA9PiBTdHJpbmcodmFsKSlcbiAgICAgICAgICBdKVxuICAgICAgICAgICAgLnRyYW5zZm9ybSh2YWwgPT4gdmFsLnRvU3RyaW5nKCkucGFkU3RhcnQoOCwgJzAnKSlcbiAgICAgICAgICAgIC5vcHRpb25hbCgpLFxuICAgICAgICAgIGxpbmtOYW1lOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgICAgcmVsYXRlZFByb2R1Y3RzOiB6LmFycmF5KHoub2JqZWN0KHtcbiAgICAgICAgICAgIGxpbmtOYW1lOiB6LnN0cmluZygpLm1pbigxLCBcIkxpbmsgbmFtZSBpcyByZXF1aXJlZFwiKSxcbiAgICAgICAgICAgIHVybDogei5zdHJpbmcoKS51cmwoXCJFYWNoIHJlbGF0ZWQgcHJvZHVjdCBtdXN0IGJlIGEgdmFsaWQgVVJMXCIpXG4gICAgICAgICAgfSkpLm9wdGlvbmFsKCksXG4gICAgICAgICAgR1NUOiB6Lm9iamVjdCh7XG4gICAgICAgICAgICBwZXJjZW50YWdlOiB6Lm51bWJlcigpLnBvc2l0aXZlKFwiR1NUIHBlcmNlbnRhZ2UgbXVzdCBiZSBwb3NpdGl2ZVwiKVxuICAgICAgICAgIH0pLm9wdGlvbmFsKCksXG4gICAgICAgIH0pXG4gICAgICApLFxuICAgICAgdmFyaWFudHM6IHouYXJyYXkoXG4gICAgICAgIHoub2JqZWN0KHtcbiAgICAgICAgICBwcm9kdWN0U0tVOiB6LnN0cmluZygpLm1pbigxLCBcIlByb2R1Y3QgU0tVIGlzIHJlcXVpcmVkXCIpLFxuICAgICAgICAgIHByb2R1Y3RWYXJpYW50U0tVOiB6LnN0cmluZygpLm1pbigxLCBcIlZhcmlhbnQgU0tVIGlzIHJlcXVpcmVkXCIpLFxuICAgICAgICAgIHRpdGxlOiB6LnN0cmluZygpLm1pbigxLCBcIlZhcmlhbnQgdGl0bGUgaXMgcmVxdWlyZWRcIiksXG4gICAgICAgICAgZGVzY3JpcHRpb246IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgICAgICBwcmljZTogei5udW1iZXIoKS5wb3NpdGl2ZShcIlByaWNlIG11c3QgYmUgcG9zaXRpdmVcIiksXG4gICAgICAgICAgc3RvY2tRdWFudGl0eTogei5udW1iZXIoKS5pbnQoKS5taW4oMCwgXCJTdG9jayBxdWFudGl0eSBjYW5ub3QgYmUgbmVnYXRpdmVcIiksXG4gICAgICAgICAgdmFyaWFudFR5cGU6IHouc3RyaW5nKCkubWluKDEsIFwiVmFyaWFudCB0eXBlIGlzIHJlcXVpcmVkXCIpLFxuICAgICAgICAgIHZhcmlhbnRWYWx1ZTogei5zdHJpbmcoKS5taW4oMSwgXCJWYXJpYW50IHZhbHVlIGlzIHJlcXVpcmVkXCIpLFxuICAgICAgICAgIHByb2R1Y3RXZWlnaHQ6IHoubnVtYmVyKCkubWluKDAsIFwiUHJvZHVjdCB3ZWlnaHQgY2Fubm90IGJlIG5lZ2F0aXZlXCIpLm9wdGlvbmFsKCksXG4gICAgICAgIH0pXG4gICAgICApLFxuICAgICAgdmFyaWFudEltYWdlczogei5hcnJheShcbiAgICAgICAgei5vYmplY3Qoe1xuICAgICAgICAgIHByb2R1Y3RWYXJpYW50U0tVOiB6LnN0cmluZygpLm1pbigxLCBcIlZhcmlhbnQgU0tVIGlzIHJlcXVpcmVkXCIpLFxuICAgICAgICAgIGltYWdlVXJsOiB6LnN0cmluZygpLm1pbigxLCBcIkltYWdlIFVSTCBpcyByZXF1aXJlZFwiKSxcbiAgICAgICAgICBpc1ByaW1hcnk6IHouYm9vbGVhbigpLm9wdGlvbmFsKCksXG4gICAgICAgIH0pXG4gICAgICApLm9wdGlvbmFsKCksXG4gICAgICB2YXJpYW50RGlzY291bnRzOiB6LmFycmF5KFxuICAgICAgICB6Lm9iamVjdCh7XG4gICAgICAgICAgcHJvZHVjdFZhcmlhbnRTS1U6IHouc3RyaW5nKCkubWluKDEsIFwiVmFyaWFudCBTS1UgaXMgcmVxdWlyZWRcIiksXG4gICAgICAgICAgZGlzY291bnRUeXBlOiB6LmVudW0oW1wicGVyY2VudGFnZVwiLCBcImFtb3VudFwiXSksXG4gICAgICAgICAgZGlzY291bnRWYWx1ZTogei5udW1iZXIoKS5wb3NpdGl2ZShcIkRpc2NvdW50IHZhbHVlIG11c3QgYmUgcG9zaXRpdmVcIiksXG4gICAgICAgICAgc3RhcnREYXRlOiB6LnVuaW9uKFt6LnN0cmluZygpLCB6Lm51bWJlcigpXSkudHJhbnNmb3JtKHZhbCA9PiBcbiAgICAgICAgICAgIHR5cGVvZiB2YWwgPT09ICdudW1iZXInIFxuICAgICAgICAgICAgICA/IG5ldyBEYXRlKE1hdGgucm91bmQoKHZhbCAtIDI1NTY5KSAqIDg2NDAwICogMTAwMCkpLnRvSVNPU3RyaW5nKCkgXG4gICAgICAgICAgICAgIDogU3RyaW5nKHZhbClcbiAgICAgICAgICApLFxuICAgICAgICAgIGVuZERhdGU6IHoudW5pb24oW3ouc3RyaW5nKCksIHoubnVtYmVyKCldKS50cmFuc2Zvcm0odmFsID0+IFxuICAgICAgICAgICAgdHlwZW9mIHZhbCA9PT0gJ251bWJlcicgXG4gICAgICAgICAgICAgID8gbmV3IERhdGUoTWF0aC5yb3VuZCgodmFsIC0gMjU1NjkpICogODY0MDAgKiAxMDAwKSkudG9JU09TdHJpbmcoKSBcbiAgICAgICAgICAgICAgOiBTdHJpbmcodmFsKVxuICAgICAgICAgICksXG4gICAgICAgIH0pXG4gICAgICApLm9wdGlvbmFsKCksXG4gICAgICBzZWxsZXJJZDogei5zdHJpbmcoKS5taW4oMSwgXCJTZWxsZXIgSUQgaXMgcmVxdWlyZWRcIiksXG4gICAgfSk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJ6IiwiUHJvZHVjdFZhbGlkYXRpb24iLCJDcmVhdGVQcm9kdWN0Iiwib2JqZWN0IiwicHJvZHVjdFNLVSIsInN0cmluZyIsIm1pbiIsInNlbGxlcklkIiwiY2F0ZWdvcnlJZCIsIm5hbWUiLCJkZXNjcmlwdGlvbiIsIm9wdGlvbmFsIiwiYnJhbmQiLCJhYm91dFByb2R1Y3QiLCJpc0FwcHJvdmVkIiwiYm9vbGVhbiIsIndob2xlc2FsZSIsImhzbkNvZGUiLCJyZWdleCIsImxpbmtOYW1lIiwicmVsYXRlZFByb2R1Y3RzIiwiYXJyYXkiLCJ1cmwiLCJudWxsYWJsZSIsIkdTVCIsInBlcmNlbnRhZ2UiLCJudW1iZXIiLCJwb3NpdGl2ZSIsInZhcmlhbnRzIiwicHJvZHVjdFZhcmlhbnRTS1UiLCJ0aXRsZSIsInByaWNlIiwic3RvY2tRdWFudGl0eSIsImludCIsInByb2R1Y3RXZWlnaHQiLCJ2YXJpYW50VHlwZSIsInZhcmlhbnRWYWx1ZSIsImhlaWdodCIsIndpZHRoIiwiYnJlYWR0aCIsImltYWdlcyIsImltYWdlVXJsIiwiaXNQcmltYXJ5IiwiZGVmYXVsdCIsImRpc2NvdW50cyIsImRpc2NvdW50VHlwZSIsImVudW0iLCJkaXNjb3VudFZhbHVlIiwic3RhcnREYXRlIiwiZGF0ZXRpbWUiLCJlbmREYXRlIiwiVXBkYXRlUHJvZHVjdCIsImNvZXJjZSIsIm1heCIsIkFkZFByb2R1Y3RWYXJpYW50SW1hZ2UiLCJwcm9kdWN0VmFyaWFudElkIiwiQWRkUHJvZHVjdFZhcmlhbnQiLCJwcm9kdWN0SWQiLCJVcGRhdGVQcm9kdWN0VmFyaWFudCIsImlkIiwiQWRkUHJvZHVjdFZhcmlhbnREaXNjb3VudCIsIlVwZGF0ZVByb2R1Y3RWYXJpYW50RGlzY291bnQiLCJCdWxrVXBsb2FkUHJvZHVjdCIsInByb2R1Y3RzIiwiY2F0ZWdvcnkiLCJ1bmlvbiIsInRyYW5zZm9ybSIsInZhbCIsIlN0cmluZyIsInRvU3RyaW5nIiwicGFkU3RhcnQiLCJ2YXJpYW50SW1hZ2VzIiwidmFyaWFudERpc2NvdW50cyIsIkRhdGUiLCJNYXRoIiwicm91bmQiLCJ0b0lTT1N0cmluZyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/modules/validations/ProductValidation.ts\n");

/***/ }),

/***/ "(rsc)/./src/utils/responseGenerator.ts":
/*!****************************************!*\
  !*** ./src/utils/responseGenerator.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ResponseGenerator: () => (/* binding */ ResponseGenerator)\n/* harmony export */ });\n// utils/responseGenerator.ts\n// Mapping default messages for common status codes\nconst defaultMessages = {\n    100: \"Continue\",\n    200: \"OK\",\n    201: \"Created\",\n    204: \"No Content\",\n    301: \"Moved Permanently\",\n    302: \"Found\",\n    304: \"Not Modified\",\n    400: \"Bad Request\",\n    401: \"Unauthorized\",\n    403: \"Forbidden\",\n    404: \"Not Found\",\n    405: \"Method Not Allowed\",\n    408: \"Request Timeout\",\n    409: \"Conflict\",\n    429: \"Too Many Requests\",\n    500: \"Internal Server Error\",\n    501: \"Not Implemented\",\n    502: \"Bad Gateway\",\n    503: \"Service Unavailable\",\n    504: \"Gateway Timeout\"\n};\nclass ResponseGenerator {\n    static generate(code, data = null, customMessage, validationErrors = []) {\n        const status = code >= 400 ? \"error\" : \"success\";\n        const message = customMessage || defaultMessages[code] || \"Unknown status\";\n        return [\n            {\n                version: \"1.0.0\",\n                validationErrors,\n                code,\n                status,\n                message,\n                data\n            },\n            {\n                status: code\n            }\n        ];\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvdXRpbHMvcmVzcG9uc2VHZW5lcmF0b3IudHMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBLDZCQUE2QjtBQVc3QixtREFBbUQ7QUFDbkQsTUFBTUEsa0JBQThDO0lBQ2xELEtBQUs7SUFDTCxLQUFLO0lBQ0wsS0FBSztJQUNMLEtBQUs7SUFDTCxLQUFLO0lBQ0wsS0FBSztJQUNMLEtBQUs7SUFDTCxLQUFLO0lBQ0wsS0FBSztJQUNMLEtBQUs7SUFDTCxLQUFLO0lBQ0wsS0FBSztJQUNMLEtBQUs7SUFDTCxLQUFLO0lBQ0wsS0FBSztJQUNMLEtBQUs7SUFDTCxLQUFLO0lBQ0wsS0FBSztJQUNMLEtBQUs7SUFDTCxLQUFLO0FBQ1A7QUFFTyxNQUFNQztJQUNYLE9BQU9DLFNBQ0xDLElBQVksRUFDWkMsT0FBaUIsSUFBSSxFQUNyQkMsYUFBc0IsRUFDdEJDLG1CQUFxQixFQUFFLEVBQ2U7UUFDdEMsTUFBTUMsU0FBU0osUUFBUSxNQUFNLFVBQVU7UUFDdkMsTUFBTUssVUFBVUgsaUJBQWlCTCxlQUFlLENBQUNHLEtBQUssSUFBSTtRQUMxRCxPQUFPO1lBQ0w7Z0JBQ0VNLFNBQVM7Z0JBQ1RIO2dCQUNBSDtnQkFDQUk7Z0JBQ0FDO2dCQUNBSjtZQUNGO1lBQ0E7Z0JBQUVHLFFBQVFKO1lBQUs7U0FDaEI7SUFDSDtBQUNGIiwic291cmNlcyI6WyIvaG9tZS93ZWJub3gvZ29rdWwgaW5kcmFuaWllL3dlYnNpdGUvc3JjL3V0aWxzL3Jlc3BvbnNlR2VuZXJhdG9yLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHV0aWxzL3Jlc3BvbnNlR2VuZXJhdG9yLnRzXG5cbmV4cG9ydCBpbnRlcmZhY2UgQXBpUmVzcG9uc2U8VD4ge1xuICB2ZXJzaW9uOiBzdHJpbmc7XG4gIHZhbGlkYXRpb25FcnJvcnM6IGFueTtcbiAgY29kZTogbnVtYmVyO1xuICBzdGF0dXM6IHN0cmluZztcbiAgbWVzc2FnZTogc3RyaW5nO1xuICBkYXRhOiBUIHwgbnVsbDtcbn1cblxuLy8gTWFwcGluZyBkZWZhdWx0IG1lc3NhZ2VzIGZvciBjb21tb24gc3RhdHVzIGNvZGVzXG5jb25zdCBkZWZhdWx0TWVzc2FnZXM6IHsgW2NvZGU6IG51bWJlcl06IHN0cmluZyB9ID0ge1xuICAxMDA6IFwiQ29udGludWVcIixcbiAgMjAwOiBcIk9LXCIsXG4gIDIwMTogXCJDcmVhdGVkXCIsXG4gIDIwNDogXCJObyBDb250ZW50XCIsXG4gIDMwMTogXCJNb3ZlZCBQZXJtYW5lbnRseVwiLFxuICAzMDI6IFwiRm91bmRcIixcbiAgMzA0OiBcIk5vdCBNb2RpZmllZFwiLFxuICA0MDA6IFwiQmFkIFJlcXVlc3RcIixcbiAgNDAxOiBcIlVuYXV0aG9yaXplZFwiLFxuICA0MDM6IFwiRm9yYmlkZGVuXCIsXG4gIDQwNDogXCJOb3QgRm91bmRcIixcbiAgNDA1OiBcIk1ldGhvZCBOb3QgQWxsb3dlZFwiLFxuICA0MDg6IFwiUmVxdWVzdCBUaW1lb3V0XCIsXG4gIDQwOTogXCJDb25mbGljdFwiLFxuICA0Mjk6IFwiVG9vIE1hbnkgUmVxdWVzdHNcIixcbiAgNTAwOiBcIkludGVybmFsIFNlcnZlciBFcnJvclwiLFxuICA1MDE6IFwiTm90IEltcGxlbWVudGVkXCIsXG4gIDUwMjogXCJCYWQgR2F0ZXdheVwiLFxuICA1MDM6IFwiU2VydmljZSBVbmF2YWlsYWJsZVwiLFxuICA1MDQ6IFwiR2F0ZXdheSBUaW1lb3V0XCIsXG59O1xuXG5leHBvcnQgY2xhc3MgUmVzcG9uc2VHZW5lcmF0b3Ige1xuICBzdGF0aWMgZ2VuZXJhdGU8VD4oXG4gICAgY29kZTogbnVtYmVyLFxuICAgIGRhdGE6IFQgfCBudWxsID0gbnVsbCxcbiAgICBjdXN0b21NZXNzYWdlPzogc3RyaW5nLFxuICAgIHZhbGlkYXRpb25FcnJvcnM6YW55PVtdLFxuICApOiBbQXBpUmVzcG9uc2U8VD4sIHsgc3RhdHVzOiBudW1iZXIgfV0ge1xuICAgIGNvbnN0IHN0YXR1cyA9IGNvZGUgPj0gNDAwID8gXCJlcnJvclwiIDogXCJzdWNjZXNzXCI7XG4gICAgY29uc3QgbWVzc2FnZSA9IGN1c3RvbU1lc3NhZ2UgfHwgZGVmYXVsdE1lc3NhZ2VzW2NvZGVdIHx8IFwiVW5rbm93biBzdGF0dXNcIjtcbiAgICByZXR1cm4gW1xuICAgICAge1xuICAgICAgICB2ZXJzaW9uOiBcIjEuMC4wXCIsXG4gICAgICAgIHZhbGlkYXRpb25FcnJvcnMsXG4gICAgICAgIGNvZGUsXG4gICAgICAgIHN0YXR1cyxcbiAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgZGF0YSxcbiAgICAgIH0sXG4gICAgICB7IHN0YXR1czogY29kZSB9LFxuICAgIF07XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJkZWZhdWx0TWVzc2FnZXMiLCJSZXNwb25zZUdlbmVyYXRvciIsImdlbmVyYXRlIiwiY29kZSIsImRhdGEiLCJjdXN0b21NZXNzYWdlIiwidmFsaWRhdGlvbkVycm9ycyIsInN0YXR1cyIsIm1lc3NhZ2UiLCJ2ZXJzaW9uIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/utils/responseGenerator.ts\n");

/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

"use strict";
module.exports = require("@prisma/client");

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("assert");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "tty":
/*!**********************!*\
  !*** external "tty" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tty");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/lodash","vendor-chunks/zod","vendor-chunks/ms","vendor-chunks/mime-db","vendor-chunks/axios","vendor-chunks/follow-redirects","vendor-chunks/debug","vendor-chunks/form-data","vendor-chunks/get-intrinsic","vendor-chunks/asynckit","vendor-chunks/combined-stream","vendor-chunks/mime-types","vendor-chunks/proxy-from-env","vendor-chunks/supports-color","vendor-chunks/has-symbols","vendor-chunks/delayed-stream","vendor-chunks/function-bind","vendor-chunks/es-set-tostringtag","vendor-chunks/get-proto","vendor-chunks/call-bind-apply-helpers","vendor-chunks/dunder-proto","vendor-chunks/math-intrinsics","vendor-chunks/es-errors","vendor-chunks/has-flag","vendor-chunks/gopd","vendor-chunks/es-define-property","vendor-chunks/hasown","vendor-chunks/has-tostringtag","vendor-chunks/es-object-atoms","vendor-chunks/zod-validation-error","vendor-chunks/xlsx"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fproducts%2Froute&page=%2Fapi%2Fproducts%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fproducts%2Froute.ts&appDir=%2Fhome%2Fwebnox%2Fgokul%20indraniie%2Fwebsite%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fwebnox%2Fgokul%20indraniie%2Fwebsite&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();